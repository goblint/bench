/* Generated by CIL v. 1.5.1 */
/* print_CIL_Input is true */

typedef double LBM_Grid[26000000];
typedef LBM_Grid *LBM_GridPtr;
typedef long long __int64_t;
typedef unsigned long __darwin_size_t;
typedef __int64_t __darwin_off_t;
typedef __darwin_size_t size_t;
typedef __darwin_off_t fpos_t;
struct __sbuf {
   unsigned char *_base ;
   int _size ;
};
struct __sFILEX;
struct __sFILE {
   unsigned char *_p ;
   int _r ;
   int _w ;
   short _flags ;
   short _file ;
   struct __sbuf _bf ;
   int _lbfsize ;
   void *_cookie ;
   int (*_close)(void * ) ;
   int (*_read)(void * , char * , int  ) ;
   fpos_t (*_seek)(void * , fpos_t  , int  ) ;
   int (*_write)(void * , char const   * , int  ) ;
   struct __sbuf _ub ;
   struct __sFILEX *_extra ;
   int _ur ;
   unsigned char _ubuf[3] ;
   unsigned char _nbuf[1] ;
   struct __sbuf _lb ;
   int _blksize ;
   fpos_t _offset ;
};
typedef struct __sFILE FILE;
enum __anonenum_MAIN_Action_1 {
    NOTHING = 0,
    COMPARE = 1,
    STORE = 2
} ;
typedef enum __anonenum_MAIN_Action_1 MAIN_Action;
enum __anonenum_MAIN_SimType_2 {
    LDC = 0,
    CHANNEL = 1
} ;
typedef enum __anonenum_MAIN_SimType_2 MAIN_SimType;
struct __anonstruct_MAIN_Param_3 {
   int nTimeSteps ;
   char *resultFilename ;
   MAIN_Action action ;
   MAIN_SimType simType ;
   char *obstacleFilename ;
};
typedef struct __anonstruct_MAIN_Param_3 MAIN_Param;
typedef unsigned short __uint16_t;
typedef int __int32_t;
typedef unsigned int __uint32_t;
typedef unsigned long long __uint64_t;
typedef long __darwin_time_t;
typedef __int64_t __darwin_blkcnt_t;
typedef __int32_t __darwin_blksize_t;
typedef __int32_t __darwin_dev_t;
typedef __uint32_t __darwin_gid_t;
typedef __uint64_t __darwin_ino64_t;
typedef __uint16_t __darwin_mode_t;
typedef __uint32_t __darwin_uid_t;
typedef __darwin_off_t off_t;
typedef __darwin_uid_t uid_t;
typedef __darwin_dev_t dev_t;
typedef __darwin_mode_t mode_t;
struct timespec {
   __darwin_time_t tv_sec ;
   long tv_nsec ;
};
typedef __darwin_blkcnt_t blkcnt_t;
typedef __darwin_blksize_t blksize_t;
typedef __uint16_t nlink_t;
typedef __darwin_gid_t gid_t;
struct stat {
   dev_t st_dev ;
   mode_t st_mode ;
   nlink_t st_nlink ;
   __darwin_ino64_t st_ino ;
   uid_t st_uid ;
   gid_t st_gid ;
   dev_t st_rdev ;
   struct timespec st_atimespec ;
   struct timespec st_mtimespec ;
   struct timespec st_ctimespec ;
   struct timespec st_birthtimespec ;
   off_t st_size ;
   blkcnt_t st_blocks ;
   blksize_t st_blksize ;
   __uint32_t st_flags ;
   __uint32_t st_gen ;
   __int32_t st_lspare ;
   __int64_t st_qspare[2] ;
};
#pragma merger("0","/var/folders/t8/sjj4fszn7kn63wvbnwnnpcf40000gn/T/cil-Kau5cyRh.i","-O3")
void LBM_allocateGrid(double **ptr ) ;
void LBM_freeGrid(double **ptr ) ;
void LBM_initializeGrid(double *grid ) ;
void LBM_initializeSpecialCellsForLDC(double *grid ) ;
void LBM_loadObstacleFile(double *grid , char const   *filename ) ;
void LBM_initializeSpecialCellsForChannel(double *grid ) ;
void LBM_swapGrids(LBM_GridPtr *grid1 , LBM_GridPtr *grid2 ) ;
void LBM_performStreamCollide(double *srcGrid___0 , double *dstGrid___0 ) ;
void LBM_handleInOutFlow(double *srcGrid___0 ) ;
void LBM_showGridStatistics(double *grid ) ;
void LBM_storeVelocityField(double *grid , char const   *filename , int const   binary ) ;
void LBM_compareVelocityField(double *grid , char const   *filename , int const   binary ) ;
extern double sqrt(double  ) ;
extern  __attribute__((__noreturn__)) void exit(int  ) ;
extern void free(void * ) ;
extern void *malloc(size_t  ) ;
extern int fclose(FILE * ) ;
extern int fgetc(FILE * ) ;
extern FILE *fopen(char const   * , char const   * )  __asm__("_fopen")  ;
extern int ( /* format attribute */  fprintf)(FILE * , char const   *  , ...) ;
extern size_t fread(void * , size_t  , size_t  , FILE * ) ;
extern int ( /* format attribute */  fscanf)(FILE * , char const   *  , ...) ;
extern size_t fwrite(void const   * , size_t  , size_t  , FILE * )  __asm__("_fwrite")  ;
extern int ( /* format attribute */  printf)(char const   *  , ...) ;
void LBM_allocateGrid(double **ptr ) 
{ 
  size_t margin ;
  size_t size ;
  void *tmp ;

  {
  margin = (size_t )400000;
  size = sizeof(LBM_Grid ) + (2UL * margin) * sizeof(double );
  tmp = malloc(size);
  *ptr = (double *)tmp;
  if (! *ptr) {
    printf("LBM_allocateGrid: could not allocate %.1f MByte\n", (double )size / (1024.0 * 1024.0));
    exit(1);
  }
  *ptr += margin;
  return;
}
}
void LBM_freeGrid(double **ptr ) 
{ 
  size_t margin ;

  {
  margin = (size_t )400000;
  free((void *)(*ptr - margin));
  *ptr = (double *)((void *)0);
  return;
}
}
void LBM_initializeGrid(double *grid ) 
{ 
  int i ;
  unsigned int *_aux_ ;

  {
  i = -400000;
  while (i < 26400000) {
    *(grid + i) = 1.0 / 3.0;
    *(grid + (1 + i)) = 1.0 / 18.0;
    *(grid + (2 + i)) = 1.0 / 18.0;
    *(grid + (3 + i)) = 1.0 / 18.0;
    *(grid + (4 + i)) = 1.0 / 18.0;
    *(grid + (5 + i)) = 1.0 / 18.0;
    *(grid + (6 + i)) = 1.0 / 18.0;
    *(grid + (7 + i)) = 1.0 / 36.0;
    *(grid + (8 + i)) = 1.0 / 36.0;
    *(grid + (9 + i)) = 1.0 / 36.0;
    *(grid + (10 + i)) = 1.0 / 36.0;
    *(grid + (11 + i)) = 1.0 / 36.0;
    *(grid + (12 + i)) = 1.0 / 36.0;
    *(grid + (13 + i)) = 1.0 / 36.0;
    *(grid + (14 + i)) = 1.0 / 36.0;
    *(grid + (15 + i)) = 1.0 / 36.0;
    *(grid + (16 + i)) = 1.0 / 36.0;
    *(grid + (17 + i)) = 1.0 / 36.0;
    *(grid + (18 + i)) = 1.0 / 36.0;
    _aux_ = (unsigned int *)((void *)(grid + (19 + i)));
    *_aux_ = 0U;
    i += 20;
  }
  return;
}
}
void LBM_swapGrids(LBM_GridPtr *grid1 , LBM_GridPtr *grid2 ) 
{ 
  LBM_GridPtr aux ;

  {
  aux = *grid1;
  *grid1 = *grid2;
  *grid2 = aux;
  return;
}
}
void LBM_loadObstacleFile(double *grid , char const   *filename ) 
{ 
  int x ;
  int y ;
  int z ;
  FILE *file ;
  FILE *tmp ;
  unsigned int *_aux_ ;
  int tmp___0 ;

  {
  tmp = fopen(filename, "rb");
  file = tmp;
  z = 0;
  while (z < 130) {
    y = 0;
    while (y < 100) {
      x = 0;
      while (x < 100) {
        tmp___0 = fgetc(file);
        if (tmp___0 != 46) {
          _aux_ = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
          *_aux_ |= 1U;
        }
        x ++;
      }
      fgetc(file);
      y ++;
    }
    fgetc(file);
    z ++;
  }
  fclose(file);
  return;
}
}
void LBM_initializeSpecialCellsForLDC(double *grid ) 
{ 
  int x ;
  int y ;
  int z ;
  unsigned int *_aux_ ;
  unsigned int *_aux____0 ;

  {
  z = -2;
  while (z < 132) {
    y = 0;
    while (y < 100) {
      x = 0;
      while (x < 100) {
        if (x == 0) {
          _aux_ = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
          *_aux_ |= 1U;
        } else
        if (x == 99) {
          _aux_ = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
          *_aux_ |= 1U;
        } else
        if (y == 0) {
          _aux_ = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
          *_aux_ |= 1U;
        } else
        if (y == 99) {
          _aux_ = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
          *_aux_ |= 1U;
        } else
        if (z == 0) {
          _aux_ = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
          *_aux_ |= 1U;
        } else
        if (z == 129) {
          _aux_ = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
          *_aux_ |= 1U;
        } else
        if (z == 1) {
          goto _L;
        } else
        if (z == 128) {
          _L: /* CIL Label */ 
          if (x > 1) {
            if (x < 98) {
              if (y > 1) {
                if (y < 98) {
                  _aux____0 = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
                  *_aux____0 |= 2U;
                }
              }
            }
          }
        }
        x ++;
      }
      y ++;
    }
    z ++;
  }
  return;
}
}
void LBM_initializeSpecialCellsForChannel(double *grid ) 
{ 
  int x ;
  int y ;
  int z ;
  unsigned int *_aux_ ;
  unsigned int *_aux____0 ;

  {
  z = -2;
  while (z < 132) {
    y = 0;
    while (y < 100) {
      x = 0;
      while (x < 100) {
        if (x == 0) {
          goto _L___0;
        } else
        if (x == 99) {
          goto _L___0;
        } else
        if (y == 0) {
          goto _L___0;
        } else
        if (y == 99) {
          _L___0: /* CIL Label */ 
          _aux_ = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
          *_aux_ |= 1U;
          if (z == 0) {
            goto _L;
          } else
          if (z == 129) {
            _L: /* CIL Label */ 
            if (! (*((unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))))) & 1U)) {
              _aux____0 = (unsigned int *)((void *)(grid + (19 + 20 * ((x + y * 100) + (z * 100) * 100))));
              *_aux____0 |= 4U;
            }
          }
        }
        x ++;
      }
      y ++;
    }
    z ++;
  }
  return;
}
}
void LBM_performStreamCollide(double *srcGrid___0 , double *dstGrid___0 ) 
{ 
  int i ;
  double ux ;
  double uy ;
  double uz ;
  double u2 ;
  double rho ;

  {
  i = 0;
  while (i < 26000000) {
    if (*((unsigned int *)((void *)(srcGrid___0 + (19 + i)))) & 1U) {
      *(dstGrid___0 + i) = *(srcGrid___0 + i);
      *(dstGrid___0 + (-1998 + i)) = *(srcGrid___0 + (1 + i));
      *(dstGrid___0 + (2001 + i)) = *(srcGrid___0 + (2 + i));
      *(dstGrid___0 + (-16 + i)) = *(srcGrid___0 + (3 + i));
      *(dstGrid___0 + (23 + i)) = *(srcGrid___0 + (4 + i));
      *(dstGrid___0 + (-199994 + i)) = *(srcGrid___0 + (5 + i));
      *(dstGrid___0 + (200005 + i)) = *(srcGrid___0 + (6 + i));
      *(dstGrid___0 + (-2010 + i)) = *(srcGrid___0 + (7 + i));
      *(dstGrid___0 + (-1971 + i)) = *(srcGrid___0 + (8 + i));
      *(dstGrid___0 + (1988 + i)) = *(srcGrid___0 + (9 + i));
      *(dstGrid___0 + (2027 + i)) = *(srcGrid___0 + (10 + i));
      *(dstGrid___0 + (-201986 + i)) = *(srcGrid___0 + (11 + i));
      *(dstGrid___0 + (198013 + i)) = *(srcGrid___0 + (12 + i));
      *(dstGrid___0 + (-197988 + i)) = *(srcGrid___0 + (13 + i));
      *(dstGrid___0 + (202011 + i)) = *(srcGrid___0 + (14 + i));
      *(dstGrid___0 + (-200002 + i)) = *(srcGrid___0 + (15 + i));
      *(dstGrid___0 + (199997 + i)) = *(srcGrid___0 + (16 + i));
      *(dstGrid___0 + (-199964 + i)) = *(srcGrid___0 + (17 + i));
      *(dstGrid___0 + (200035 + i)) = *(srcGrid___0 + (18 + i));
      goto __Cont;
    }
    rho = (((((((((((((((((*(srcGrid___0 + i) + *(srcGrid___0 + (1 + i))) + *(srcGrid___0 + (2 + i))) + *(srcGrid___0 + (3 + i))) + *(srcGrid___0 + (4 + i))) + *(srcGrid___0 + (5 + i))) + *(srcGrid___0 + (6 + i))) + *(srcGrid___0 + (7 + i))) + *(srcGrid___0 + (8 + i))) + *(srcGrid___0 + (9 + i))) + *(srcGrid___0 + (10 + i))) + *(srcGrid___0 + (11 + i))) + *(srcGrid___0 + (12 + i))) + *(srcGrid___0 + (13 + i))) + *(srcGrid___0 + (14 + i))) + *(srcGrid___0 + (15 + i))) + *(srcGrid___0 + (16 + i))) + *(srcGrid___0 + (17 + i))) + *(srcGrid___0 + (18 + i));
    ux = ((((((((*(srcGrid___0 + (3 + i)) - *(srcGrid___0 + (4 + i))) + *(srcGrid___0 + (7 + i))) - *(srcGrid___0 + (8 + i))) + *(srcGrid___0 + (9 + i))) - *(srcGrid___0 + (10 + i))) + *(srcGrid___0 + (15 + i))) + *(srcGrid___0 + (16 + i))) - *(srcGrid___0 + (17 + i))) - *(srcGrid___0 + (18 + i));
    uy = ((((((((*(srcGrid___0 + (1 + i)) - *(srcGrid___0 + (2 + i))) + *(srcGrid___0 + (7 + i))) + *(srcGrid___0 + (8 + i))) - *(srcGrid___0 + (9 + i))) - *(srcGrid___0 + (10 + i))) + *(srcGrid___0 + (11 + i))) + *(srcGrid___0 + (12 + i))) - *(srcGrid___0 + (13 + i))) - *(srcGrid___0 + (14 + i));
    uz = ((((((((*(srcGrid___0 + (5 + i)) - *(srcGrid___0 + (6 + i))) + *(srcGrid___0 + (11 + i))) - *(srcGrid___0 + (12 + i))) + *(srcGrid___0 + (13 + i))) - *(srcGrid___0 + (14 + i))) + *(srcGrid___0 + (15 + i))) - *(srcGrid___0 + (16 + i))) + *(srcGrid___0 + (17 + i))) - *(srcGrid___0 + (18 + i));
    ux /= rho;
    uy /= rho;
    uz /= rho;
    if (*((unsigned int *)((void *)(srcGrid___0 + (19 + i)))) & 2U) {
      ux = 0.005;
      uy = 0.002;
      uz = 0.000;
    }
    u2 = 1.5 * ((ux * ux + uy * uy) + uz * uz);
    *(dstGrid___0 + i) = (1.0 - 1.95) * *(srcGrid___0 + i) + (((1.0 / 3.0) * 1.95) * rho) * (1.0 - u2);
    *(dstGrid___0 + (2001 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (1 + i)) + (((1.0 / 18.0) * 1.95) * rho) * ((1.0 + uy * (4.5 * uy + 3.0)) - u2);
    *(dstGrid___0 + (-1998 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (2 + i)) + (((1.0 / 18.0) * 1.95) * rho) * ((1.0 + uy * (4.5 * uy - 3.0)) - u2);
    *(dstGrid___0 + (23 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (3 + i)) + (((1.0 / 18.0) * 1.95) * rho) * ((1.0 + ux * (4.5 * ux + 3.0)) - u2);
    *(dstGrid___0 + (-16 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (4 + i)) + (((1.0 / 18.0) * 1.95) * rho) * ((1.0 + ux * (4.5 * ux - 3.0)) - u2);
    *(dstGrid___0 + (200005 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (5 + i)) + (((1.0 / 18.0) * 1.95) * rho) * ((1.0 + uz * (4.5 * uz + 3.0)) - u2);
    *(dstGrid___0 + (-199994 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (6 + i)) + (((1.0 / 18.0) * 1.95) * rho) * ((1.0 + uz * (4.5 * uz - 3.0)) - u2);
    *(dstGrid___0 + (2027 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (7 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (ux + uy) * (4.5 * (ux + uy) + 3.0)) - u2);
    *(dstGrid___0 + (1988 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (8 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (- ux + uy) * (4.5 * (- ux + uy) + 3.0)) - u2);
    *(dstGrid___0 + (-1971 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (9 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (ux - uy) * (4.5 * (ux - uy) + 3.0)) - u2);
    *(dstGrid___0 + (-2010 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (10 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (- ux - uy) * (4.5 * (- ux - uy) + 3.0)) - u2);
    *(dstGrid___0 + (202011 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (11 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (uy + uz) * (4.5 * (uy + uz) + 3.0)) - u2);
    *(dstGrid___0 + (-197988 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (12 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (uy - uz) * (4.5 * (uy - uz) + 3.0)) - u2);
    *(dstGrid___0 + (198013 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (13 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (- uy + uz) * (4.5 * (- uy + uz) + 3.0)) - u2);
    *(dstGrid___0 + (-201986 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (14 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (- uy - uz) * (4.5 * (- uy - uz) + 3.0)) - u2);
    *(dstGrid___0 + (200035 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (15 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (ux + uz) * (4.5 * (ux + uz) + 3.0)) - u2);
    *(dstGrid___0 + (-199964 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (16 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (ux - uz) * (4.5 * (ux - uz) + 3.0)) - u2);
    *(dstGrid___0 + (199997 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (17 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (- ux + uz) * (4.5 * (- ux + uz) + 3.0)) - u2);
    *(dstGrid___0 + (-200002 + i)) = (1.0 - 1.95) * *(srcGrid___0 + (18 + i)) + (((1.0 / 36.0) * 1.95) * rho) * ((1.0 + (- ux - uz) * (4.5 * (- ux - uz) + 3.0)) - u2);
    __Cont: /* CIL Label */ 
    i += 20;
  }
  return;
}
}
void LBM_handleInOutFlow(double *srcGrid___0 ) 
{ 
  double ux ;
  double uy ;
  double uz ;
  double rho ;
  double ux1 ;
  double uy1 ;
  double uz1 ;
  double rho1 ;
  double ux2 ;
  double uy2 ;
  double uz2 ;
  double rho2 ;
  double u2 ;
  double px ;
  double py ;
  int i ;

  {
  i = 0;
  while (i < 200000) {
    rho1 = (((((((((((((((((*(srcGrid___0 + (200000 + i)) + *(srcGrid___0 + (200001 + i))) + *(srcGrid___0 + (200002 + i))) + *(srcGrid___0 + (200003 + i))) + *(srcGrid___0 + (200004 + i))) + *(srcGrid___0 + (200005 + i))) + *(srcGrid___0 + (200006 + i))) + *(srcGrid___0 + (200007 + i))) + *(srcGrid___0 + (200008 + i))) + *(srcGrid___0 + (200009 + i))) + *(srcGrid___0 + (200010 + i))) + *(srcGrid___0 + (200011 + i))) + *(srcGrid___0 + (200012 + i))) + *(srcGrid___0 + (200013 + i))) + *(srcGrid___0 + (200014 + i))) + *(srcGrid___0 + (200015 + i))) + *(srcGrid___0 + (200016 + i))) + *(srcGrid___0 + (200017 + i))) + *(srcGrid___0 + (200018 + i));
    rho2 = (((((((((((((((((*(srcGrid___0 + (400000 + i)) + *(srcGrid___0 + (400001 + i))) + *(srcGrid___0 + (400002 + i))) + *(srcGrid___0 + (400003 + i))) + *(srcGrid___0 + (400004 + i))) + *(srcGrid___0 + (400005 + i))) + *(srcGrid___0 + (400006 + i))) + *(srcGrid___0 + (400007 + i))) + *(srcGrid___0 + (400008 + i))) + *(srcGrid___0 + (400009 + i))) + *(srcGrid___0 + (400010 + i))) + *(srcGrid___0 + (400011 + i))) + *(srcGrid___0 + (400012 + i))) + *(srcGrid___0 + (400013 + i))) + *(srcGrid___0 + (400014 + i))) + *(srcGrid___0 + (400015 + i))) + *(srcGrid___0 + (400016 + i))) + *(srcGrid___0 + (400017 + i))) + *(srcGrid___0 + (400018 + i));
    rho = 2.0 * rho1 - rho2;
    px = (double )((i / 20) % 100) / (0.5 * (double )99) - 1.0;
    py = (double )(((i / 20) / 100) % 100) / (0.5 * (double )99) - 1.0;
    ux = 0.00;
    uy = 0.00;
    uz = (0.01 * (1.0 - px * px)) * (1.0 - py * py);
    u2 = 1.5 * ((ux * ux + uy * uy) + uz * uz);
    *(srcGrid___0 + i) = ((1.0 / 3.0) * rho) * (1.0 - u2);
    *(srcGrid___0 + (1 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + uy * (4.5 * uy + 3.0)) - u2);
    *(srcGrid___0 + (2 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + uy * (4.5 * uy - 3.0)) - u2);
    *(srcGrid___0 + (3 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + ux * (4.5 * ux + 3.0)) - u2);
    *(srcGrid___0 + (4 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + ux * (4.5 * ux - 3.0)) - u2);
    *(srcGrid___0 + (5 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + uz * (4.5 * uz + 3.0)) - u2);
    *(srcGrid___0 + (6 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + uz * (4.5 * uz - 3.0)) - u2);
    *(srcGrid___0 + (7 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (ux + uy) * (4.5 * (ux + uy) + 3.0)) - u2);
    *(srcGrid___0 + (8 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- ux + uy) * (4.5 * (- ux + uy) + 3.0)) - u2);
    *(srcGrid___0 + (9 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (ux - uy) * (4.5 * (ux - uy) + 3.0)) - u2);
    *(srcGrid___0 + (10 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- ux - uy) * (4.5 * (- ux - uy) + 3.0)) - u2);
    *(srcGrid___0 + (11 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (uy + uz) * (4.5 * (uy + uz) + 3.0)) - u2);
    *(srcGrid___0 + (12 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (uy - uz) * (4.5 * (uy - uz) + 3.0)) - u2);
    *(srcGrid___0 + (13 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- uy + uz) * (4.5 * (- uy + uz) + 3.0)) - u2);
    *(srcGrid___0 + (14 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- uy - uz) * (4.5 * (- uy - uz) + 3.0)) - u2);
    *(srcGrid___0 + (15 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (ux + uz) * (4.5 * (ux + uz) + 3.0)) - u2);
    *(srcGrid___0 + (16 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (ux - uz) * (4.5 * (ux - uz) + 3.0)) - u2);
    *(srcGrid___0 + (17 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- ux + uz) * (4.5 * (- ux + uz) + 3.0)) - u2);
    *(srcGrid___0 + (18 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- ux - uz) * (4.5 * (- ux - uz) + 3.0)) - u2);
    i += 20;
  }
  i = 25800000;
  while (i < 26000000) {
    rho1 = (((((((((((((((((*(srcGrid___0 + (-200000 + i)) + *(srcGrid___0 + (-199999 + i))) + *(srcGrid___0 + (-199998 + i))) + *(srcGrid___0 + (-199997 + i))) + *(srcGrid___0 + (-199996 + i))) + *(srcGrid___0 + (-199995 + i))) + *(srcGrid___0 + (-199994 + i))) + *(srcGrid___0 + (-199993 + i))) + *(srcGrid___0 + (-199992 + i))) + *(srcGrid___0 + (-199991 + i))) + *(srcGrid___0 + (-199990 + i))) + *(srcGrid___0 + (-199989 + i))) + *(srcGrid___0 + (-199988 + i))) + *(srcGrid___0 + (-199987 + i))) + *(srcGrid___0 + (-199986 + i))) + *(srcGrid___0 + (-199985 + i))) + *(srcGrid___0 + (-199984 + i))) + *(srcGrid___0 + (-199983 + i))) + *(srcGrid___0 + (-199982 + i));
    ux1 = ((((((((*(srcGrid___0 + (-199997 + i)) - *(srcGrid___0 + (-199996 + i))) + *(srcGrid___0 + (-199993 + i))) - *(srcGrid___0 + (-199992 + i))) + *(srcGrid___0 + (-199991 + i))) - *(srcGrid___0 + (-199990 + i))) + *(srcGrid___0 + (-199985 + i))) + *(srcGrid___0 + (-199984 + i))) - *(srcGrid___0 + (-199983 + i))) - *(srcGrid___0 + (-199982 + i));
    uy1 = ((((((((*(srcGrid___0 + (-199999 + i)) - *(srcGrid___0 + (-199998 + i))) + *(srcGrid___0 + (-199993 + i))) + *(srcGrid___0 + (-199992 + i))) - *(srcGrid___0 + (-199991 + i))) - *(srcGrid___0 + (-199990 + i))) + *(srcGrid___0 + (-199989 + i))) + *(srcGrid___0 + (-199988 + i))) - *(srcGrid___0 + (-199987 + i))) - *(srcGrid___0 + (-199986 + i));
    uz1 = ((((((((*(srcGrid___0 + (-199995 + i)) - *(srcGrid___0 + (-199994 + i))) + *(srcGrid___0 + (-199989 + i))) - *(srcGrid___0 + (-199988 + i))) + *(srcGrid___0 + (-199987 + i))) - *(srcGrid___0 + (-199986 + i))) + *(srcGrid___0 + (-199985 + i))) - *(srcGrid___0 + (-199984 + i))) + *(srcGrid___0 + (-199983 + i))) - *(srcGrid___0 + (-199982 + i));
    ux1 /= rho1;
    uy1 /= rho1;
    uz1 /= rho1;
    rho2 = (((((((((((((((((*(srcGrid___0 + (-400000 + i)) + *(srcGrid___0 + (-399999 + i))) + *(srcGrid___0 + (-399998 + i))) + *(srcGrid___0 + (-399997 + i))) + *(srcGrid___0 + (-399996 + i))) + *(srcGrid___0 + (-399995 + i))) + *(srcGrid___0 + (-399994 + i))) + *(srcGrid___0 + (-399993 + i))) + *(srcGrid___0 + (-399992 + i))) + *(srcGrid___0 + (-399991 + i))) + *(srcGrid___0 + (-399990 + i))) + *(srcGrid___0 + (-399989 + i))) + *(srcGrid___0 + (-399988 + i))) + *(srcGrid___0 + (-399987 + i))) + *(srcGrid___0 + (-399986 + i))) + *(srcGrid___0 + (-399985 + i))) + *(srcGrid___0 + (-399984 + i))) + *(srcGrid___0 + (-399983 + i))) + *(srcGrid___0 + (-399982 + i));
    ux2 = ((((((((*(srcGrid___0 + (-399997 + i)) - *(srcGrid___0 + (-399996 + i))) + *(srcGrid___0 + (-399993 + i))) - *(srcGrid___0 + (-399992 + i))) + *(srcGrid___0 + (-399991 + i))) - *(srcGrid___0 + (-399990 + i))) + *(srcGrid___0 + (-399985 + i))) + *(srcGrid___0 + (-399984 + i))) - *(srcGrid___0 + (-399983 + i))) - *(srcGrid___0 + (-399982 + i));
    uy2 = ((((((((*(srcGrid___0 + (-399999 + i)) - *(srcGrid___0 + (-399998 + i))) + *(srcGrid___0 + (-399993 + i))) + *(srcGrid___0 + (-399992 + i))) - *(srcGrid___0 + (-399991 + i))) - *(srcGrid___0 + (-399990 + i))) + *(srcGrid___0 + (-399989 + i))) + *(srcGrid___0 + (-399988 + i))) - *(srcGrid___0 + (-399987 + i))) - *(srcGrid___0 + (-399986 + i));
    uz2 = ((((((((*(srcGrid___0 + (-399995 + i)) - *(srcGrid___0 + (-399994 + i))) + *(srcGrid___0 + (-399989 + i))) - *(srcGrid___0 + (-399988 + i))) + *(srcGrid___0 + (-399987 + i))) - *(srcGrid___0 + (-399986 + i))) + *(srcGrid___0 + (-399985 + i))) - *(srcGrid___0 + (-399984 + i))) + *(srcGrid___0 + (-399983 + i))) - *(srcGrid___0 + (-399982 + i));
    ux2 /= rho2;
    uy2 /= rho2;
    uz2 /= rho2;
    rho = 1.0;
    ux = (double )2 * ux1 - ux2;
    uy = (double )2 * uy1 - uy2;
    uz = (double )2 * uz1 - uz2;
    u2 = 1.5 * ((ux * ux + uy * uy) + uz * uz);
    *(srcGrid___0 + i) = ((1.0 / 3.0) * rho) * (1.0 - u2);
    *(srcGrid___0 + (1 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + uy * (4.5 * uy + 3.0)) - u2);
    *(srcGrid___0 + (2 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + uy * (4.5 * uy - 3.0)) - u2);
    *(srcGrid___0 + (3 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + ux * (4.5 * ux + 3.0)) - u2);
    *(srcGrid___0 + (4 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + ux * (4.5 * ux - 3.0)) - u2);
    *(srcGrid___0 + (5 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + uz * (4.5 * uz + 3.0)) - u2);
    *(srcGrid___0 + (6 + i)) = ((1.0 / 18.0) * rho) * ((1.0 + uz * (4.5 * uz - 3.0)) - u2);
    *(srcGrid___0 + (7 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (ux + uy) * (4.5 * (ux + uy) + 3.0)) - u2);
    *(srcGrid___0 + (8 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- ux + uy) * (4.5 * (- ux + uy) + 3.0)) - u2);
    *(srcGrid___0 + (9 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (ux - uy) * (4.5 * (ux - uy) + 3.0)) - u2);
    *(srcGrid___0 + (10 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- ux - uy) * (4.5 * (- ux - uy) + 3.0)) - u2);
    *(srcGrid___0 + (11 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (uy + uz) * (4.5 * (uy + uz) + 3.0)) - u2);
    *(srcGrid___0 + (12 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (uy - uz) * (4.5 * (uy - uz) + 3.0)) - u2);
    *(srcGrid___0 + (13 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- uy + uz) * (4.5 * (- uy + uz) + 3.0)) - u2);
    *(srcGrid___0 + (14 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- uy - uz) * (4.5 * (- uy - uz) + 3.0)) - u2);
    *(srcGrid___0 + (15 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (ux + uz) * (4.5 * (ux + uz) + 3.0)) - u2);
    *(srcGrid___0 + (16 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (ux - uz) * (4.5 * (ux - uz) + 3.0)) - u2);
    *(srcGrid___0 + (17 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- ux + uz) * (4.5 * (- ux + uz) + 3.0)) - u2);
    *(srcGrid___0 + (18 + i)) = ((1.0 / 36.0) * rho) * ((1.0 + (- ux - uz) * (4.5 * (- ux - uz) + 3.0)) - u2);
    i += 20;
  }
  return;
}
}
void LBM_showGridStatistics(double *grid ) 
{ 
  int nObstacleCells ;
  int nAccelCells ;
  int nFluidCells ;
  double ux ;
  double uy ;
  double uz ;
  double minU2 ;
  double maxU2 ;
  double u2 ;
  double minRho ;
  double maxRho ;
  double rho ;
  double mass ;
  int i ;
  double tmp ;
  double tmp___0 ;

  {
  nObstacleCells = 0;
  nAccelCells = 0;
  nFluidCells = 0;
  minU2 = 1e+30;
  maxU2 = - 1e+30;
  minRho = 1e+30;
  maxRho = - 1e+30;
  mass = (double )0;
  i = 0;
  while (i < 26000000) {
    rho = (((((((((((((((((*(grid + i) + *(grid + (1 + i))) + *(grid + (2 + i))) + *(grid + (3 + i))) + *(grid + (4 + i))) + *(grid + (5 + i))) + *(grid + (6 + i))) + *(grid + (7 + i))) + *(grid + (8 + i))) + *(grid + (9 + i))) + *(grid + (10 + i))) + *(grid + (11 + i))) + *(grid + (12 + i))) + *(grid + (13 + i))) + *(grid + (14 + i))) + *(grid + (15 + i))) + *(grid + (16 + i))) + *(grid + (17 + i))) + *(grid + (18 + i));
    if (rho < minRho) {
      minRho = rho;
    }
    if (rho > maxRho) {
      maxRho = rho;
    }
    mass += rho;
    if (*((unsigned int *)((void *)(grid + (19 + i)))) & 1U) {
      nObstacleCells ++;
    } else {
      if (*((unsigned int *)((void *)(grid + (19 + i)))) & 2U) {
        nAccelCells ++;
      } else {
        nFluidCells ++;
      }
      ux = ((((((((*(grid + (3 + i)) - *(grid + (4 + i))) + *(grid + (7 + i))) - *(grid + (8 + i))) + *(grid + (9 + i))) - *(grid + (10 + i))) + *(grid + (15 + i))) + *(grid + (16 + i))) - *(grid + (17 + i))) - *(grid + (18 + i));
      uy = ((((((((*(grid + (1 + i)) - *(grid + (2 + i))) + *(grid + (7 + i))) + *(grid + (8 + i))) - *(grid + (9 + i))) - *(grid + (10 + i))) + *(grid + (11 + i))) + *(grid + (12 + i))) - *(grid + (13 + i))) - *(grid + (14 + i));
      uz = ((((((((*(grid + (5 + i)) - *(grid + (6 + i))) + *(grid + (11 + i))) - *(grid + (12 + i))) + *(grid + (13 + i))) - *(grid + (14 + i))) + *(grid + (15 + i))) - *(grid + (16 + i))) + *(grid + (17 + i))) - *(grid + (18 + i));
      u2 = ((ux * ux + uy * uy) + uz * uz) / (rho * rho);
      if (u2 < minU2) {
        minU2 = u2;
      }
      if (u2 > maxU2) {
        maxU2 = u2;
      }
    }
    i += 20;
  }
  tmp = sqrt(maxU2);
  tmp___0 = sqrt(minU2);
  printf("LBM_showGridStatistics:\n\tnObstacleCells: %7i nAccelCells: %7i nFluidCells: %7i\n\tminRho: %8.4f maxRho: %8.4f mass: %e\n\tminU: %e maxU: %e\n\n",
         nObstacleCells, nAccelCells, nFluidCells, minRho, maxRho, mass, tmp___0,
         tmp);
  return;
}
}
static void storeValue(FILE *file , float *v ) 
{ 
  int litteBigEndianTest ;
  char const   *vPtr ;
  char buffer[sizeof(float )] ;
  int i ;

  {
  litteBigEndianTest = 1;
  if ((int )*((unsigned char *)(& litteBigEndianTest)) == 0) {
    vPtr = (char const   *)((char *)v);
    i = 0;
    while ((unsigned long )i < sizeof(float )) {
      buffer[i] = (char )*(vPtr + ((sizeof(float ) - (unsigned long )i) - 1UL));
      i ++;
    }
    fwrite((void const   *)(buffer), sizeof(float ), (size_t )1, file);
  } else {
    fwrite((void const   *)v, sizeof(float ), (size_t )1, file);
  }
  return;
}
}
static void loadValue(FILE *file , float *v ) 
{ 
  int litteBigEndianTest ;
  char *vPtr ;
  char buffer[sizeof(float )] ;
  int i ;

  {
  litteBigEndianTest = 1;
  if ((int )*((unsigned char *)(& litteBigEndianTest)) == 0) {
    vPtr = (char *)v;
    fread((void *)(buffer), sizeof(float ), (size_t )1, file);
    i = 0;
    while ((unsigned long )i < sizeof(float )) {
      *(vPtr + i) = buffer[(sizeof(float ) - (unsigned long )i) - 1UL];
      i ++;
    }
  } else {
    fread((void *)v, sizeof(float ), (size_t )1, file);
  }
  return;
}
}
void LBM_storeVelocityField(double *grid , char const   *filename , int const   binary ) 
{ 
  int x ;
  int y ;
  int z ;
  float rho ;
  float ux ;
  float uy ;
  float uz ;
  FILE *file ;
  char const   *tmp ;
  FILE *tmp___0 ;

  {
  if (binary) {
    tmp = "wb";
  } else {
    tmp = "w";
  }
  tmp___0 = fopen(filename, tmp);
  file = tmp___0;
  z = 0;
  while (z < 130) {
    y = 0;
    while (y < 100) {
      x = 0;
      while (x < 100) {
        rho = (float )((((((((((((((((((*(grid + 20 * ((x + y * 100) + (z * 100) * 100)) + *(grid + (1 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (2 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (3 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (4 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (5 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (6 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (7 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (8 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (9 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (10 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (11 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (12 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (13 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (14 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (15 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (16 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (17 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (18 + 20 * ((x + y * 100) + (z * 100) * 100))));
        ux = (float )(((((((((*(grid + (3 + 20 * ((x + y * 100) + (z * 100) * 100))) - *(grid + (4 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (7 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (8 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (9 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (10 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (15 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (16 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (17 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (18 + 20 * ((x + y * 100) + (z * 100) * 100))));
        uy = (float )(((((((((*(grid + (1 + 20 * ((x + y * 100) + (z * 100) * 100))) - *(grid + (2 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (7 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (8 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (9 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (10 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (11 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (12 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (13 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (14 + 20 * ((x + y * 100) + (z * 100) * 100))));
        uz = (float )(((((((((*(grid + (5 + 20 * ((x + y * 100) + (z * 100) * 100))) - *(grid + (6 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (11 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (12 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (13 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (14 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (15 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (16 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (17 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (18 + 20 * ((x + y * 100) + (z * 100) * 100))));
        ux /= rho;
        uy /= rho;
        uz /= rho;
        if (binary) {
          storeValue(file, & ux);
          storeValue(file, & uy);
          storeValue(file, & uz);
        } else {
          fprintf(file, "%e %e %e\n", (double )ux, (double )uy, (double )uz);
        }
        x ++;
      }
      y ++;
    }
    z ++;
  }
  fclose(file);
  return;
}
}
void LBM_compareVelocityField(double *grid , char const   *filename , int const   binary ) 
{ 
  int x ;
  int y ;
  int z ;
  double rho ;
  double ux ;
  double uy ;
  double uz ;
  float fileUx ;
  float fileUy ;
  float fileUz ;
  float dUx ;
  float dUy ;
  float dUz ;
  float diff2 ;
  float maxDiff2 ;
  FILE *file ;
  char const   *tmp ;
  FILE *tmp___0 ;
  double tmp___1 ;

  {
  maxDiff2 = (float )(- 1e+30);
  if (binary) {
    tmp = "rb";
  } else {
    tmp = "r";
  }
  tmp___0 = fopen(filename, tmp);
  file = tmp___0;
  z = 0;
  while (z < 130) {
    y = 0;
    while (y < 100) {
      x = 0;
      while (x < 100) {
        rho = (((((((((((((((((*(grid + 20 * ((x + y * 100) + (z * 100) * 100)) + *(grid + (1 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (2 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (3 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (4 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (5 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (6 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (7 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (8 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (9 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (10 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (11 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (12 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (13 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (14 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (15 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (16 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (17 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (18 + 20 * ((x + y * 100) + (z * 100) * 100)));
        ux = ((((((((*(grid + (3 + 20 * ((x + y * 100) + (z * 100) * 100))) - *(grid + (4 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (7 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (8 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (9 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (10 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (15 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (16 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (17 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (18 + 20 * ((x + y * 100) + (z * 100) * 100)));
        uy = ((((((((*(grid + (1 + 20 * ((x + y * 100) + (z * 100) * 100))) - *(grid + (2 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (7 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (8 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (9 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (10 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (11 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (12 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (13 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (14 + 20 * ((x + y * 100) + (z * 100) * 100)));
        uz = ((((((((*(grid + (5 + 20 * ((x + y * 100) + (z * 100) * 100))) - *(grid + (6 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (11 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (12 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (13 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (14 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (15 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (16 + 20 * ((x + y * 100) + (z * 100) * 100)))) + *(grid + (17 + 20 * ((x + y * 100) + (z * 100) * 100)))) - *(grid + (18 + 20 * ((x + y * 100) + (z * 100) * 100)));
        ux /= rho;
        uy /= rho;
        uz /= rho;
        if (binary) {
          loadValue(file, & fileUx);
          loadValue(file, & fileUy);
          loadValue(file, & fileUz);
        } else
        if (sizeof(float ) == sizeof(double )) {
          fscanf(file, "%lf %lf %lf\n", & fileUx, & fileUy, & fileUz);
        } else {
          fscanf(file, "%f %f %f\n", & fileUx, & fileUy, & fileUz);
        }
        dUx = (float )(ux - (double )fileUx);
        dUy = (float )(uy - (double )fileUy);
        dUz = (float )(uz - (double )fileUz);
        diff2 = (dUx * dUx + dUy * dUy) + dUz * dUz;
        if (diff2 > maxDiff2) {
          maxDiff2 = diff2;
        }
        x ++;
      }
      y ++;
    }
    z ++;
  }
  tmp___1 = sqrt((double )maxDiff2);
  printf("LBM_compareVelocityField: maxDiff = %e  \n\n", tmp___1);
  fclose(file);
  return;
}
}
#pragma merger("0","/var/folders/t8/sjj4fszn7kn63wvbnwnnpcf40000gn/T/cil-uUQx_S8M.i","-O3")
void MAIN_parseCommandLine(int nArgs , char **arg , MAIN_Param *param ) ;
void MAIN_printInfo(MAIN_Param const   *param ) ;
void MAIN_initialize(MAIN_Param const   *param ) ;
void MAIN_finalize(MAIN_Param const   *param ) ;
extern int atoi(char const   * ) ;
extern int stat(char const   * , struct stat * )  __asm__("_stat$INODE64")  ;
static LBM_GridPtr srcGrid  ;
static LBM_GridPtr dstGrid  ;
int main(int nArgs , char **arg ) 
{ 
  MAIN_Param param ;
  int t ;

  {
  MAIN_parseCommandLine(nArgs, arg, & param);
  MAIN_printInfo((MAIN_Param const   *)(& param));
  MAIN_initialize((MAIN_Param const   *)(& param));
  t = 1;
  while (t <= param.nTimeSteps) {
    if ((unsigned int )param.simType == 1U) {
      LBM_handleInOutFlow((double *)(*srcGrid));
    }
    LBM_performStreamCollide((double *)(*srcGrid), (double *)(*dstGrid));
    LBM_swapGrids(& srcGrid, & dstGrid);
    if ((t & 63) == 0) {
      printf("timestep: %i\n", t);
      LBM_showGridStatistics((double *)(*srcGrid));
    }
    t ++;
  }
  MAIN_finalize((MAIN_Param const   *)(& param));
  return (0);
}
}
void MAIN_parseCommandLine(int nArgs , char **arg , MAIN_Param *param ) 
{ 
  struct stat fileStat ;
  int tmp ;
  int tmp___0 ;
  int tmp___1 ;
  int tmp___2 ;

  {
  if (nArgs < 5) {
    printf("syntax: lbm <time steps> <result file> <0: nil, 1: cmp, 2: str> <0: ldc, 1: channel flow> [<obstacle file>]\n");
    exit(1);
  } else
  if (nArgs > 6) {
    printf("syntax: lbm <time steps> <result file> <0: nil, 1: cmp, 2: str> <0: ldc, 1: channel flow> [<obstacle file>]\n");
    exit(1);
  }
  param->nTimeSteps = atoi((char const   *)*(arg + 1));
  param->resultFilename = *(arg + 2);
  tmp = atoi((char const   *)*(arg + 3));
  param->action = (MAIN_Action )tmp;
  tmp___0 = atoi((char const   *)*(arg + 4));
  param->simType = (MAIN_SimType )tmp___0;
  if (nArgs == 6) {
    param->obstacleFilename = *(arg + 5);
    tmp___1 = stat((char const   *)param->obstacleFilename, & fileStat);
    if (tmp___1 != 0) {
      printf("MAIN_parseCommandLine: cannot stat obstacle file \'%s\'\n", param->obstacleFilename);
      exit(1);
    }
    if (fileStat.st_size != 1313130LL) {
      printf("MAIN_parseCommandLine:\n\tsize of file \'%s\' is %i bytes\n\texpected size is %i bytes\n",
             param->obstacleFilename, (int )fileStat.st_size, 1313130);
      exit(1);
    }
  } else {
    param->obstacleFilename = (char *)((void *)0);
  }
  if ((unsigned int )param->action == 1U) {
    tmp___2 = stat((char const   *)param->resultFilename, & fileStat);
    if (tmp___2 != 0) {
      printf("MAIN_parseCommandLine: cannot stat result file \'%s\'\n", param->resultFilename);
      exit(1);
    }
  }
  return;
}
}
void MAIN_printInfo(MAIN_Param const   *param ) 
{ 
  char actionString[3][32] ;
  unsigned int tmp ;
  unsigned int tmp___0 ;
  unsigned int tmp___1 ;
  char simTypeString[3][32] ;
  unsigned int tmp___2 ;
  unsigned int tmp___3 ;
  unsigned int tmp___4 ;
  char const   *tmp___5 ;

  {
  actionString[0][0] = (char )'n';
  actionString[0][1] = (char )'o';
  actionString[0][2] = (char )'t';
  actionString[0][3] = (char )'h';
  actionString[0][4] = (char )'i';
  actionString[0][5] = (char )'n';
  actionString[0][6] = (char )'g';
  actionString[0][7] = (char )'\000';
  tmp = 8U;
  while (! (tmp >= 32U)) {
    actionString[0][tmp] = (char)0;
    tmp ++;
  }
  actionString[1][0] = (char )'c';
  actionString[1][1] = (char )'o';
  actionString[1][2] = (char )'m';
  actionString[1][3] = (char )'p';
  actionString[1][4] = (char )'a';
  actionString[1][5] = (char )'r';
  actionString[1][6] = (char )'e';
  actionString[1][7] = (char )'\000';
  tmp___0 = 8U;
  while (! (tmp___0 >= 32U)) {
    actionString[1][tmp___0] = (char)0;
    tmp___0 ++;
  }
  actionString[2][0] = (char )'s';
  actionString[2][1] = (char )'t';
  actionString[2][2] = (char )'o';
  actionString[2][3] = (char )'r';
  actionString[2][4] = (char )'e';
  actionString[2][5] = (char )'\000';
  tmp___1 = 6U;
  while (! (tmp___1 >= 32U)) {
    actionString[2][tmp___1] = (char)0;
    tmp___1 ++;
  }
  simTypeString[0][0] = (char )'l';
  simTypeString[0][1] = (char )'i';
  simTypeString[0][2] = (char )'d';
  simTypeString[0][3] = (char )'-';
  simTypeString[0][4] = (char )'d';
  simTypeString[0][5] = (char )'r';
  simTypeString[0][6] = (char )'i';
  simTypeString[0][7] = (char )'v';
  simTypeString[0][8] = (char )'e';
  simTypeString[0][9] = (char )'n';
  simTypeString[0][10] = (char )' ';
  simTypeString[0][11] = (char )'c';
  simTypeString[0][12] = (char )'a';
  simTypeString[0][13] = (char )'v';
  simTypeString[0][14] = (char )'i';
  simTypeString[0][15] = (char )'t';
  simTypeString[0][16] = (char )'y';
  simTypeString[0][17] = (char )'\000';
  tmp___2 = 18U;
  while (! (tmp___2 >= 32U)) {
    simTypeString[0][tmp___2] = (char)0;
    tmp___2 ++;
  }
  simTypeString[1][0] = (char )'c';
  simTypeString[1][1] = (char )'h';
  simTypeString[1][2] = (char )'a';
  simTypeString[1][3] = (char )'n';
  simTypeString[1][4] = (char )'n';
  simTypeString[1][5] = (char )'e';
  simTypeString[1][6] = (char )'l';
  simTypeString[1][7] = (char )' ';
  simTypeString[1][8] = (char )'f';
  simTypeString[1][9] = (char )'l';
  simTypeString[1][10] = (char )'o';
  simTypeString[1][11] = (char )'w';
  simTypeString[1][12] = (char )'\000';
  tmp___3 = 13U;
  while (! (tmp___3 >= 32U)) {
    simTypeString[1][tmp___3] = (char)0;
    tmp___3 ++;
  }
  tmp___4 = 2U;
  while (! (tmp___4 >= 3U)) {
    simTypeString[tmp___4][0] = (char)0;
    simTypeString[tmp___4][1] = (char)0;
    simTypeString[tmp___4][2] = (char)0;
    simTypeString[tmp___4][3] = (char)0;
    simTypeString[tmp___4][4] = (char)0;
    simTypeString[tmp___4][5] = (char)0;
    simTypeString[tmp___4][6] = (char)0;
    simTypeString[tmp___4][7] = (char)0;
    simTypeString[tmp___4][8] = (char)0;
    simTypeString[tmp___4][9] = (char)0;
    simTypeString[tmp___4][10] = (char)0;
    simTypeString[tmp___4][11] = (char)0;
    simTypeString[tmp___4][12] = (char)0;
    simTypeString[tmp___4][13] = (char)0;
    simTypeString[tmp___4][14] = (char)0;
    simTypeString[tmp___4][15] = (char)0;
    simTypeString[tmp___4][16] = (char)0;
    simTypeString[tmp___4][17] = (char)0;
    simTypeString[tmp___4][18] = (char)0;
    simTypeString[tmp___4][19] = (char)0;
    simTypeString[tmp___4][20] = (char)0;
    simTypeString[tmp___4][21] = (char)0;
    simTypeString[tmp___4][22] = (char)0;
    simTypeString[tmp___4][23] = (char)0;
    simTypeString[tmp___4][24] = (char)0;
    simTypeString[tmp___4][25] = (char)0;
    simTypeString[tmp___4][26] = (char)0;
    simTypeString[tmp___4][27] = (char)0;
    simTypeString[tmp___4][28] = (char)0;
    simTypeString[tmp___4][29] = (char)0;
    simTypeString[tmp___4][30] = (char)0;
    simTypeString[tmp___4][31] = (char)0;
    tmp___4 ++;
  }
  if ((unsigned long )param->obstacleFilename == (unsigned long )((void *)0)) {
    tmp___5 = (char const   * const  )"<none>";
  } else {
    tmp___5 = (char const   * const  )param->obstacleFilename;
  }
  printf("MAIN_printInfo:\n\tgrid size      : %i x %i x %i = %.2f * 10^6 Cells\n\tnTimeSteps     : %i\n\tresult file    : %s\n\taction         : %s\n\tsimulation type: %s\n\tobstacle file  : %s\n\n",
         100, 100, 130, ((1e-6 * (double )100) * (double )100) * (double )130, param->nTimeSteps,
         param->resultFilename, actionString[param->action], simTypeString[param->simType],
         tmp___5);
  return;
}
}
void MAIN_initialize(MAIN_Param const   *param ) 
{ 


  {
  LBM_allocateGrid((double **)(& srcGrid));
  LBM_allocateGrid((double **)(& dstGrid));
  LBM_initializeGrid((double *)(*srcGrid));
  LBM_initializeGrid((double *)(*dstGrid));
  if ((unsigned long )param->obstacleFilename != (unsigned long )((void *)0)) {
    LBM_loadObstacleFile((double *)(*srcGrid), (char const   *)param->obstacleFilename);
    LBM_loadObstacleFile((double *)(*dstGrid), (char const   *)param->obstacleFilename);
  }
  if ((unsigned int const   )param->simType == 1U) {
    LBM_initializeSpecialCellsForChannel((double *)(*srcGrid));
    LBM_initializeSpecialCellsForChannel((double *)(*dstGrid));
  } else {
    LBM_initializeSpecialCellsForLDC((double *)(*srcGrid));
    LBM_initializeSpecialCellsForLDC((double *)(*dstGrid));
  }
  LBM_showGridStatistics((double *)(*srcGrid));
  return;
}
}
void MAIN_finalize(MAIN_Param const   *param ) 
{ 


  {
  LBM_showGridStatistics((double *)(*srcGrid));
  if ((unsigned int const   )param->action == 1U) {
    LBM_compareVelocityField((double *)(*srcGrid), (char const   *)param->resultFilename,
                             (int const   )-1);
  }
  if ((unsigned int const   )param->action == 2U) {
    LBM_storeVelocityField((double *)(*srcGrid), (char const   *)param->resultFilename,
                           (int const   )-1);
  }
  LBM_freeGrid((double **)(& srcGrid));
  LBM_freeGrid((double **)(& dstGrid));
  return;
}
}

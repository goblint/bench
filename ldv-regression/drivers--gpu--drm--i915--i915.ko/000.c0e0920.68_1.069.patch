18532,18533c18532,18533
< #line 2503
<     ret = i915_gem_evict_everything(dev);
---
> #line 2501
>     pinned = 0;
18535c18535
<     if (ret) {
---
>     ret = i915_gem_evict_everything(dev);
18536a18537,18538
>     if (ret) {
> #line 2506
18544,18545d18545
< #line 2509
<   batch_obj = *(object_list + (args->buffer_count - (uint32_t )1));
18547c18547
<   batch_obj->pending_read_domains = 8;
---
>   batch_obj = *(object_list + (args->buffer_count - (uint32_t )1));
18548a18549,18550
>   batch_obj->pending_read_domains = 8;
> #line 2512
18550,18551d18551
< #line 2519
<   dev->invalidate_domains = 0;
18552a18553,18554
>   dev->invalidate_domains = 0;
> #line 2521
18554c18556
< #line 2522
---
> #line 2523
18556c18558
< #line 2522
---
> #line 2523
18558c18560
< #line 2522
---
> #line 2523
18562c18564
< #line 2522
---
> #line 2523
18565c18567
< #line 2523
---
> #line 2524
18567c18569
< #line 2526
---
> #line 2527
18569c18571
< #line 2522
---
> #line 2523
18572c18574
< #line 2533
---
> #line 2534
18574c18576
< #line 2540
---
> #line 2541
18576,18577d18577
< #line 2543
<     if (dev->flush_domains) {
18578a18579,18580
>     if (dev->flush_domains) {
> #line 2545
18586c18588
< #line 2556
---
> #line 2557
18588,18589d18589
< #line 2566
<   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
18591c18591
<   if (ret) {
---
>   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
18593c18593
<     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
---
>   if (ret) {
18594a18595,18596
>     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
> #line 2570
18599c18601
< #line 2576
---
> #line 2577
18601,18602d18602
< #line 2587
<   seqno = i915_add_request(dev, flush_domains);
18603a18604,18605
>   seqno = i915_add_request(dev, flush_domains);
> #line 2589
18605c18607
< #line 2588
---
> #line 2589
18607c18609
< #line 2588
---
> #line 2589
18609c18611
< #line 2588
---
> #line 2589
18611c18613
< #line 2588
---
> #line 2589
18618,18619c18620,18621
<                              "i" (2588), "i" (sizeof(struct bug_entry )));
< #line 2588
---
>                              "i" (2589), "i" (sizeof(struct bug_entry )));
> #line 2589
18623c18625
< #line 2588
---
> #line 2589
18629c18631
< #line 2588
---
> #line 2589
18632,18633d18633
< #line 2589
<   i915_file_priv->mm.last_gem_seqno = seqno;
18634a18635,18636
>   i915_file_priv->mm.last_gem_seqno = seqno;
> #line 2591
18636c18638
< #line 2590
---
> #line 2591
18638c18640
< #line 2590
---
> #line 2591
18642c18644
< #line 2590
---
> #line 2591
18645c18647
< #line 2591
---
> #line 2592
18647c18649
< #line 2593
---
> #line 2594
18649c18651
< #line 2590
---
> #line 2591
18652c18654
< #line 2605
---
> #line 2606
18655c18657
< #line 2605
---
> #line 2606
18657,18658d18658
< #line 2609
<   if (ret) {
18659a18660,18661
>   if (ret) {
> #line 2611
18666,18667d18667
< #line 2614
<   if ((unsigned long )object_list != (unsigned long )((void *)0)) {
18668a18669,18670
>   if ((unsigned long )object_list != (unsigned long )((void *)0)) {
> #line 2616
18670c18672
< #line 2615
---
> #line 2616
18672c18674
< #line 2615
---
> #line 2616
18676c18678
< #line 2615
---
> #line 2616
18679c18681
< #line 2616
---
> #line 2617
18681c18683
< #line 2615
---
> #line 2616
18684c18686
< #line 2618
---
> #line 2619
18686c18688
< #line 2618
---
> #line 2619
18688c18690
< #line 2618
---
> #line 2619
18692c18694
< #line 2618
---
> #line 2619
18695c18697
< #line 2619
---
> #line 2620
18697c18699
< #line 2618
---
> #line 2619
18703c18705
< #line 2621
---
> #line 2622
18706c18708
< #line 2624
---
> #line 2625
18709c18711
< #line 2626
---
> #line 2627
18711c18713
< #line 2629
---
> #line 2630
18715c18717
< #line 2632 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2633 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
18724,18725d18725
< #line 2635
<   dev = obj->dev;
18726a18727,18728
>   dev = obj->dev;
> #line 2637
18728,18729d18729
< #line 2640
<   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((void *)0)) {
18731c18731
<     ret = i915_gem_object_bind_to_gtt(obj, alignment);
---
>   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((void *)0)) {
18733c18733
<     if (ret != 0) {
---
>     ret = i915_gem_object_bind_to_gtt(obj, alignment);
18735c18735
<       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
---
>     if (ret != 0) {
18736a18737,18738
>       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
> #line 2645
18744c18746
< #line 2647
---
> #line 2648
18746,18747d18747
< #line 2652
<   if (obj_priv->pin_count == 1) {
18749c18749
<     atomic_inc(& dev->pin_count);
---
>   if (obj_priv->pin_count == 1) {
18751c18751
<     atomic_add(obj->size, & dev->pin_memory);
---
>     atomic_inc(& dev->pin_count);
18752a18753,18754
>     atomic_add(obj->size, & dev->pin_memory);
> #line 2656
18754c18756
< #line 2655
---
> #line 2656
18756c18758
< #line 2655
---
> #line 2656
18760c18762
< #line 2659
---
> #line 2660
18769c18771
< #line 2663
---
> #line 2664
18773c18775
< #line 2666 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2667 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
18783,18784d18784
< #line 2669
<   dev = obj->dev;
18786c18786
<   dev_priv = dev->dev_private;
---
>   dev = obj->dev;
18787a18788,18789
>   dev_priv = dev->dev_private;
> #line 2672
18789,18790d18790
< #line 2674
<   obj_priv->pin_count = obj_priv->pin_count - 1;
18791a18792,18793
>   obj_priv->pin_count = obj_priv->pin_count - 1;
> #line 2676
18793c18795
< #line 2675
---
> #line 2676
18795c18797
< #line 2675
---
> #line 2676
18797c18799
< #line 2675
---
> #line 2676
18799c18801
< #line 2675
---
> #line 2676
18806,18807c18808,18809
<                              "i" (2675), "i" (sizeof(struct bug_entry )));
< #line 2675
---
>                              "i" (2676), "i" (sizeof(struct bug_entry )));
> #line 2676
18811c18813
< #line 2675
---
> #line 2676
18817c18819
< #line 2675
---
> #line 2676
18820c18822
< #line 2676
---
> #line 2677
18822c18824
< #line 2676
---
> #line 2677
18825c18827
< #line 2676
---
> #line 2677
18827c18829
< #line 2676
---
> #line 2677
18829c18831
< #line 2676
---
> #line 2677
18836,18837c18838,18839
<                              "i" (2676), "i" (sizeof(struct bug_entry )));
< #line 2676
---
>                              "i" (2677), "i" (sizeof(struct bug_entry )));
> #line 2677
18841c18843
< #line 2676
---
> #line 2677
18847c18849
< #line 2676
---
> #line 2677
18850,18851d18851
< #line 2682
<   if (obj_priv->pin_count == 0) {
18852a18853,18854
>   if (obj_priv->pin_count == 0) {
> #line 2684
18854c18856
< #line 2686
---
> #line 2687
18859,18860d18860
< #line 2688
<     atomic_dec(& dev->pin_count);
18861a18862,18863
>     atomic_dec(& dev->pin_count);
> #line 2690
18866c18868
< #line 2692
---
> #line 2693
18870c18872
< #line 2694 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2695 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
18879c18881
< #line 2698
---
> #line 2699
18881c18883
< #line 2703
---
> #line 2704
18883,18884d18884
< #line 2705
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
18886c18886
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
18887a18888,18889
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2708
18890,18891d18891
< #line 2709
<     mutex_unlock(& dev->struct_mutex);
18892a18893,18894
>     mutex_unlock(& dev->struct_mutex);
> #line 2711
18897c18899
< #line 2712
---
> #line 2713
18899,18900d18900
< #line 2714
<   if ((unsigned long )obj_priv->pin_filp != (unsigned long )((void *)0) && (unsigned long )obj_priv->pin_filp != (unsigned long )file_priv) {
18901a18902,18903
>   if ((unsigned long )obj_priv->pin_filp != (unsigned long )((void *)0) && (unsigned long )obj_priv->pin_filp != (unsigned long )file_priv) {
> #line 2716
18904,18905d18905
< #line 2717
<     mutex_unlock(& dev->struct_mutex);
18906a18907,18908
>     mutex_unlock(& dev->struct_mutex);
> #line 2719
18911,18912d18912
< #line 2721
<   obj_priv->user_pin_count = obj_priv->user_pin_count + (uint32_t )1;
18914c18914
<   obj_priv->pin_filp = file_priv;
---
>   obj_priv->user_pin_count = obj_priv->user_pin_count + (uint32_t )1;
18916c18916
<   if (obj_priv->user_pin_count == (uint32_t )1) {
---
>   obj_priv->pin_filp = file_priv;
18918c18918
<     ret = i915_gem_object_pin(obj, args->alignment);
---
>   if (obj_priv->user_pin_count == (uint32_t )1) {
18920c18920
<     if (ret != 0) {
---
>     ret = i915_gem_object_pin(obj, args->alignment);
18922c18922
<       drm_gem_object_unreference(obj);
---
>     if (ret != 0) {
18924c18924
<       mutex_unlock(& dev->struct_mutex);
---
>       drm_gem_object_unreference(obj);
18925a18926,18927
>       mutex_unlock(& dev->struct_mutex);
> #line 2729
18933,18934d18934
< #line 2735
<   i915_gem_object_flush_cpu_write_domain(obj);
18936c18936
<   args->offset = obj_priv->gtt_offset;
---
>   i915_gem_object_flush_cpu_write_domain(obj);
18938c18938
<   drm_gem_object_unreference(obj);
---
>   args->offset = obj_priv->gtt_offset;
18939a18940,18941
>   drm_gem_object_unreference(obj);
> #line 2739
18941c18943
< #line 2740
---
> #line 2741
18945c18947
< #line 2743 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2744 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
18953c18955
< #line 2747
---
> #line 2748
18955c18957
< #line 2751
---
> #line 2752
18957,18958d18958
< #line 2753
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
18960c18960
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
18961a18962,18963
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2756
18964,18965d18965
< #line 2757
<     mutex_unlock(& dev->struct_mutex);
18966a18967,18968
>     mutex_unlock(& dev->struct_mutex);
> #line 2759
18971,18972d18972
< #line 2761
<   obj_priv = obj->driver_private;
18974c18974
<   if ((unsigned long )obj_priv->pin_filp != (unsigned long )file_priv) {
---
>   obj_priv = obj->driver_private;
18975a18976,18977
>   if ((unsigned long )obj_priv->pin_filp != (unsigned long )file_priv) {
> #line 2764
18978,18979d18979
< #line 2765
<     drm_gem_object_unreference(obj);
18981c18981
<     mutex_unlock(& dev->struct_mutex);
---
>     drm_gem_object_unreference(obj);
18982a18983,18984
>     mutex_unlock(& dev->struct_mutex);
> #line 2768
18987,18988d18988
< #line 2769
<   obj_priv->user_pin_count = obj_priv->user_pin_count - (uint32_t )1;
18990c18990
<   if (obj_priv->user_pin_count == (uint32_t )0) {
---
>   obj_priv->user_pin_count = obj_priv->user_pin_count - (uint32_t )1;
18992c18992
<     obj_priv->pin_filp = (void *)0;
---
>   if (obj_priv->user_pin_count == (uint32_t )0) {
18993a18994,18995
>     obj_priv->pin_filp = (void *)0;
> #line 2773
18998,18999d18999
< #line 2775
<   drm_gem_object_unreference(obj);
19001c19001
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
19002a19003,19004
>   mutex_unlock(& dev->struct_mutex);
> #line 2778
19006c19008
< #line 2780 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2781 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19014c19016
< #line 2784
---
> #line 2785
19016,19017d19017
< #line 2788
<   mutex_lock_nested(& dev->struct_mutex, 0);
19019c19019
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
---
>   mutex_lock_nested(& dev->struct_mutex, 0);
19021c19021
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
19022a19023,19024
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2792
19025,19026d19026
< #line 2793
<     mutex_unlock(& dev->struct_mutex);
19027a19028,19029
>     mutex_unlock(& dev->struct_mutex);
> #line 2795
19032c19034
< #line 2797
---
> #line 2798
19034c19036
< #line 2805
---
> #line 2806
19036,19037d19037
< #line 2807
<   drm_gem_object_unreference(obj);
19039c19039
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
19040a19041,19042
>   mutex_unlock(& dev->struct_mutex);
> #line 2810
19044c19046
< #line 2812 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2813 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19050c19052
< #line 2816
---
> #line 2817
19052c19054
< #line 2816
---
> #line 2817
19056c19058
< #line 2819 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2820 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19063c19065
< #line 2823
---
> #line 2824
19065,19066d19066
< #line 2823
<   obj_priv = tmp;
19068c19068
<   if ((unsigned long )obj_priv == (unsigned long )((void *)0)) {
---
>   obj_priv = tmp;
19069a19070,19071
>   if ((unsigned long )obj_priv == (unsigned long )((void *)0)) {
> #line 2826
19074,19075d19075
< #line 2833
<   obj->write_domain = 1;
19076a19077,19078
>   obj->write_domain = 1;
> #line 2835
19078c19080
< #line 2836
---
> #line 2837
19080,19081d19081
< #line 2838
<   obj->driver_private = obj_priv;
19083c19083
<   obj_priv->obj = obj;
---
>   obj->driver_private = obj_priv;
19085c19085
<   obj_priv->fence_reg = -1;
---
>   obj_priv->obj = obj;
19086a19087,19088
>   obj_priv->fence_reg = -1;
> #line 2842
19088c19090
< #line 2843
---
> #line 2844
19092c19094
< #line 2846 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2847 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19102,19103d19103
< #line 2848
<   dev = obj->dev;
19104a19105,19106
>   dev = obj->dev;
> #line 2850
19106c19108
< #line 2852
---
> #line 2853
19108c19110
< #line 2854
---
> #line 2855
19110c19112
< #line 2854
---
> #line 2855
19114c19116
< #line 2854
---
> #line 2855
19117c19119
< #line 2855
---
> #line 2856
19120c19122
< #line 2857
---
> #line 2858
19122,19123d19123
< #line 2859
<   list = & obj->map_list;
19124a19125,19126
>   list = & obj->map_list;
> #line 2861
19126,19127d19127
< #line 2862
<   if (list->file_offset_node) {
19129c19129
<     drm_mm_put_block(list->file_offset_node);
---
>   if (list->file_offset_node) {
19130a19131,19132
>     drm_mm_put_block(list->file_offset_node);
> #line 2865
19135,19136d19136
< #line 2867
<   map = list->map;
19138c19138
<   if (map) {
---
>   map = list->map;
19140c19140
<     drm_free(map, sizeof(*map), 2);
---
>   if (map) {
19141a19142,19143
>     drm_free(map, sizeof(*map), 2);
> #line 2871
19146,19147d19147
< #line 2873
<   drm_free(obj_priv->page_cpu_valid, 1, 2);
19149c19149
<   drm_free(obj->driver_private, 1, 2);
---
>   drm_free(obj_priv->page_cpu_valid, 1, 2);
19150a19151,19152
>   drm_free(obj->driver_private, 1, 2);
> #line 2876
19154c19156
< #line 2878 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2879 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19164c19166
< #line 2885
---
> #line 2886
19166c19168
< #line 2885
---
> #line 2886
19168c19170
< #line 2885
---
> #line 2886
19170c19172
< #line 2885
---
> #line 2886
19175c19177
< #line 2886
---
> #line 2887
19177c19179
< #line 2886
---
> #line 2887
19179c19181
< #line 2889
---
> #line 2890
19181,19182d19182
< #line 2891
<     if (obj_priv->pin_count != 0) {
19184c19184
<       printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
---
>     if (obj_priv->pin_count != 0) {
19186c19186
<       mutex_unlock(& dev->struct_mutex);
---
>       printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
19187a19188,19189
>       mutex_unlock(& dev->struct_mutex);
> #line 2895
19192,19193d19193
< #line 2897
<     ret = i915_gem_object_unbind(obj);
19195c19195
<     if (ret != 0) {
---
>     ret = i915_gem_object_unbind(obj);
19196a19197,19198
>     if (ret != 0) {
> #line 2900
19199,19200d19200
< #line 2901
<       mutex_unlock(& dev->struct_mutex);
19201a19202,19203
>       mutex_unlock(& dev->struct_mutex);
> #line 2903
19207c19209
< #line 2907
---
> #line 2908
19211c19213
< #line 2910 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2911 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19246c19248
< #line 2913
---
> #line 2914
19248c19250
< #line 2917
---
> #line 2918
19250,19251d19251
< #line 2919
<   if (dev_priv->mm.suspended || (unsigned long )dev_priv->ring.ring_obj == (unsigned long )((void *)0)) {
19253c19253
<     mutex_unlock(& dev->struct_mutex);
---
>   if (dev_priv->mm.suspended || (unsigned long )dev_priv->ring.ring_obj == (unsigned long )((void *)0)) {
19254a19255,19256
>     mutex_unlock(& dev->struct_mutex);
> #line 2922
19259c19261
< #line 2927
---
> #line 2928
19261,19262d19262
< #line 2931
<   mutex_unlock(& dev->struct_mutex);
19264c19264
<   cancel_delayed_work_sync(& dev_priv->mm.retire_work);
---
>   mutex_unlock(& dev->struct_mutex);
19265a19266,19267
>   cancel_delayed_work_sync(& dev_priv->mm.retire_work);
> #line 2934
19267c19269
< #line 2935
---
> #line 2936
19269c19271
< #line 2939
---
> #line 2940
19271c19273
< #line 2941
---
> #line 2942
19273,19274d19274
< #line 2943
<   if (seqno == (uint32_t )0) {
19276c19276
<     mutex_unlock(& dev->struct_mutex);
---
>   if (seqno == (uint32_t )0) {
19277a19278,19279
>     mutex_unlock(& dev->struct_mutex);
> #line 2946
19282,19283d19283
< #line 2948
<   dev_priv->mm.waiting_gem_seqno = seqno;
19285c19285
<   last_seqno = 0;
---
>   dev_priv->mm.waiting_gem_seqno = seqno;
19287c19287
<   stuck = 0;
---
>   last_seqno = 0;
19289c19289
<   while (1) {
---
>   stuck = 0;
19291c19291
<     cur_seqno = i915_get_gem_seqno(dev);
---
>   while (1) {
19292a19293,19294
>     cur_seqno = i915_get_gem_seqno(dev);
> #line 2954
19294,19295d19295
< #line 2953
<     if (tmp) {
19296a19297,19298
>     if (tmp) {
> #line 2955
19301,19302d19302
< #line 2955
<     if (last_seqno == cur_seqno) {
19303a19304,19305
>     if (last_seqno == cur_seqno) {
> #line 2957
19305c19307
< #line 2956
---
> #line 2957
19307,19308d19308
< #line 2956
<       if (tmp___0 > 100) {
19310c19310
<         printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
---
>       if (tmp___0 > 100) {
19312c19312
<         dev_priv->mm.wedged = 1;
---
>         printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
19314c19314
<         __wake_up(& dev_priv->irq_queue, 1, 1, (void *)0);
---
>         dev_priv->mm.wedged = 1;
19315a19316,19317
>         __wake_up(& dev_priv->irq_queue, 1, 1, (void *)0);
> #line 2961
19323,19324d19324
< #line 2963
<     msleep(10);
19325a19326,19327
>     msleep(10);
> #line 2965
19328c19330
< #line 2966
---
> #line 2967
19330c19332
< #line 2968
---
> #line 2969
19332c19334
< #line 2970
---
> #line 2971
19334c19336
< #line 2974
---
> #line 2975
19336c19338
< #line 2974
---
> #line 2975
19338c19340
< #line 2974
---
> #line 2975
19341c19343
< #line 2974
---
> #line 2975
19344c19346
< #line 2974
---
> #line 2975
19346c19348
< #line 2974
---
> #line 2975
19348c19350
< #line 2974
---
> #line 2975
19350c19352
< #line 2974
---
> #line 2975
19352c19354
<                        2974);
---
>                        2975);
19356,19357d19357
< #line 2974
<     __builtin_expect(! (! __ret_warn_on), 0);
19358a19359,19360
>     __builtin_expect(! (! __ret_warn_on), 0);
> #line 2976
19360c19362
< #line 2975
---
> #line 2976
19362c19364
< #line 2975
---
> #line 2976
19365c19367
< #line 2975
---
> #line 2976
19368c19370
< #line 2975
---
> #line 2976
19370c19372
< #line 2975
---
> #line 2976
19372c19374
< #line 2975
---
> #line 2976
19374c19376
< #line 2975
---
> #line 2976
19376c19378
<                        2975);
---
>                        2976);
19380c19382
< #line 2975
---
> #line 2976
19382c19384
< #line 2979
---
> #line 2980
19384c19386
< #line 2979
---
> #line 2980
19386c19388
< #line 2979
---
> #line 2980
19389c19391
< #line 2979
---
> #line 2980
19392c19394
< #line 2979
---
> #line 2980
19394c19396
< #line 2979
---
> #line 2980
19396c19398
< #line 2979
---
> #line 2980
19398c19400
< #line 2979
---
> #line 2980
19400c19402
<                        2979);
---
>                        2980);
19404c19406
< #line 2979
---
> #line 2980
19409c19411
< #line 2987
---
> #line 2988
19411c19413
< #line 2987
---
> #line 2988
19413c19415
< #line 2987
---
> #line 2988
19415c19417
< #line 2987
---
> #line 2988
19420c19422
< #line 2990
---
> #line 2991
19422c19424
< #line 2990
---
> #line 2991
19424,19425d19425
< #line 2993
<     (obj_priv->obj)->write_domain = (obj_priv->obj)->write_domain & (unsigned int )(~ (~ (1 | 64)));
19426a19427,19428
>     (obj_priv->obj)->write_domain = (obj_priv->obj)->write_domain & (unsigned int )(~ (~ (1 | 64)));
> #line 2995
19429c19431
< #line 2997
---
> #line 2998
19431c19433
< #line 2997
---
> #line 2998
19433c19435
< #line 2997
---
> #line 2998
19435c19437
< #line 2997
---
> #line 2998
19440c19442
< #line 3000
---
> #line 3001
19442c19444
< #line 3000
---
> #line 3001
19444,19445d19445
< #line 3003
<     (obj_priv___0->obj)->write_domain = (obj_priv___0->obj)->write_domain & (unsigned int )(~ (~ (1 | 64)));
19446a19447,19448
>     (obj_priv___0->obj)->write_domain = (obj_priv___0->obj)->write_domain & (unsigned int )(~ (~ (1 | 64)));
> #line 3005
19449,19450d19450
< #line 3009
<   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
19451a19452,19453
>   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
> #line 3011
19453c19455
< #line 3010
---
> #line 3011
19455c19457
< #line 3010
---
> #line 3011
19458c19460
< #line 3010
---
> #line 3011
19461c19463
< #line 3010
---
> #line 3011
19463c19465
< #line 3010
---
> #line 3011
19465c19467
< #line 3010
---
> #line 3011
19467c19469
< #line 3010
---
> #line 3011
19469c19471
<                      3010);
---
>                      3011);
19473,19474d19474
< #line 3010
<   __builtin_expect(! (! __ret_warn_on___2), 0);
19476c19476
<   if (ret) {
---
>   __builtin_expect(! (! __ret_warn_on___2), 0);
19478c19478
<     mutex_unlock(& dev->struct_mutex);
---
>   if (ret) {
19479a19480,19481
>     mutex_unlock(& dev->struct_mutex);
> #line 3014
19484,19485d19485
< #line 3016
<   i915_gem_cleanup_ringbuffer(dev);
19486a19487,19488
>   i915_gem_cleanup_ringbuffer(dev);
> #line 3018
19488c19490
< #line 3019
---
> #line 3020
19492c19494
< #line 3022 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 3023 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19501c19503
< #line 3025
---
> #line 3026
19503,19504d19504
< #line 3033
<   if (! ((((dev->pci_device == 10690 || dev->pci_device == 10674) || dev->pci_device == 10706) || dev->pci_device == 10818) || (((dev->pci_device == 11778 || dev->pci_device == 11794) || dev->pci_device == 11810) || dev->pci_device == 10818))) {
19505a19506,19507
>   if (! ((((dev->pci_device == 10690 || dev->pci_device == 10674) || dev->pci_device == 10706) || dev->pci_device == 10818) || (((dev->pci_device == 11778 || dev->pci_device == 11794) || dev->pci_device == 11810) || dev->pci_device == 10818))) {
> #line 3035
19510,19511d19511
< #line 3036
<   obj = drm_gem_object_alloc(dev, 4096);
19513c19513
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 4096);
19515c19515
<     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
---
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
19516a19517,19518
>     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
> #line 3040
19521,19522d19522
< #line 3041
<   obj_priv = obj->driver_private;
19523a19524,19525
>   obj_priv = obj->driver_private;
> #line 3043
19525,19526d19526
< #line 3044
<   ret = i915_gem_object_pin(obj, 4096);
19528c19528
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096);
19530c19530
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
19531a19532,19533
>     drm_gem_object_unreference(obj);
> #line 3048
19536c19538
< #line 3050
---
> #line 3051
19538,19539d19539
< #line 3052
<   dev_priv->hw_status_page = kmap(*(obj_priv->page_list + 0));
19541c19541
<   if ((unsigned long )dev_priv->hw_status_page == (unsigned long )((void *)0)) {
---
>   dev_priv->hw_status_page = kmap(*(obj_priv->page_list + 0));
19543c19543
<     printk("<3>[drm:%s] *ERROR* Failed to map status page.\n", "i915_gem_init_hws");
---
>   if ((unsigned long )dev_priv->hw_status_page == (unsigned long )((void *)0)) {
19545c19545
<     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
---
>     printk("<3>[drm:%s] *ERROR* Failed to map status page.\n", "i915_gem_init_hws");
19547c19547
<     drm_gem_object_unreference(obj);
---
>     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
19548a19549,19550
>     drm_gem_object_unreference(obj);
> #line 3058
19553,19554d19554
< #line 3059
<   dev_priv->hws_obj = obj;
19556c19556
<   memset(dev_priv->hw_status_page, 0, 1UL << 12);
---
>   dev_priv->hws_obj = obj;
19558c19558
<   writel(dev_priv->status_gfx_addr, dev_priv->regs + 8320);
---
>   memset(dev_priv->hw_status_page, 0, 1UL << 12);
19560c19560
<   readl(dev_priv->regs + 8320);
---
>   writel(dev_priv->status_gfx_addr, dev_priv->regs + 8320);
19561a19562,19563
>   readl(dev_priv->regs + 8320);
> #line 3064
19563c19565
< #line 3063
---
> #line 3064
19565c19567
< #line 3063
---
> #line 3064
19570c19572
< #line 3063
---
> #line 3064
19573c19575
< #line 3065
---
> #line 3066
19577c19579
< #line 3068 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 3069 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19605c19607
< #line 3071
---
> #line 3072
19607c19609
< #line 3074
---
> #line 3075
19609,19610d19610
< #line 3078
<   ret = i915_gem_init_hws(dev);
19612c19612
<   if (ret != 0) {
---
>   ret = i915_gem_init_hws(dev);
19613a19614,19615
>   if (ret != 0) {
> #line 3081
19618,19619d19619
< #line 3082
<   obj = drm_gem_object_alloc(dev, 128 * 1024);
19621c19621
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 128 * 1024);
19623c19623
<     printk("<3>[drm:%s] *ERROR* Failed to allocate ringbuffer\n", "i915_gem_init_ringbuffer");
---
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
19624a19625,19626
>     printk("<3>[drm:%s] *ERROR* Failed to allocate ringbuffer\n", "i915_gem_init_ringbuffer");
> #line 3086
19629c19631
< #line 3087
---
> #line 3088
19631,19632d19632
< #line 3089
<   ret = i915_gem_object_pin(obj, 4096);
19634c19634
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096);
19636c19636
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
19637a19638,19639
>     drm_gem_object_unreference(obj);
> #line 3093
19642,19643d19643
< #line 3096
<   ring->Size = obj->size;
19644a19645,19646
>   ring->Size = obj->size;
> #line 3098
19646,19647d19647
< #line 3099
<   ring->map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
19649c19649
<   ring->map.size = obj->size;
---
>   ring->map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
19651c19651
<   ring->map.type = 0;
---
>   ring->map.size = obj->size;
19653c19653
<   ring->map.flags = 0;
---
>   ring->map.type = 0;
19654a19655,19656
>   ring->map.flags = 0;
> #line 3104
19656,19657d19657
< #line 3105
<   drm_core_ioremap_wc(& ring->map, dev);
19659c19659
<   if ((unsigned long )ring->map.handle == (unsigned long )((void *)0)) {
---
>   drm_core_ioremap_wc(& ring->map, dev);
19661c19661
<     printk("<3>[drm:%s] *ERROR* Failed to map ringbuffer.\n", "i915_gem_init_ringbuffer");
---
>   if ((unsigned long )ring->map.handle == (unsigned long )((void *)0)) {
19663c19663
<     memset(& dev_priv->ring, 0, sizeof(dev_priv->ring));
---
>     printk("<3>[drm:%s] *ERROR* Failed to map ringbuffer.\n", "i915_gem_init_ringbuffer");
19665c19665
<     drm_gem_object_unreference(obj);
---
>     memset(& dev_priv->ring, 0, sizeof(dev_priv->ring));
19666a19667,19668
>     drm_gem_object_unreference(obj);
> #line 3111
19671,19672d19672
< #line 3112
<   ring->ring_obj = obj;
19673a19674,19675
>   ring->ring_obj = obj;
> #line 3114
19675,19676d19676
< #line 3116
<   writel(0, dev_priv->regs + 8252);
19678c19678
<   writel(0, dev_priv->regs + 8240);
---
>   writel(0, dev_priv->regs + 8252);
19679a19680,19681
>   writel(0, dev_priv->regs + 8240);
> #line 3119
19681,19682d19682
< #line 3121
<   writel(obj_priv->gtt_offset, dev_priv->regs + 8248);
19683a19684,19685
>   writel(obj_priv->gtt_offset, dev_priv->regs + 8248);
> #line 3123
19685c19687
< #line 3122
---
> #line 3123
19687,19688d19688
< #line 3125
<   if (head != (u32 )0) {
19689a19690,19691
>   if (head != (u32 )0) {
> #line 3127
19691c19693
< #line 3126
---
> #line 3127
19693c19695
< #line 3126
---
> #line 3127
19695c19697
< #line 3126
---
> #line 3127
19697c19699
< #line 3126
---
> #line 3127
19700c19702
< #line 3132
---
> #line 3133
19702c19704
< #line 3134
---
> #line 3135
19704c19706
< #line 3134
---
> #line 3135
19706c19708
< #line 3134
---
> #line 3135
19708c19710
< #line 3134
---
> #line 3135
19710c19712
< #line 3134
---
> #line 3135
19716c19718
< #line 3142
---
> #line 3143
19718c19720
< #line 3147
---
> #line 3148
19720c19722
< #line 3147
---
> #line 3148
19722,19723d19723
< #line 3150
<   if (head != (u32 )0) {
19724a19725,19726
>   if (head != (u32 )0) {
> #line 3152
19726c19728
< #line 3151
---
> #line 3152
19728c19730
< #line 3151
---
> #line 3152
19730c19732
< #line 3151
---
> #line 3152
19732c19734
< #line 3151
---
> #line 3152
19735c19737
< #line 3157
---
> #line 3158
19740c19742
< #line 3161
---
> #line 3162
19742c19744
< #line 3161
---
> #line 3162
19744c19746
< #line 3164
---
> #line 3165
19746,19747d19747
< #line 3164
<     ring->head = tmp___13 & 2097148U;
19748a19749,19750
>     ring->head = tmp___13 & 2097148U;
> #line 3166
19750,19751d19751
< #line 3165
<     ring->tail = tmp___14 & 2097144U;
19753c19753
<     ring->space = ring->head - (ring->tail + 8);
---
>     ring->tail = tmp___14 & 2097144U;
19755c19755
<     if (ring->space < 0) {
---
>     ring->space = ring->head - (ring->tail + 8);
19756a19757,19758
>     if (ring->space < 0) {
> #line 3169
19762c19764
< #line 3162
---
> #line 3163
19765c19767
< #line 3171
---
> #line 3172
19769c19771
< #line 3174 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 3175 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19777c19779
< #line 3177
---
> #line 3178
19779,19780d19780
< #line 3179
<   if ((unsigned long )dev_priv->ring.ring_obj == (unsigned long )((void *)0)) {
19781a19782,19783
>   if ((unsigned long )dev_priv->ring.ring_obj == (unsigned long )((void *)0)) {
> #line 3181
19786c19788
< #line 3182
---
> #line 3183
19788,19789d19789
< #line 3184
<   i915_gem_object_unpin(dev_priv->ring.ring_obj);
19791c19791
<   drm_gem_object_unreference(dev_priv->ring.ring_obj);
---
>   i915_gem_object_unpin(dev_priv->ring.ring_obj);
19793c19793
<   dev_priv->ring.ring_obj = (void *)0;
---
>   drm_gem_object_unreference(dev_priv->ring.ring_obj);
19794a19795,19796
>   dev_priv->ring.ring_obj = (void *)0;
> #line 3188
19796,19797d19797
< #line 3189
<   if ((unsigned long )dev_priv->hws_obj != (unsigned long )((void *)0)) {
19799c19799
<     obj = dev_priv->hws_obj;
---
>   if ((unsigned long )dev_priv->hws_obj != (unsigned long )((void *)0)) {
19800a19801,19802
>     obj = dev_priv->hws_obj;
> #line 3192
19802c19804
< #line 3193
---
> #line 3194
19804c19806
< #line 3193
---
> #line 3194
19807,19808d19808
< #line 3194
<     i915_gem_object_unpin(obj);
19810c19810
<     drm_gem_object_unreference(obj);
---
>     i915_gem_object_unpin(obj);
19812c19812
<     dev_priv->hws_obj = (void *)0;
---
>     drm_gem_object_unreference(obj);
19814c19814
<     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
---
>     dev_priv->hws_obj = (void *)0;
19815a19816,19817
>     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
> #line 3199
19817c19819
< #line 3201
---
> #line 3202
19822c19824
< #line 3203
---
> #line 3204
19826c19828
< #line 3205 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 3206 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
19846c19848
< #line 3209
---
> #line 3210
19848c19850
< #line 3212
---
> #line 3213
19850,19851d19851
< #line 3212
<   if (tmp) {
19852a19853,19854
>   if (tmp) {
> #line 3214
19857,19858d19858
< #line 3215
<   if (dev_priv->mm.wedged) {
19860c19860
<     printk("<3>[drm:%s] *ERROR* Reenabling wedged hardware, good luck\n", "i915_gem_entervt_ioctl");
---
>   if (dev_priv->mm.wedged) {
19861a19862,19863
>     printk("<3>[drm:%s] *ERROR* Reenabling wedged hardware, good luck\n", "i915_gem_entervt_ioctl");
> #line 3218
19866,19867d19867
< #line 3220
<   ret = i915_gem_init_ringbuffer(dev);
19869c19869
<   if (ret != 0) {
---
>   ret = i915_gem_init_ringbuffer(dev);
19870a19871,19872
>   if (ret != 0) {
> #line 3223
19875c19877
< #line 3224
---
> #line 3225
19877,19878d19878
< #line 3228
<   mutex_lock_nested(& dev->struct_mutex, 0);
19879a19880,19881
>   mutex_lock_nested(& dev->struct_mutex, 0);
> #line 3230
19881c19883
< #line 3229
---
> #line 3230
19883c19885
< #line 3229
---
> #line 3230
19885c19887
< #line 3229
---
> #line 3230
19888c19890
< #line 3229
---
> #line 3230
19891c19893
< #line 3229
---
> #line 3230
19893c19895
< #line 3229
---
> #line 3230
19895c19897
< #line 3229
---
> #line 3230
19897c19899
< #line 3229
---
> #line 3230
19904,19905c19906,19907
<                              "i" (3229), "i" (sizeof(struct bug_entry )));
< #line 3229
---
>                              "i" (3230), "i" (sizeof(struct bug_entry )));
> #line 3230
19909c19911
< #line 3229
---
> #line 3230
19915c19917
< #line 3229
---
> #line 3230
19918c19920
< #line 3230
---
> #line 3231
19920c19922
< #line 3230
---
> #line 3231
19922c19924
< #line 3230
---
> #line 3231
19924c19926
< #line 3230
---
> #line 3231
19927c19929
< #line 3230
---
> #line 3231
19930c19932
< #line 3230
---
> #line 3231
19932c19934
< #line 3230
---
> #line 3231
19934c19936
< #line 3230
---
> #line 3231
19936c19938
< #line 3230
---
> #line 3231
19943,19944c19945,19946
<                              "i" (3230), "i" (sizeof(struct bug_entry )));
< #line 3230
---
>                              "i" (3231), "i" (sizeof(struct bug_entry )));
> #line 3231
19948c19950
< #line 3230
---
> #line 3231
19954c19956
< #line 3230
---
> #line 3231
19957c19959
< #line 3231
---
> #line 3232
19959c19961
< #line 3231
---
> #line 3232
19961c19963
< #line 3231
---
> #line 3232
19963c19965
< #line 3231
---
> #line 3232
19966c19968
< #line 3231
---
> #line 3232
19969c19971
< #line 3231
---
> #line 3232
19971c19973
< #line 3231
---
> #line 3232
19973c19975
< #line 3231
---
> #line 3232
19975c19977
< #line 3231
---
> #line 3232
19982,19983c19984,19985
<                              "i" (3231), "i" (sizeof(struct bug_entry )));
< #line 3231
---
>                              "i" (3232), "i" (sizeof(struct bug_entry )));
> #line 3232
19987c19989
< #line 3231
---
> #line 3232
19993c19995
< #line 3231
---
> #line 3232
19996c19998
< #line 3232
---
> #line 3233
19998c20000
< #line 3232
---
> #line 3233
20000c20002
< #line 3232
---
> #line 3233
20002c20004
< #line 3232
---
> #line 3233
20005c20007
< #line 3232
---
> #line 3233
20008c20010
< #line 3232
---
> #line 3233
20010c20012
< #line 3232
---
> #line 3233
20012c20014
< #line 3232
---
> #line 3233
20014c20016
< #line 3232
---
> #line 3233
20021,20022c20023,20024
<                              "i" (3232), "i" (sizeof(struct bug_entry )));
< #line 3232
---
>                              "i" (3233), "i" (sizeof(struct bug_entry )));
> #line 3233
20026c20028
< #line 3232
---
> #line 3233
20032c20034
< #line 3232
---
> #line 3233
20035,20036d20036
< #line 3233
<   dev_priv->mm.suspended = 0;
20037a20038,20039
>   dev_priv->mm.suspended = 0;
> #line 3235
20039c20041
< #line 3236
---
> #line 3237
20041c20043
< #line 3238
---
> #line 3239
20045c20047
< #line 3241 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 3242 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
20053c20055
< #line 3245
---
> #line 3246
20055c20057
< #line 3248
---
> #line 3249
20057,20058d20058
< #line 3248
<   if (tmp) {
20059a20060,20061
>   if (tmp) {
> #line 3250
20064,20065d20065
< #line 3251
<   ret = i915_gem_idle(dev);
20066a20067,20068
>   ret = i915_gem_idle(dev);
> #line 3253
20068,20069d20069
< #line 3254
<   io_mapping_free(dev_priv->mm.gtt_mapping);
20070a20071,20072
>   io_mapping_free(dev_priv->mm.gtt_mapping);
> #line 3256
20074c20076
< #line 3258 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 3259 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
20080,20081d20081
< #line 3263
<   ret = i915_gem_idle(dev);
20083c20083
<   if (ret) {
---
>   ret = i915_gem_idle(dev);
20084a20085,20086
>   if (ret) {
> #line 3266
20090c20092
< #line 3266
---
> #line 3267
20094c20096
< #line 3277 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 3278 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
20096c20098
< #line 3268 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 3269 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--68_1--X--cpachecker/linux/csd_deg_dscv/36/dscv_tempdir/dscv/ri/68_1/drivers/gpu/drm/i915/i915_gem.c"
20103c20105
< #line 3271
---
> #line 3272
20105,20106d20106
< #line 3273
<   INIT_LIST_HEAD(& dev_priv->mm.active_list);
20108c20108
<   INIT_LIST_HEAD(& dev_priv->mm.flushing_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.active_list);
20110c20110
<   INIT_LIST_HEAD(& dev_priv->mm.inactive_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.flushing_list);
20112c20112
<   INIT_LIST_HEAD(& dev_priv->mm.request_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.inactive_list);
20113a20114,20115
>   INIT_LIST_HEAD(& dev_priv->mm.request_list);
> #line 3278
20115c20117
< #line 3277
---
> #line 3278
20117c20119
< #line 3277
---
> #line 3278
20119c20121
< #line 3277
---
> #line 3278
20121c20123
< #line 3277
---
> #line 3278
20124c20126
< #line 3277
---
> #line 3278
20126c20128
< #line 3277
---
> #line 3278
20128c20130
< #line 3277
---
> #line 3278
20130c20132
< #line 3277
---
> #line 3278
20133c20135
< #line 3277
---
> #line 3278
20136c20138
< #line 3277
---
> #line 3278
20138c20140
< #line 3277
---
> #line 3278
20141c20143
< #line 3279
---
> #line 3280
20143c20145
< #line 3282
---
> #line 3283
20145,20146d20146
< #line 3284
<   if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
20147a20148,20149
>   if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
> #line 3286
20150c20152
< #line 3287
---
> #line 3288
20153,20154d20154
< #line 3289
<   i915_gem_detect_bit_6_swizzle(dev);
20155a20156,20157
>   i915_gem_detect_bit_6_swizzle(dev);
> #line 3291

4291c4291
< #line 1782 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1783 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
12768a12769,12770
> #line 75 "include/asm/io.h"
> extern void *ioremap_wc(unsigned long offset , unsigned long size ) ;
12915a12918,12919
> #line 1312
> extern void drm_core_ioremap_wc(struct drm_map *map , struct drm_device *dev ) ;
13203c13207
<     tmp___2 = ioremap(pfn << 12, 1UL << 12);
---
>     tmp___2 = ioremap_wc(pfn << 12, 1UL << 12);
15415,15418c15419,15420
<       reloc_page = ioremap((dev->agp)->base + ((unsigned long )reloc_offset & ~ ((1UL << 12) - 1UL)),
<                            1UL << 12);
< #line 1618
<       last_reloc_offset = reloc_offset;
---
>       reloc_page = ioremap_wc((dev->agp)->base + ((unsigned long )reloc_offset & ~ ((1UL << 12) - 1UL)),
>                               1UL << 12);
15420c15422
<       if ((unsigned long )reloc_page == (unsigned long )((void *)0)) {
---
>       last_reloc_offset = reloc_offset;
15422c15424
<         drm_gem_object_unreference(target_obj);
---
>       if ((unsigned long )reloc_page == (unsigned long )((void *)0)) {
15424c15426
<         i915_gem_object_unpin(obj);
---
>         drm_gem_object_unreference(target_obj);
15425a15428,15429
>         i915_gem_object_unpin(obj);
> #line 1623
15433c15437
< #line 1626
---
> #line 1627
15435c15439
< #line 1628
---
> #line 1629
15437c15441
< #line 1635
---
> #line 1636
15439,15440d15442
< #line 1640
<     reloc.presumed_offset = target_obj_priv->gtt_offset;
15441a15444,15445
>     reloc.presumed_offset = target_obj_priv->gtt_offset;
> #line 1642
15443,15444d15446
< #line 1641
<     ret___0 = tmp___0;
15446c15448
<     if (ret___0 != 0) {
---
>     ret___0 = tmp___0;
15448c15450
<       drm_gem_object_unreference(target_obj);
---
>     if (ret___0 != 0) {
15450c15452
<       i915_gem_object_unpin(obj);
---
>       drm_gem_object_unreference(target_obj);
15451a15454,15455
>       i915_gem_object_unpin(obj);
> #line 1646
15456c15460
< #line 1648
---
> #line 1649
15462,15463d15465
< #line 1651
<   if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
15464a15467,15468
>   if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
> #line 1653
15469c15473
< #line 1658
---
> #line 1659
15473c15477
< #line 1663 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1664 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15492,15493d15495
< #line 1668
<   dev_priv = dev->dev_private;
15494a15497,15498
>   dev_priv = dev->dev_private;
> #line 1670
15496,15497d15499
< #line 1671
<   nbox = exec->num_cliprects;
15498a15501,15502
>   nbox = exec->num_cliprects;
> #line 1673
15500,15501d15503
< #line 1676
<   exec_start = (uint32_t )exec_offset + exec->batch_start_offset;
15502a15505,15506
>   exec_start = (uint32_t )exec_offset + exec->batch_start_offset;
> #line 1678
15504,15505d15507
< #line 1679
<   if ((exec_start | exec_len) & 7U) {
15507c15509
<     printk("<3>[drm:%s] *ERROR* alignment\n", "i915_dispatch_gem_execbuffer");
---
>   if ((exec_start | exec_len) & 7U) {
15508a15511,15512
>     printk("<3>[drm:%s] *ERROR* alignment\n", "i915_dispatch_gem_execbuffer");
> #line 1682
15513,15514d15516
< #line 1684
<   if (! exec_start) {
15515a15518,15519
>   if (! exec_start) {
> #line 1686
15520c15524
< #line 1687
---
> #line 1688
15522c15526
< #line 1689
---
> #line 1690
15524c15528
< #line 1689
---
> #line 1690
15526c15530
< #line 1689
---
> #line 1690
15530c15534
< #line 1689
---
> #line 1690
15533,15534d15536
< #line 1690
<     if (i < nbox) {
15535a15538,15539
>     if (i < nbox) {
> #line 1692
15537c15541
< #line 1691
---
> #line 1692
15539,15540d15542
< #line 1693
<       if (ret) {
15541a15544,15545
>       if (ret) {
> #line 1695
15549,15550d15552
< #line 1697
<     if (dev->pci_device == 13687 || dev->pci_device == 9570) {
15551a15554,15555
>     if (dev->pci_device == 13687 || dev->pci_device == 9570) {
> #line 1699
15553c15557
< #line 1698
---
> #line 1699
15555c15559
< #line 1698
---
> #line 1699
15560,15570d15563
< #line 1698
<         outcount = 0;
< #line 1698
<         outring = dev_priv->ring.tail;
< #line 1698
<         ringmask = dev_priv->ring.tail_mask;
< #line 1698
<         virt = dev_priv->ring.virtual_start;
< #line 1698
<         break;
<       }
15572,15574c15565
<       while (1) {
< #line 1699
<         *((unsigned int volatile   *)(virt + outring)) = (48 << 23) | 1;
---
>         outcount = 0;
15576c15567
<         outcount = outcount + 1U;
---
>         outring = dev_priv->ring.tail;
15578c15569
<         outring = outring + 4U;
---
>         ringmask = dev_priv->ring.tail_mask;
15580c15571
<         outring = outring & ringmask;
---
>         virt = dev_priv->ring.virtual_start;
15587c15578
<         *((unsigned int volatile   *)(virt + outring)) = exec_start | 1U;
---
>         *((unsigned int volatile   *)(virt + outring)) = (48 << 23) | 1;
15600c15591
<         *((unsigned int volatile   *)(virt + outring)) = (exec_start + exec_len) - (uint32_t )4;
---
>         *((unsigned int volatile   *)(virt + outring)) = exec_start | 1U;
15613c15604
<         *((unsigned int volatile   *)(virt + outring)) = 0;
---
>         *((unsigned int volatile   *)(virt + outring)) = (exec_start + exec_len) - (uint32_t )4;
15626c15617
<         dev_priv->ring.tail = outring;
---
>         *((unsigned int volatile   *)(virt + outring)) = 0;
15628c15619
<         dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
---
>         outcount = outcount + 1U;
15630c15621,15623
<         writel(outring, (dev_priv->mmio_map)->handle + 8240);
---
>         outring = outring + 4U;
> #line 1703
>         outring = outring & ringmask;
15633a15627,15637
> #line 1704
>       while (1) {
> #line 1704
>         dev_priv->ring.tail = outring;
> #line 1704
>         dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
> #line 1704
>         writel(outring, (dev_priv->mmio_map)->handle + 8240);
> #line 1704
>         break;
>       }
15635c15639
< #line 1705
---
> #line 1706
15637c15641
< #line 1705
---
> #line 1706
15639c15643
< #line 1705
---
> #line 1706
15644c15648
< #line 1705
---
> #line 1706
15646c15650
< #line 1705
---
> #line 1706
15648c15652
< #line 1705
---
> #line 1706
15650c15654
< #line 1705
---
> #line 1706
15652c15656
< #line 1705
---
> #line 1706
15655,15656d15658
< #line 1706
<       if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
15657a15660,15661
>       if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
> #line 1708
15659c15663
< #line 1707
---
> #line 1708
15661c15665
< #line 1707
---
> #line 1708
15663c15667
< #line 1707
---
> #line 1708
15665c15669
< #line 1707
---
> #line 1708
15667c15671
< #line 1707
---
> #line 1708
15670c15674
< #line 1710
---
> #line 1711
15672c15676
< #line 1710
---
> #line 1711
15674c15678
< #line 1710
---
> #line 1711
15676c15680
< #line 1710
---
> #line 1711
15678c15682
< #line 1710
---
> #line 1711
15680c15684
< #line 1710
---
> #line 1711
15684c15688
< #line 1712
---
> #line 1713
15686c15690
< #line 1712
---
> #line 1713
15688c15692
< #line 1712
---
> #line 1713
15690c15694
< #line 1712
---
> #line 1713
15692c15696
< #line 1712
---
> #line 1713
15694c15698
< #line 1712
---
> #line 1713
15697c15701
< #line 1714
---
> #line 1715
15699c15703
< #line 1714
---
> #line 1715
15701c15705
< #line 1714
---
> #line 1715
15703c15707
< #line 1714
---
> #line 1715
15705c15709
< #line 1714
---
> #line 1715
15707c15711
< #line 1714
---
> #line 1715
15711c15715
< #line 1716
---
> #line 1717
15713c15717
< #line 1716
---
> #line 1717
15715c15719
< #line 1716
---
> #line 1717
15717c15721
< #line 1716
---
> #line 1717
15719c15723
< #line 1716
---
> #line 1717
15723c15727
< #line 1689
---
> #line 1690
15726c15730
< #line 1721
---
> #line 1722
15730c15734
< #line 1730 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1731 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15738,15739d15741
< #line 1733
<   i915_file_priv = file_priv->driver_priv;
15740a15743,15744
>   i915_file_priv = file_priv->driver_priv;
> #line 1735
15742,15743d15745
< #line 1737
<   mutex_lock(& dev->struct_mutex);
15745c15747
<   seqno = i915_file_priv->mm.last_gem_throttle_seqno;
---
>   mutex_lock(& dev->struct_mutex);
15746a15749,15750
>   seqno = i915_file_priv->mm.last_gem_throttle_seqno;
> #line 1740
15748,15749d15751
< #line 1741
<   if (seqno) {
15750a15753,15754
>   if (seqno) {
> #line 1743
15755,15756d15758
< #line 1743
<   mutex_unlock(& dev->struct_mutex);
15757a15760,15761
>   mutex_unlock(& dev->struct_mutex);
> #line 1745
15761c15765
< #line 1747 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1748 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15787,15788d15790
< #line 1751
<   dev_priv = dev->dev_private;
15790c15792
<   i915_file_priv = file_priv->driver_priv;
---
>   dev_priv = dev->dev_private;
15792c15794
<   args = data;
---
>   i915_file_priv = file_priv->driver_priv;
15794c15796
<   exec_list = (void *)0;
---
>   args = data;
15795a15798,15799
>   exec_list = (void *)0;
> #line 1756
15797c15801
< #line 1757
---
> #line 1758
15799,15800d15802
< #line 1766
<   if (args->buffer_count < (uint32_t )1) {
15801a15804,15805
>   if (args->buffer_count < (uint32_t )1) {
> #line 1768
15804c15808
< #line 1768
---
> #line 1769
15809c15813
< #line 1771
---
> #line 1772
15811c15815
< #line 1771
---
> #line 1772
15813c15817
< #line 1773
---
> #line 1774
15815c15819
< #line 1773
---
> #line 1774
15817,15818d15820
< #line 1775
<   if ((unsigned long )exec_list == (unsigned long )((void *)0) || (unsigned long )object_list == (unsigned long )((void *)0)) {
15819a15822,15823
>   if ((unsigned long )exec_list == (unsigned long )((void *)0) || (unsigned long )object_list == (unsigned long )((void *)0)) {
> #line 1777
15822,15823d15825
< #line 1779
<     ret = -12;
15824a15827,15828
>     ret = -12;
> #line 1781
15829c15833
< #line 1782
---
> #line 1783
15832c15836
< #line 1782
---
> #line 1783
15834,15835d15837
< #line 1786
<   if (ret != 0) {
15836a15839,15840
>   if (ret != 0) {
> #line 1788
15839c15843
< #line 1789
---
> #line 1790
15844c15848
< #line 1792
---
> #line 1793
15846,15847d15849
< #line 1796
<   if (dev_priv->mm.wedged) {
15849c15851
<     printk("<3>[drm:%s] *ERROR* Execbuf while wedged\n", "i915_gem_execbuffer");
---
>   if (dev_priv->mm.wedged) {
15851c15853
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Execbuf while wedged\n", "i915_gem_execbuffer");
15852a15855,15856
>     mutex_unlock(& dev->struct_mutex);
> #line 1800
15857,15858d15860
< #line 1802
<   if (dev_priv->mm.suspended) {
15860c15862
<     printk("<3>[drm:%s] *ERROR* Execbuf while VT-switched.\n", "i915_gem_execbuffer");
---
>   if (dev_priv->mm.suspended) {
15862c15864
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Execbuf while VT-switched.\n", "i915_gem_execbuffer");
15863a15866,15867
>     mutex_unlock(& dev->struct_mutex);
> #line 1806
15868,15869d15871
< #line 1812
<   dev->invalidate_domains = 0;
15870a15873,15874
>   dev->invalidate_domains = 0;
> #line 1814
15872c15876
< #line 1816
---
> #line 1817
15874c15878
< #line 1816
---
> #line 1817
15876c15880
< #line 1816
---
> #line 1817
15880c15884
< #line 1816
---
> #line 1817
15883c15887
< #line 1817
---
> #line 1818
15885,15886d15888
< #line 1819
<     if ((unsigned long )*(object_list + i) == (unsigned long )((void *)0)) {
15887a15890,15891
>     if ((unsigned long )*(object_list + i) == (unsigned long )((void *)0)) {
> #line 1821
15890,15891d15893
< #line 1822
<       ret = -9;
15892a15895,15896
>       ret = -9;
> #line 1824
15897,15898d15900
< #line 1826
<     (*(object_list + i))->pending_read_domains = 0;
15900c15902
<     (*(object_list + i))->pending_write_domain = 0;
---
>     (*(object_list + i))->pending_read_domains = 0;
15901a15904,15905
>     (*(object_list + i))->pending_write_domain = 0;
> #line 1829
15903,15904d15906
< #line 1831
<     if (ret) {
15905a15908,15909
>     if (ret) {
> #line 1833
15908c15912
< #line 1833
---
> #line 1834
15913c15917
< #line 1835
---
> #line 1836
15915c15919
< #line 1816
---
> #line 1817
15918,15919d15921
< #line 1839
<   batch_obj = *(object_list + (args->buffer_count - (uint32_t )1));
15921c15923
<   batch_obj->pending_read_domains = 8;
---
>   batch_obj = *(object_list + (args->buffer_count - (uint32_t )1));
15922a15925,15926
>   batch_obj->pending_read_domains = 8;
> #line 1842
15924c15928
< #line 1845
---
> #line 1846
15926c15930
< #line 1845
---
> #line 1846
15928c15932
< #line 1845
---
> #line 1846
15932c15936
< #line 1845
---
> #line 1846
15935,15936d15938
< #line 1846
<     obj = *(object_list + i);
15937a15940,15941
>     obj = *(object_list + i);
> #line 1848
15939c15943
< #line 1849
---
> #line 1850
15941,15942d15944
< #line 1855
<       ret = -12;
15943a15946,15947
>       ret = -12;
> #line 1857
15948c15952
< #line 1860
---
> #line 1861
15950,15951d15953
< #line 1863
<     if (ret) {
15952a15955,15956
>     if (ret) {
> #line 1865
15957c15961
< #line 1845
---
> #line 1846
15960c15964
< #line 1870
---
> #line 1871
15962c15966
< #line 1881
---
> #line 1882
15964c15968
< #line 1890
---
> #line 1891
15966,15967d15969
< #line 1893
<   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
15969c15971
<   if (ret) {
---
>   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
15971c15973
<     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
---
>   if (ret) {
15972a15975,15976
>     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
> #line 1897
15977c15981
< #line 1903
---
> #line 1904
15979,15980d15982
< #line 1914
<   seqno = i915_add_request(dev, flush_domains);
15981a15984,15985
>   seqno = i915_add_request(dev, flush_domains);
> #line 1916
15983c15987
< #line 1915
---
> #line 1916
15985c15989
< #line 1915
---
> #line 1916
15987c15991
< #line 1915
---
> #line 1916
15989c15993
< #line 1915
---
> #line 1916
15996,15997c16000,16001
<                              "i" (1915), "i" (sizeof(struct bug_entry )));
< #line 1915
---
>                              "i" (1916), "i" (sizeof(struct bug_entry )));
> #line 1916
16001c16005
< #line 1915
---
> #line 1916
16007c16011
< #line 1915
---
> #line 1916
16010,16011d16013
< #line 1916
<   i915_file_priv->mm.last_gem_seqno = seqno;
16012a16015,16016
>   i915_file_priv->mm.last_gem_seqno = seqno;
> #line 1918
16014c16018
< #line 1917
---
> #line 1918
16016c16020
< #line 1917
---
> #line 1918
16020c16024
< #line 1917
---
> #line 1918
16023,16024d16026
< #line 1918
<     obj___0 = *(object_list + i);
16025a16028,16029
>     obj___0 = *(object_list + i);
> #line 1920
16027,16028d16030
< #line 1921
<     i915_gem_object_move_to_active(obj___0);
16029a16032,16033
>     i915_gem_object_move_to_active(obj___0);
> #line 1923
16031c16035
< #line 1917
---
> #line 1918
16034c16038
< #line 1934
---
> #line 1935
16037c16041
< #line 1934
---
> #line 1935
16039,16040d16042
< #line 1938
<   if (ret) {
16041a16044,16045
>   if (ret) {
> #line 1940
16048,16049d16051
< #line 1943
<   if ((unsigned long )object_list != (unsigned long )((void *)0)) {
16050a16053,16054
>   if ((unsigned long )object_list != (unsigned long )((void *)0)) {
> #line 1945
16052c16056
< #line 1944
---
> #line 1945
16054c16058
< #line 1944
---
> #line 1945
16058c16062
< #line 1944
---
> #line 1945
16061c16065
< #line 1945
---
> #line 1946
16063c16067
< #line 1944
---
> #line 1945
16066c16070
< #line 1947
---
> #line 1948
16068c16072
< #line 1947
---
> #line 1948
16070c16074
< #line 1947
---
> #line 1948
16074c16078
< #line 1947
---
> #line 1948
16077c16081
< #line 1948
---
> #line 1949
16079c16083
< #line 1947
---
> #line 1948
16085c16089
< #line 1950
---
> #line 1951
16088c16092
< #line 1953
---
> #line 1954
16091c16095
< #line 1955
---
> #line 1956
16093c16097
< #line 1958
---
> #line 1959
16097c16101
< #line 1961 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1962 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16106,16107d16109
< #line 1964
<   dev = obj->dev;
16108a16111,16112
>   dev = obj->dev;
> #line 1966
16110,16111d16113
< #line 1969
<   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((void *)0)) {
16113c16115
<     ret = i915_gem_object_bind_to_gtt(obj, alignment);
---
>   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((void *)0)) {
16115c16117
<     if (ret != 0) {
---
>     ret = i915_gem_object_bind_to_gtt(obj, alignment);
16117c16119
<       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
---
>     if (ret != 0) {
16118a16121,16122
>       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
> #line 1974
16126c16130
< #line 1976
---
> #line 1977
16128,16129d16131
< #line 1981
<   if (obj_priv->pin_count == 1) {
16131c16133
<     atomic_inc(& dev->pin_count);
---
>   if (obj_priv->pin_count == 1) {
16133c16135
<     atomic_add(obj->size, & dev->pin_memory);
---
>     atomic_inc(& dev->pin_count);
16134a16137,16138
>     atomic_add(obj->size, & dev->pin_memory);
> #line 1985
16136c16140
< #line 1984
---
> #line 1985
16138c16142
< #line 1984
---
> #line 1985
16142c16146
< #line 1988
---
> #line 1989
16151c16155
< #line 1992
---
> #line 1993
16155c16159
< #line 1995 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1996 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16165,16166d16168
< #line 1998
<   dev = obj->dev;
16168c16170
<   dev_priv = dev->dev_private;
---
>   dev = obj->dev;
16169a16172,16173
>   dev_priv = dev->dev_private;
> #line 2001
16171,16172d16174
< #line 2003
<   obj_priv->pin_count = obj_priv->pin_count - 1;
16173a16176,16177
>   obj_priv->pin_count = obj_priv->pin_count - 1;
> #line 2005
16175c16179
< #line 2004
---
> #line 2005
16177c16181
< #line 2004
---
> #line 2005
16179c16183
< #line 2004
---
> #line 2005
16181c16185
< #line 2004
---
> #line 2005
16188,16189c16192,16193
<                              "i" (2004), "i" (sizeof(struct bug_entry )));
< #line 2004
---
>                              "i" (2005), "i" (sizeof(struct bug_entry )));
> #line 2005
16193c16197
< #line 2004
---
> #line 2005
16199c16203
< #line 2004
---
> #line 2005
16202c16206
< #line 2005
---
> #line 2006
16204c16208
< #line 2005
---
> #line 2006
16207c16211
< #line 2005
---
> #line 2006
16209c16213
< #line 2005
---
> #line 2006
16211c16215
< #line 2005
---
> #line 2006
16218,16219c16222,16223
<                              "i" (2005), "i" (sizeof(struct bug_entry )));
< #line 2005
---
>                              "i" (2006), "i" (sizeof(struct bug_entry )));
> #line 2006
16223c16227
< #line 2005
---
> #line 2006
16229c16233
< #line 2005
---
> #line 2006
16232,16233d16235
< #line 2011
<   if (obj_priv->pin_count == 0) {
16234a16237,16238
>   if (obj_priv->pin_count == 0) {
> #line 2013
16236c16240
< #line 2015
---
> #line 2016
16241,16242d16244
< #line 2017
<     atomic_dec(& dev->pin_count);
16243a16246,16247
>     atomic_dec(& dev->pin_count);
> #line 2019
16248c16252
< #line 2021
---
> #line 2022
16252c16256
< #line 2023 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2024 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16261c16265
< #line 2027
---
> #line 2028
16263c16267
< #line 2032
---
> #line 2033
16265,16266d16268
< #line 2034
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16268c16270
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16269a16272,16273
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2037
16272,16273d16275
< #line 2038
<     mutex_unlock(& dev->struct_mutex);
16274a16277,16278
>     mutex_unlock(& dev->struct_mutex);
> #line 2040
16279c16283
< #line 2041
---
> #line 2042
16281,16282d16284
< #line 2043
<   ret = i915_gem_object_pin(obj, args->alignment);
16284c16286
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, args->alignment);
16286c16288
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
16288c16290
<     mutex_unlock(& dev->struct_mutex);
---
>     drm_gem_object_unreference(obj);
16289a16292,16293
>     mutex_unlock(& dev->struct_mutex);
> #line 2048
16294,16295d16297
< #line 2053
<   if (obj->write_domain & 1U) {
16297c16299
<     i915_gem_clflush_object(obj);
---
>   if (obj->write_domain & 1U) {
16299c16301
<     drm_agp_chipset_flush(dev);
---
>     i915_gem_clflush_object(obj);
16300a16303,16304
>     drm_agp_chipset_flush(dev);
> #line 2057
16305,16306d16308
< #line 2058
<   args->offset = obj_priv->gtt_offset;
16308c16310
<   drm_gem_object_unreference(obj);
---
>   args->offset = obj_priv->gtt_offset;
16309a16312,16313
>   drm_gem_object_unreference(obj);
> #line 2061
16311c16315
< #line 2062
---
> #line 2063
16315c16319
< #line 2065 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2066 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16322c16326
< #line 2069
---
> #line 2070
16324c16328
< #line 2072
---
> #line 2073
16326,16327d16329
< #line 2074
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16329c16331
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16330a16333,16334
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2077
16333,16334d16336
< #line 2078
<     mutex_unlock(& dev->struct_mutex);
16335a16338,16339
>     mutex_unlock(& dev->struct_mutex);
> #line 2080
16340c16344
< #line 2082
---
> #line 2083
16342,16343d16345
< #line 2084
<   drm_gem_object_unreference(obj);
16345c16347
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
16346a16349,16350
>   mutex_unlock(& dev->struct_mutex);
> #line 2087
16350c16354
< #line 2089 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2090 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16358c16362
< #line 2093
---
> #line 2094
16360,16361d16363
< #line 2097
<   mutex_lock(& dev->struct_mutex);
16363c16365
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
---
>   mutex_lock(& dev->struct_mutex);
16365c16367
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16366a16369,16370
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2101
16369,16370d16372
< #line 2102
<     mutex_unlock(& dev->struct_mutex);
16371a16374,16375
>     mutex_unlock(& dev->struct_mutex);
> #line 2104
16376,16377d16379
< #line 2106
<   obj_priv = obj->driver_private;
16378a16381,16382
>   obj_priv = obj->driver_private;
> #line 2108
16380,16381d16383
< #line 2109
<   drm_gem_object_unreference(obj);
16383c16385
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
16384a16387,16388
>   mutex_unlock(& dev->struct_mutex);
> #line 2112
16388c16392
< #line 2114 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2115 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16394c16398
< #line 2118
---
> #line 2119
16396c16400
< #line 2118
---
> #line 2119
16400c16404
< #line 2121 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2122 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16407c16411
< #line 2125
---
> #line 2126
16409,16410d16412
< #line 2125
<   obj_priv = tmp;
16412c16414
<   if ((unsigned long )obj_priv == (unsigned long )((void *)0)) {
---
>   obj_priv = tmp;
16413a16416,16417
>   if ((unsigned long )obj_priv == (unsigned long )((void *)0)) {
> #line 2128
16418,16419d16421
< #line 2135
<   obj->write_domain = 1;
16420a16423,16424
>   obj->write_domain = 1;
> #line 2137
16422,16423d16425
< #line 2138
<   obj->driver_private = obj_priv;
16425c16427
<   obj_priv->obj = obj;
---
>   obj->driver_private = obj_priv;
16427c16429
<   INIT_LIST_HEAD(& obj_priv->list);
---
>   obj_priv->obj = obj;
16428a16431,16432
>   INIT_LIST_HEAD(& obj_priv->list);
> #line 2142
16432c16436
< #line 2144 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2145 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16438c16442
< #line 2146
---
> #line 2147
16440c16444
< #line 2148
---
> #line 2149
16442c16446
< #line 2148
---
> #line 2149
16446c16450
< #line 2148
---
> #line 2149
16449c16453
< #line 2149
---
> #line 2150
16452c16456
< #line 2151
---
> #line 2152
16454,16455d16457
< #line 2153
<   drm_free(obj_priv->page_cpu_valid, 1, 2);
16457c16459
<   drm_free(obj->driver_private, 1, 2);
---
>   drm_free(obj_priv->page_cpu_valid, 1, 2);
16458a16461,16462
>   drm_free(obj->driver_private, 1, 2);
> #line 2156
16462c16466
< #line 2157 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2158 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16474c16478
< #line 2163
---
> #line 2164
16476c16480
< #line 2167
---
> #line 2168
16478c16482
< #line 2167
---
> #line 2168
16480c16484
< #line 2167
---
> #line 2168
16482c16486
< #line 2167
---
> #line 2168
16485c16489
< #line 2167
---
> #line 2168
16488c16492
< #line 2167
---
> #line 2168
16490c16494
< #line 2167
---
> #line 2168
16492c16496
< #line 2167
---
> #line 2168
16494c16498
< #line 2167
---
> #line 2168
16501,16502c16505,16506
<                              "i" (2167), "i" (sizeof(struct bug_entry )));
< #line 2167
---
>                              "i" (2168), "i" (sizeof(struct bug_entry )));
> #line 2168
16506c16510
< #line 2167
---
> #line 2168
16512c16516
< #line 2167
---
> #line 2168
16515,16516d16518
< #line 2169
<   ret = i915_gem_object_set_domain(obj, read_domains, write_domain);
16518c16520
<   if (ret) {
---
>   ret = i915_gem_object_set_domain(obj, read_domains, write_domain);
16519a16522,16523
>   if (ret) {
> #line 2172
16524c16528
< #line 2172
---
> #line 2173
16526,16527d16529
< #line 2174
<   if (flush_domains & (unsigned int )(~ (1 | 64))) {
16528a16531,16532
>   if (flush_domains & (unsigned int )(~ (1 | 64))) {
> #line 2176
16533c16537
< #line 2177
---
> #line 2178
16537c16541
< #line 2181 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2182 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16547c16551
< #line 2188
---
> #line 2189
16549c16553
< #line 2188
---
> #line 2189
16551c16555
< #line 2188
---
> #line 2189
16553c16557
< #line 2188
---
> #line 2189
16558c16562
< #line 2189
---
> #line 2190
16560c16564
< #line 2189
---
> #line 2190
16562c16566
< #line 2192
---
> #line 2193
16564,16565d16567
< #line 2194
<     if (obj_priv->pin_count != 0) {
16567c16569
<       printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
---
>     if (obj_priv->pin_count != 0) {
16569c16571
<       mutex_unlock(& dev->struct_mutex);
---
>       printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
16570a16573,16574
>       mutex_unlock(& dev->struct_mutex);
> #line 2198
16575,16576d16578
< #line 2200
<     ret = i915_gem_object_unbind(obj);
16578c16580
<     if (ret != 0) {
---
>     ret = i915_gem_object_unbind(obj);
16579a16582,16583
>     if (ret != 0) {
> #line 2203
16582,16583d16585
< #line 2204
<       mutex_unlock(& dev->struct_mutex);
16584a16587,16588
>       mutex_unlock(& dev->struct_mutex);
> #line 2206
16590c16594
< #line 2210
---
> #line 2211
16594c16598
< #line 2213 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2214 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16628c16632
< #line 2216
---
> #line 2217
16630,16631d16633
< #line 2220
<   if (dev_priv->mm.suspended) {
16632a16635,16636
>   if (dev_priv->mm.suspended) {
> #line 2222
16637c16641
< #line 2226
---
> #line 2227
16639c16643
< #line 2228
---
> #line 2229
16641c16645
< #line 2232
---
> #line 2233
16643c16647
< #line 2234
---
> #line 2235
16645,16646d16648
< #line 2237
<   if (seqno == (uint32_t )0) {
16648c16650
<     mutex_unlock(& dev->struct_mutex);
---
>   if (seqno == (uint32_t )0) {
16649a16652,16653
>     mutex_unlock(& dev->struct_mutex);
> #line 2240
16654,16655d16657
< #line 2242
<   dev_priv->mm.waiting_gem_seqno = seqno;
16657c16659
<   last_seqno = 0;
---
>   dev_priv->mm.waiting_gem_seqno = seqno;
16659c16661
<   stuck = 0;
---
>   last_seqno = 0;
16661c16663
<   while (1) {
---
>   stuck = 0;
16663c16665
<     cur_seqno = i915_get_gem_seqno(dev);
---
>   while (1) {
16664a16667,16668
>     cur_seqno = i915_get_gem_seqno(dev);
> #line 2248
16666,16667d16669
< #line 2247
<     if (tmp) {
16668a16671,16672
>     if (tmp) {
> #line 2249
16673,16674d16676
< #line 2249
<     if (last_seqno == cur_seqno) {
16675a16678,16679
>     if (last_seqno == cur_seqno) {
> #line 2251
16677c16681
< #line 2250
---
> #line 2251
16679,16680d16682
< #line 2250
<       if (tmp___0 > 100) {
16682c16684
<         printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
---
>       if (tmp___0 > 100) {
16684c16686
<         dev_priv->mm.wedged = 1;
---
>         printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
16686c16688
<         __wake_up(& dev_priv->irq_queue, 1, 1, (void *)0);
---
>         dev_priv->mm.wedged = 1;
16687a16690,16691
>         __wake_up(& dev_priv->irq_queue, 1, 1, (void *)0);
> #line 2255
16695,16696d16698
< #line 2257
<     msleep(10);
16697a16700,16701
>     msleep(10);
> #line 2259
16700c16704
< #line 2260
---
> #line 2261
16702c16706
< #line 2262
---
> #line 2263
16704c16708
< #line 2267
---
> #line 2268
16706c16710
< #line 2267
---
> #line 2268
16708c16712
< #line 2267
---
> #line 2268
16710c16714
< #line 2267
---
> #line 2268
16713c16717
< #line 2267
---
> #line 2268
16716c16720
< #line 2267
---
> #line 2268
16718c16722
< #line 2267
---
> #line 2268
16720c16724
< #line 2267
---
> #line 2268
16722c16726
< #line 2267
---
> #line 2268
16729,16730c16733,16734
<                              "i" (2267), "i" (sizeof(struct bug_entry )));
< #line 2267
---
>                              "i" (2268), "i" (sizeof(struct bug_entry )));
> #line 2268
16734c16738
< #line 2267
---
> #line 2268
16740c16744
< #line 2267
---
> #line 2268
16743c16747
< #line 2268
---
> #line 2269
16745c16749
< #line 2268
---
> #line 2269
16747c16751
< #line 2268
---
> #line 2269
16749c16753
< #line 2268
---
> #line 2269
16752c16756
< #line 2268
---
> #line 2269
16755c16759
< #line 2268
---
> #line 2269
16757c16761
< #line 2268
---
> #line 2269
16759c16763
< #line 2268
---
> #line 2269
16761c16765
< #line 2268
---
> #line 2269
16768,16769c16772,16773
<                              "i" (2268), "i" (sizeof(struct bug_entry )));
< #line 2268
---
>                              "i" (2269), "i" (sizeof(struct bug_entry )));
> #line 2269
16773c16777
< #line 2268
---
> #line 2269
16779c16783
< #line 2268
---
> #line 2269
16782c16786
< #line 2273
---
> #line 2274
16784c16788
< #line 2273
---
> #line 2274
16786c16790
< #line 2273
---
> #line 2274
16788c16792
< #line 2273
---
> #line 2274
16791c16795
< #line 2273
---
> #line 2274
16794c16798
< #line 2273
---
> #line 2274
16796c16800
< #line 2273
---
> #line 2274
16798c16802
< #line 2273
---
> #line 2274
16800c16804
< #line 2273
---
> #line 2274
16807,16808c16811,16812
<                              "i" (2273), "i" (sizeof(struct bug_entry )));
< #line 2273
---
>                              "i" (2274), "i" (sizeof(struct bug_entry )));
> #line 2274
16812c16816
< #line 2273
---
> #line 2274
16818c16822
< #line 2273
---
> #line 2274
16821,16822d16824
< #line 2276
<   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
16824c16826
<   if (ret) {
---
>   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
16825a16828,16829
>   if (ret) {
> #line 2279
16830c16834
< #line 2280
---
> #line 2281
16832c16836
< #line 2280
---
> #line 2281
16834c16838
< #line 2280
---
> #line 2281
16836c16840
< #line 2280
---
> #line 2281
16839c16843
< #line 2280
---
> #line 2281
16842c16846
< #line 2280
---
> #line 2281
16844c16848
< #line 2280
---
> #line 2281
16846c16850
< #line 2280
---
> #line 2281
16848c16852
< #line 2280
---
> #line 2281
16855,16856c16859,16860
<                              "i" (2280), "i" (sizeof(struct bug_entry )));
< #line 2280
---
>                              "i" (2281), "i" (sizeof(struct bug_entry )));
> #line 2281
16860c16864
< #line 2280
---
> #line 2281
16866c16870
< #line 2280
---
> #line 2281
16869c16873
< #line 2281
---
> #line 2282
16871c16875
< #line 2281
---
> #line 2282
16873c16877
< #line 2281
---
> #line 2282
16875c16879
< #line 2281
---
> #line 2282
16878c16882
< #line 2281
---
> #line 2282
16881c16885
< #line 2281
---
> #line 2282
16883c16887
< #line 2281
---
> #line 2282
16885c16889
< #line 2281
---
> #line 2282
16887c16891
< #line 2281
---
> #line 2282
16894,16895c16898,16899
<                              "i" (2281), "i" (sizeof(struct bug_entry )));
< #line 2281
---
>                              "i" (2282), "i" (sizeof(struct bug_entry )));
> #line 2282
16899c16903
< #line 2281
---
> #line 2282
16905c16909
< #line 2281
---
> #line 2282
16908c16912
< #line 2282
---
> #line 2283
16910c16914
< #line 2282
---
> #line 2283
16912c16916
< #line 2282
---
> #line 2283
16914c16918
< #line 2282
---
> #line 2283
16917c16921
< #line 2282
---
> #line 2283
16920c16924
< #line 2282
---
> #line 2283
16922c16926
< #line 2282
---
> #line 2283
16924c16928
< #line 2282
---
> #line 2283
16926c16930
< #line 2282
---
> #line 2283
16933,16934c16937,16938
<                              "i" (2282), "i" (sizeof(struct bug_entry )));
< #line 2282
---
>                              "i" (2283), "i" (sizeof(struct bug_entry )));
> #line 2283
16938c16942
< #line 2282
---
> #line 2283
16944c16948
< #line 2282
---
> #line 2283
16947c16951
< #line 2283
---
> #line 2284
16949c16953
< #line 2283
---
> #line 2284
16951c16955
< #line 2283
---
> #line 2284
16953c16957
< #line 2283
---
> #line 2284
16956c16960
< #line 2283
---
> #line 2284
16959c16963
< #line 2283
---
> #line 2284
16961c16965
< #line 2283
---
> #line 2284
16963c16967
< #line 2283
---
> #line 2284
16965c16969
< #line 2283
---
> #line 2284
16972,16973c16976,16977
<                              "i" (2283), "i" (sizeof(struct bug_entry )));
< #line 2283
---
>                              "i" (2284), "i" (sizeof(struct bug_entry )));
> #line 2284
16977c16981
< #line 2283
---
> #line 2284
16983c16987
< #line 2283
---
> #line 2284
16986c16990
< #line 2284
---
> #line 2285
16990c16994
< #line 2287 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2288 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16999c17003
< #line 2290
---
> #line 2291
17001,17002d17004
< #line 2298
<   if (! ((((dev->pci_device == 10690 || dev->pci_device == 10674) || dev->pci_device == 10706) || dev->pci_device == 10818) || ((dev->pci_device == 11778 || dev->pci_device == 11794) || dev->pci_device == 11810))) {
17003a17006,17007
>   if (! ((((dev->pci_device == 10690 || dev->pci_device == 10674) || dev->pci_device == 10706) || dev->pci_device == 10818) || ((dev->pci_device == 11778 || dev->pci_device == 11794) || dev->pci_device == 11810))) {
> #line 2300
17008,17009d17011
< #line 2301
<   obj = drm_gem_object_alloc(dev, 4096);
17011c17013
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 4096);
17013c17015
<     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
---
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
17014a17017,17018
>     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
> #line 2305
17019c17023
< #line 2306
---
> #line 2307
17021,17022d17024
< #line 2308
<   ret = i915_gem_object_pin(obj, 4096);
17024c17026
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096);
17026c17028
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
17027a17030,17031
>     drm_gem_object_unreference(obj);
> #line 2312
17032,17033d17035
< #line 2314
<   dev_priv->status_gfx_addr = obj_priv->gtt_offset;
17035c17037
<   dev_priv->hws_map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
---
>   dev_priv->status_gfx_addr = obj_priv->gtt_offset;
17037c17039
<   dev_priv->hws_map.size = 4096;
---
>   dev_priv->hws_map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
17039c17041
<   dev_priv->hws_map.type = 0;
---
>   dev_priv->hws_map.size = 4096;
17041c17043
<   dev_priv->hws_map.flags = 0;
---
>   dev_priv->hws_map.type = 0;
17042a17045,17046
>   dev_priv->hws_map.flags = 0;
> #line 2320
17044,17046c17048,17050
< #line 2321
<   drm_core_ioremap(& dev_priv->hws_map, dev);
< #line 2322
---
> #line 2324
>   drm_core_ioremap_wc(& dev_priv->hws_map, dev);
> #line 2325
17048c17052
< #line 2323
---
> #line 2326
17050c17054
< #line 2324
---
> #line 2327
17052c17056
< #line 2325
---
> #line 2328
17054c17058
< #line 2326
---
> #line 2329
17059c17063
< #line 2328
---
> #line 2331
17061c17065
< #line 2329
---
> #line 2332
17063c17067
< #line 2330
---
> #line 2333
17065c17069
< #line 2331
---
> #line 2334
17067c17071
< #line 2332
---
> #line 2335
17069c17073
< #line 2332
---
> #line 2335
17071c17075
< #line 2332
---
> #line 2335
17076c17080
< #line 2332
---
> #line 2335
17079c17083
< #line 2334
---
> #line 2337
17083c17087
< #line 2337 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2340 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17092c17096
< #line 2340
---
> #line 2343
17094c17098
< #line 2345
---
> #line 2348
17096c17100
< #line 2346
---
> #line 2349
17098c17102
< #line 2347
---
> #line 2350
17103c17107
< #line 2349
---
> #line 2352
17105c17109
< #line 2350
---
> #line 2353
17107c17111
< #line 2351
---
> #line 2354
17109c17113
< #line 2352
---
> #line 2355
17114c17118
< #line 2354
---
> #line 2357
17116c17120
< #line 2356
---
> #line 2359
17118c17122
< #line 2357
---
> #line 2360
17120c17124
< #line 2358
---
> #line 2361
17122c17126
< #line 2359
---
> #line 2362
17127c17131
< #line 2363
---
> #line 2366
17129c17133
< #line 2364
---
> #line 2367
17131c17135
< #line 2366
---
> #line 2369
17133c17137
< #line 2367
---
> #line 2370
17135c17139
< #line 2368
---
> #line 2371
17137,17140d17140
< #line 2369
<   dev_priv->ring.map.flags = 0;
< #line 2370
<   dev_priv->ring.map.mtrr = 0;
17142c17142
<   drm_core_ioremap(& dev_priv->ring.map, dev);
---
>   dev_priv->ring.map.flags = 0;
17143a17144,17147
>   dev_priv->ring.map.mtrr = 0;
> #line 2375
>   drm_core_ioremap_wc(& dev_priv->ring.map, dev);
> #line 2376
17145c17149
< #line 2374
---
> #line 2377
17147c17151
< #line 2375
---
> #line 2378
17149c17153
< #line 2376
---
> #line 2379
17151c17155
< #line 2377
---
> #line 2380
17156c17160
< #line 2379
---
> #line 2382
17158,17159d17161
< #line 2380
<   dev_priv->ring.virtual_start = dev_priv->ring.map.handle;
17160a17163,17164
>   dev_priv->ring.virtual_start = dev_priv->ring.map.handle;
> #line 2386
17162c17166
< #line 2384
---
> #line 2387
17164c17168
< #line 2385
---
> #line 2388
17166,17167d17169
< #line 2386
<   writel(0, (dev_priv->mmio_map)->handle + 8248);
17168a17171,17172
>   writel(0, (dev_priv->mmio_map)->handle + 8248);
> #line 2392
17170c17174
< #line 2390
---
> #line 2393
17172c17176
< #line 2396
---
> #line 2399
17174c17178
< #line 2398
---
> #line 2401
17178c17182
< #line 2401 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2404 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17184c17188
< #line 2404
---
> #line 2407
17186c17190
< #line 2406
---
> #line 2409
17188c17192
< #line 2407
---
> #line 2410
17193c17197
< #line 2409
---
> #line 2412
17195c17199
< #line 2411
---
> #line 2414
17197c17201
< #line 2412
---
> #line 2415
17199c17203
< #line 2413
---
> #line 2416
17201c17205
< #line 2414
---
> #line 2417
17203c17207
< #line 2416
---
> #line 2419
17205c17209
< #line 2417
---
> #line 2420
17207c17211
< #line 2418
---
> #line 2421
17209c17213
< #line 2419
---
> #line 2422
17211,17212d17214
< #line 2420
<     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
17213a17216,17217
>     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
> #line 2426
17218c17222
< #line 2425
---
> #line 2428
17222c17226
< #line 2427 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2430 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17241,17242d17244
< #line 2431
<   dev_priv = dev->dev_private;
17243a17246,17247
>   dev_priv = dev->dev_private;
> #line 2437
17245c17249
< #line 2435
---
> #line 2438
17247c17251
< #line 2436
---
> #line 2439
17252c17256
< #line 2439
---
> #line 2442
17254c17258
< #line 2440
---
> #line 2443
17256c17260
< #line 2441
---
> #line 2444
17261c17265
< #line 2443
---
> #line 2446
17263c17267
< #line 2444
---
> #line 2447
17265c17269
< #line 2444
---
> #line 2447
17267c17271
< #line 2444
---
> #line 2447
17269c17273
< #line 2444
---
> #line 2447
17272c17276
< #line 2444
---
> #line 2447
17275c17279
< #line 2444
---
> #line 2447
17277c17281
< #line 2444
---
> #line 2447
17279c17283
< #line 2444
---
> #line 2447
17281c17285
< #line 2444
---
> #line 2447
17288,17289c17292,17293
<                              "i" (2444), "i" (sizeof(struct bug_entry )));
< #line 2444
---
>                              "i" (2447), "i" (sizeof(struct bug_entry )));
> #line 2447
17293c17297
< #line 2444
---
> #line 2447
17299c17303
< #line 2444
---
> #line 2447
17302c17306
< #line 2445
---
> #line 2448
17304c17308
< #line 2445
---
> #line 2448
17306c17310
< #line 2445
---
> #line 2448
17308c17312
< #line 2445
---
> #line 2448
17311c17315
< #line 2445
---
> #line 2448
17314c17318
< #line 2445
---
> #line 2448
17316c17320
< #line 2445
---
> #line 2448
17318c17322
< #line 2445
---
> #line 2448
17320c17324
< #line 2445
---
> #line 2448
17327,17328c17331,17332
<                              "i" (2445), "i" (sizeof(struct bug_entry )));
< #line 2445
---
>                              "i" (2448), "i" (sizeof(struct bug_entry )));
> #line 2448
17332c17336
< #line 2445
---
> #line 2448
17338c17342
< #line 2445
---
> #line 2448
17341c17345
< #line 2446
---
> #line 2449
17343c17347
< #line 2446
---
> #line 2449
17345c17349
< #line 2446
---
> #line 2449
17347c17351
< #line 2446
---
> #line 2449
17350c17354
< #line 2446
---
> #line 2449
17353c17357
< #line 2446
---
> #line 2449
17355c17359
< #line 2446
---
> #line 2449
17357c17361
< #line 2446
---
> #line 2449
17359c17363
< #line 2446
---
> #line 2449
17366,17367c17370,17371
<                              "i" (2446), "i" (sizeof(struct bug_entry )));
< #line 2446
---
>                              "i" (2449), "i" (sizeof(struct bug_entry )));
> #line 2449
17371c17375
< #line 2446
---
> #line 2449
17377c17381
< #line 2446
---
> #line 2449
17380c17384
< #line 2447
---
> #line 2450
17382c17386
< #line 2447
---
> #line 2450
17384c17388
< #line 2447
---
> #line 2450
17386c17390
< #line 2447
---
> #line 2450
17389c17393
< #line 2447
---
> #line 2450
17392c17396
< #line 2447
---
> #line 2450
17394c17398
< #line 2447
---
> #line 2450
17396c17400
< #line 2447
---
> #line 2450
17398c17402
< #line 2447
---
> #line 2450
17405,17406c17409,17410
<                              "i" (2447), "i" (sizeof(struct bug_entry )));
< #line 2447
---
>                              "i" (2450), "i" (sizeof(struct bug_entry )));
> #line 2450
17410c17414
< #line 2447
---
> #line 2450
17416c17420
< #line 2447
---
> #line 2450
17419c17423
< #line 2448
---
> #line 2451
17421c17425
< #line 2449
---
> #line 2452
17423c17427
< #line 2451
---
> #line 2454
17425c17429
< #line 2453
---
> #line 2456
17429c17433
< #line 2456 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2459 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17435c17439
< #line 2462
---
> #line 2465
17437c17441
< #line 2463
---
> #line 2466
17439c17443
< #line 2464
---
> #line 2467
17441c17445
< #line 2465
---
> #line 2468
17446c17450
< #line 2466
---
> #line 2469
17448c17452
< #line 2468
---
> #line 2471
17450c17454
< #line 2470
---
> #line 2473
17454c17458
< #line 2473 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2476 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17461c17465
< #line 2477
---
> #line 2480
17463c17467
< #line 2479
---
> #line 2482
17465c17469
< #line 2481
---
> #line 2484
17467c17471
< #line 2482
---
> #line 2485
17469c17473
< #line 2483
---
> #line 2486
17471c17475
< #line 2484
---
> #line 2487
17477c17481
< #line 2486
---
> #line 2489
17482c17486
< #line 2489
---
> #line 2492
17484c17488
< #line 2490
---
> #line 2493
17488c17492
< #line 2492 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2495 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17496c17500
< #line 2495
---
> #line 2498
17498c17502
< #line 2497
---
> #line 2500
17500c17504
< #line 2498
---
> #line 2501
17502c17506
< #line 2499
---
> #line 2502
17504c17508
< #line 2500
---
> #line 2503
17506c17510
< #line 2501
---
> #line 2504
17508c17512
< #line 2501
---
> #line 2504
17510c17514
< #line 2501
---
> #line 2504
17512c17516
< #line 2501
---
> #line 2504
17514c17518
< #line 2501
---
> #line 2504
17516c17520
< #line 2501
---
> #line 2504
17518c17522
< #line 2501
---
> #line 2504
17520c17524
< #line 2501
---
> #line 2504
17523c17527
< #line 2501
---
> #line 2504
17526c17530
< #line 2501
---
> #line 2504
17528c17532
< #line 2501
---
> #line 2504
17531c17535
< #line 2503
---
> #line 2506
17533c17537
< #line 2503
---
> #line 2506
17535c17539
< #line 2503
---
> #line 2506
17537c17541
< #line 2503
---
> #line 2506
17539c17543
< #line 2503
---
> #line 2506
17541c17545
< #line 2503
---
> #line 2506
17543c17547
< #line 2503
---
> #line 2506
17546c17550
< #line 2503
---
> #line 2506
17549c17553
< #line 2505
---
> #line 2508
17551c17555
< #line 2507
---
> #line 2510
17553c17557
< #line 2508
---
> #line 2511

4305c4305
< #line 1807 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1808 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13155c13155,13156
< __inline static int fast_user_write(unsigned long pfn , char *user_data , int l ) 
---
> __inline static int fast_user_write(unsigned long pfn , char *user_data , int l ,
>                                     int o ) 
13160c13161
< #line 200
---
> #line 201
13164c13165
< #line 204 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 205 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13189c13190
< #line 209
---
> #line 210
13191c13192
< #line 213
---
> #line 214
13193,13194d13193
< #line 215
<   user_data = (char *)((uintptr_t )args->data_ptr);
13196c13195
<   remain = args->size;
---
>   user_data = (char *)((uintptr_t )args->data_ptr);
13197a13197,13198
>   remain = args->size;
> #line 218
13199c13200
< #line 217
---
> #line 218
13202c13203
< #line 217
---
> #line 218
13204c13205
< #line 217
---
> #line 218
13207c13208
< #line 217
---
> #line 218
13210c13211
< #line 217
---
> #line 218
13212c13213
< #line 217
---
> #line 218
13216c13217
< #line 218
---
> #line 219
13219,13220d13219
< #line 221
<   mutex_lock(& dev->struct_mutex);
13222c13221
<   ret = i915_gem_object_pin(obj, 0);
---
>   mutex_lock(& dev->struct_mutex);
13224c13223
<   if (ret) {
---
>   ret = i915_gem_object_pin(obj, 0);
13226c13225
<     mutex_unlock(& dev->struct_mutex);
---
>   if (ret) {
13227a13227,13228
>     mutex_unlock(& dev->struct_mutex);
> #line 226
13232c13233
< #line 227
---
> #line 228
13234,13235d13234
< #line 229
<   if (ret) {
13236a13236,13237
>   if (ret) {
> #line 231
13241,13242d13241
< #line 232
<   obj_priv = obj->driver_private;
13244c13243
<   offset = (uint64_t )obj_priv->gtt_offset + args->offset;
---
>   obj_priv = obj->driver_private;
13245a13245,13246
>   offset = (uint64_t )obj_priv->gtt_offset + args->offset;
> #line 235
13247c13248
< #line 236
---
> #line 237
13249c13250
< #line 236
---
> #line 237
13253c13254
< #line 236
---
> #line 237
13256,13257d13256
< #line 246
<     i = offset >> 12;
13259c13258
<     o = offset & (long long )((1UL << 12) - 1UL);
---
>     i = offset >> 12;
13261c13260
<     l = remain;
---
>     o = offset & (long long )((1UL << 12) - 1UL);
13263c13262
<     if ((unsigned long )(o + l) > 1UL << 12) {
---
>     l = remain;
13264a13264,13265
>     if ((unsigned long )(o + l) > 1UL << 12) {
> #line 251
13269c13270
< #line 252
---
> #line 253
13271,13273c13272,13274
< #line 254
<     tmp___4 = fast_user_write(pfn, user_data, l);
< #line 254
---
> #line 255
>     tmp___4 = fast_user_write(pfn, user_data, l, o);
> #line 255
13277c13278
< #line 258
---
> #line 259
13279c13280
< #line 258
---
> #line 259
13281,13282d13281
< #line 264
<       if ((unsigned long )vaddr == (unsigned long )((void *)0)) {
13284c13283
<         ret = -14;
---
>       if ((unsigned long )vaddr == (unsigned long )((void *)0)) {
13285a13285,13286
>         ret = -14;
> #line 267
13290c13291
< #line 268
---
> #line 269
13292c13293
< #line 268
---
> #line 269
13294,13295d13294
< #line 272
<       iounmap(vaddr);
13297c13296
<       if (unwritten) {
---
>       iounmap(vaddr);
13299c13298
<         ret = -14;
---
>       if (unwritten) {
13300a13300,13301
>         ret = -14;
> #line 276
13306,13307d13306
< #line 279
<     remain = remain - (ssize_t )l;
13309c13308
<     user_data = user_data + l;
---
>     remain = remain - (ssize_t )l;
13310a13310,13311
>     user_data = user_data + l;
> #line 282
13314,13315d13314
< #line 290
<   i915_gem_object_unpin(obj);
13316a13316,13317
>   i915_gem_object_unpin(obj);
> #line 292
13318c13319
< #line 293
---
> #line 294
13322c13323
< #line 296 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 297 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13331c13332
< #line 305
---
> #line 306
13333c13334
< #line 307
---
> #line 308
13335,13336d13335
< #line 309
<   if (ret) {
13338c13337
<     mutex_unlock(& dev->struct_mutex);
---
>   if (ret) {
13339a13339,13340
>     mutex_unlock(& dev->struct_mutex);
> #line 312
13344c13345
< #line 314
---
> #line 315
13346c13347
< #line 316
---
> #line 317
13349,13350d13349
< #line 319
<   if ((uint64_t )written != args->size) {
13352c13351
<     mutex_unlock(& dev->struct_mutex);
---
>   if ((uint64_t )written != args->size) {
13354c13353
<     if (written < (ssize_t )0) {
---
>     mutex_unlock(& dev->struct_mutex);
13355a13355,13356
>     if (written < (ssize_t )0) {
> #line 323
13358c13359
< #line 324
---
> #line 325
13364c13365
< #line 327
---
> #line 328
13366c13367
< #line 329
---
> #line 330
13370c13371
< #line 337 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 338 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13379c13380
< #line 341
---
> #line 342
13381c13382
< #line 344
---
> #line 345
13383,13384d13383
< #line 346
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
13386c13385
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
13387a13387,13388
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 349
13392c13393
< #line 349
---
> #line 350
13394c13395
< #line 355
---
> #line 356
13396,13397d13396
< #line 357
<     drm_gem_object_unreference(obj);
13398a13398,13399
>     drm_gem_object_unreference(obj);
> #line 359
13403c13404
< #line 367
---
> #line 368
13405c13406
< #line 369
---
> #line 370
13408c13409
< #line 371
---
> #line 372
13411c13412
< #line 378
---
> #line 379
13413c13414
< #line 380
---
> #line 381
13417c13418
< #line 386 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 387 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13425c13426
< #line 390
---
> #line 391
13427,13428d13427
< #line 394
<   if (! ((dev->driver)->driver_features & 4096U)) {
13429a13429,13430
>   if (! ((dev->driver)->driver_features & 4096U)) {
> #line 396
13434,13435d13434
< #line 397
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
13437c13436
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
13438a13438,13439
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 400
13443c13444
< #line 401
---
> #line 402
13445c13446
< #line 406
---
> #line 407
13447,13448d13447
< #line 408
<   drm_gem_object_unreference(obj);
13450c13449
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
13451a13451,13452
>   mutex_unlock(& dev->struct_mutex);
> #line 411
13455c13456
< #line 416 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 417 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13464c13465
< #line 420
---
> #line 421
13466c13467
< #line 423
---
> #line 424
13468,13469d13468
< #line 425
<   if (! ((dev->driver)->driver_features & 4096U)) {
13470a13470,13471
>   if (! ((dev->driver)->driver_features & 4096U)) {
> #line 427
13475,13476d13475
< #line 428
<   mutex_lock(& dev->struct_mutex);
13478c13477
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
---
>   mutex_lock(& dev->struct_mutex);
13480c13479
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
13482c13481
<     mutex_unlock(& dev->struct_mutex);
---
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
13483a13483,13484
>     mutex_unlock(& dev->struct_mutex);
> #line 433
13488c13489
< #line 439
---
> #line 440
13490,13491d13490
< #line 442
<   if (obj->write_domain & 1U && obj_priv->pin_count) {
13493c13492
<     i915_gem_clflush_object(obj);
---
>   if (obj->write_domain & 1U && obj_priv->pin_count) {
13494a13494,13495
>     i915_gem_clflush_object(obj);
> #line 445
13499,13500d13499
< #line 446
<   drm_gem_object_unreference(obj);
13502c13501
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
13503a13503,13504
>   mutex_unlock(& dev->struct_mutex);
> #line 449
13507c13508
< #line 458 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 459 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13519c13520
< #line 462
---
> #line 463
13521,13522d13521
< #line 467
<   if (! ((dev->driver)->driver_features & 4096U)) {
13523a13523,13524
>   if (! ((dev->driver)->driver_features & 4096U)) {
> #line 469
13528,13529d13528
< #line 470
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
13531c13530
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
13532a13532,13533
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 473
13537c13538
< #line 474
---
> #line 475
13539c13540
< #line 476
---
> #line 477
13541,13542d13541
< #line 476
<   down_write(& (tmp->mm)->mmap_sem);
13543a13543,13544
>   down_write(& (tmp->mm)->mmap_sem);
> #line 478
13545c13546
< #line 480
---
> #line 481
13547,13548d13547
< #line 480
<   up_write(& (tmp___0->mm)->mmap_sem);
13550c13549
<   mutex_lock(& dev->struct_mutex);
---
>   up_write(& (tmp___0->mm)->mmap_sem);
13552c13551
<   drm_gem_object_unreference(obj);
---
>   mutex_lock(& dev->struct_mutex);
13554c13553
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
13555a13555,13556
>   mutex_unlock(& dev->struct_mutex);
> #line 485
13557,13558d13557
< #line 484
<   if (tmp___1) {
13559a13559,13560
>   if (tmp___1) {
> #line 486
13564c13565
< #line 487
---
> #line 488
13566c13567
< #line 489
---
> #line 490
13570c13571
< #line 492 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 493 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13578,13579d13578
< #line 495
<   obj_priv = obj->driver_private;
13580a13580,13581
>   obj_priv = obj->driver_private;
> #line 497
13582,13583d13582
< #line 499
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((void *)0)) {
13584a13584,13585
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((void *)0)) {
> #line 501
13589c13590
< #line 503
---
> #line 504
13591c13592
< #line 503
---
> #line 504
13593c13594
< #line 503
---
> #line 504
13597c13598
< #line 503
---
> #line 504
13600,13601d13600
< #line 504
<     if ((unsigned long )*(obj_priv->page_list + i) != (unsigned long )((void *)0)) {
13603c13602
<       if (obj_priv->dirty) {
---
>     if ((unsigned long )*(obj_priv->page_list + i) != (unsigned long )((void *)0)) {
13604a13604,13605
>       if (obj_priv->dirty) {
> #line 507
13609,13610d13609
< #line 507
<       mark_page_accessed(*(obj_priv->page_list + i));
13611a13611,13612
>       mark_page_accessed(*(obj_priv->page_list + i));
> #line 509
13616c13617
< #line 503
---
> #line 504
13619c13620
< #line 510
---
> #line 511
13621c13622
< #line 512
---
> #line 513
13624,13625d13624
< #line 515
<   obj_priv->page_list = (void *)0;
13626a13626,13627
>   obj_priv->page_list = (void *)0;
> #line 517
13630c13631
< #line 518 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 519 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13638,13639d13638
< #line 521
<   dev = obj->dev;
13641c13640
<   dev_priv = dev->dev_private;
---
>   dev = obj->dev;
13642a13642,13643
>   dev_priv = dev->dev_private;
> #line 524
13644,13645d13644
< #line 526
<   if (! obj_priv->active) {
13647c13646
<     drm_gem_object_reference(obj);
---
>   if (! obj_priv->active) {
13648a13648,13649
>     drm_gem_object_reference(obj);
> #line 529
13653c13654
< #line 531
---
> #line 532
13655c13656
< #line 533
---
> #line 534
13659c13660
< #line 536 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 537 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13667,13668d13667
< #line 539
<   dev = obj->dev;
13670c13669
<   dev_priv = dev->dev_private;
---
>   dev = obj->dev;
13671a13671,13672
>   dev_priv = dev->dev_private;
> #line 542
13673,13674d13673
< #line 544
<   if (obj_priv->pin_count != 0) {
13675a13675,13676
>   if (obj_priv->pin_count != 0) {
> #line 546
13678c13679
< #line 547
---
> #line 548
13681,13682d13681
< #line 549
<   if (obj_priv->active) {
13684c13683
<     obj_priv->active = 0;
---
>   if (obj_priv->active) {
13685a13685,13686
>     obj_priv->active = 0;
> #line 552
13690c13691
< #line 554
---
> #line 555
13694c13695
< #line 564 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 565 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13708c13709
< #line 567
---
> #line 568
13710c13711
< #line 573
---
> #line 574
13712,13713d13712
< #line 573
<   request = tmp;
13715c13714
<   if ((unsigned long )request == (unsigned long )((void *)0)) {
---
>   request = tmp;
13716a13716,13717
>   if ((unsigned long )request == (unsigned long )((void *)0)) {
> #line 576
13721,13722d13721
< #line 580
<   seqno = dev_priv->mm.next_gem_seqno;
13724c13723
<   dev_priv->mm.next_gem_seqno = dev_priv->mm.next_gem_seqno + (uint32_t )1;
---
>   seqno = dev_priv->mm.next_gem_seqno;
13726c13725
<   if (dev_priv->mm.next_gem_seqno == (uint32_t )0) {
---
>   dev_priv->mm.next_gem_seqno = dev_priv->mm.next_gem_seqno + (uint32_t )1;
13727a13727,13728
>   if (dev_priv->mm.next_gem_seqno == (uint32_t )0) {
> #line 584
13732c13733
< #line 585
---
> #line 586
13734c13735
< #line 585
---
> #line 586
13736c13737
< #line 585
---
> #line 586
13741,13753d13741
< #line 585
<     outcount = 0;
< #line 585
<     outring = dev_priv->ring.tail;
< #line 585
<     ringmask = dev_priv->ring.tail_mask;
< #line 585
<     virt = dev_priv->ring.virtual_start;
< #line 585
<     break;
<   }
< #line 586
<   while (1) {
13755c13743
<     *((unsigned int volatile   *)(virt + outring)) = (33 << 23) | 1;
---
>     outcount = 0;
13757c13745
<     outcount = outcount + 1U;
---
>     outring = dev_priv->ring.tail;
13759c13747
<     outring = outring + 4U;
---
>     ringmask = dev_priv->ring.tail_mask;
13761c13749
<     outring = outring & ringmask;
---
>     virt = dev_priv->ring.virtual_start;
13768c13756
<     *((unsigned int volatile   *)(virt + outring)) = 32 << 2;
---
>     *((unsigned int volatile   *)(virt + outring)) = (33 << 23) | 1;
13781c13769
<     *((unsigned int volatile   *)(virt + outring)) = seqno;
---
>     *((unsigned int volatile   *)(virt + outring)) = 32 << 2;
13791c13779
< #line 590
---
> #line 589
13793,13795c13781,13783
< #line 590
<     *((unsigned int volatile   *)(virt + outring)) = (2 << 23) | 0;
< #line 590
---
> #line 589
>     *((unsigned int volatile   *)(virt + outring)) = seqno;
> #line 589
13797c13785
< #line 590
---
> #line 589
13799c13787
< #line 590
---
> #line 589
13801c13789
< #line 590
---
> #line 589
13807c13795
<     dev_priv->ring.tail = outring;
---
>     *((unsigned int volatile   *)(virt + outring)) = (2 << 23) | 0;
13809c13797
<     dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
---
>     outcount = outcount + 1U;
13811c13799,13801
<     writel(outring, dev_priv->regs + 8240);
---
>     outring = outring + 4U;
> #line 591
>     outring = outring & ringmask;
13815c13805
< #line 593
---
> #line 592
13817c13807,13818
< #line 593
---
> #line 592
>     dev_priv->ring.tail = outring;
> #line 592
>     dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
> #line 592
>     writel(outring, dev_priv->regs + 8240);
> #line 592
>     break;
>   }
> #line 594
>   while (1) {
> #line 594
13819c13820
< #line 593
---
> #line 594
13824c13825
< #line 593
---
> #line 594
13827,13828d13827
< #line 595
<   request->seqno = seqno;
13830c13829
<   request->emitted_jiffies = jiffies;
---
>   request->seqno = seqno;
13832c13831
<   request->flush_domains = flush_domains;
---
>   request->emitted_jiffies = jiffies;
13834c13833
<   was_empty = list_empty(& dev_priv->mm.request_list);
---
>   request->flush_domains = flush_domains;
13835a13835,13836
>   was_empty = list_empty(& dev_priv->mm.request_list);
> #line 600
13837,13838d13837
< #line 601
<   if (was_empty && ! dev_priv->mm.suspended) {
13839a13839,13840
>   if (was_empty && ! dev_priv->mm.suspended) {
> #line 603
13844c13845
< #line 603
---
> #line 604
13848c13849
< #line 612 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 613 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13860,13861d13860
< #line 615
<   dev_priv = dev->dev_private;
13863c13862
<   cmd = ((4 << 23) | 0) | (1 << 2);
---
>   dev_priv = dev->dev_private;
13864a13864,13865
>   cmd = ((4 << 23) | 0) | (1 << 2);
> #line 618
13866,13867d13866
< #line 621
<   if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
13868a13868,13869
>   if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
> #line 623
13873c13874
< #line 623
---
> #line 624
13875c13876
< #line 623
---
> #line 624
13877c13878
< #line 623
---
> #line 624
13882,13892d13882
< #line 623
<     outcount = 0;
< #line 623
<     outring = dev_priv->ring.tail;
< #line 623
<     ringmask = dev_priv->ring.tail_mask;
< #line 623
<     virt = dev_priv->ring.virtual_start;
< #line 623
<     break;
<   }
13894,13896c13884
<   while (1) {
< #line 624
<     *((unsigned int volatile   *)(virt + outring)) = cmd;
---
>     outcount = 0;
13898c13886
<     outcount = outcount + 1U;
---
>     outring = dev_priv->ring.tail;
13900c13888
<     outring = outring + 4U;
---
>     ringmask = dev_priv->ring.tail_mask;
13902c13890
<     outring = outring & ringmask;
---
>     virt = dev_priv->ring.virtual_start;
13909c13897
<     *((unsigned int volatile   *)(virt + outring)) = 0;
---
>     *((unsigned int volatile   *)(virt + outring)) = cmd;
13922c13910
<     dev_priv->ring.tail = outring;
---
>     *((unsigned int volatile   *)(virt + outring)) = 0;
13924c13912
<     dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
---
>     outcount = outcount + 1U;
13926c13914,13916
<     writel(outring, dev_priv->regs + 8240);
---
>     outring = outring + 4U;
> #line 626
>     outring = outring & ringmask;
13930a13921,13931
>   while (1) {
> #line 627
>     dev_priv->ring.tail = outring;
> #line 627
>     dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
> #line 627
>     writel(outring, dev_priv->regs + 8240);
> #line 627
>     break;
>   }
> #line 628
13934c13935
< #line 634 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 635 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
13950c13951
< #line 638
---
> #line 639
13952c13953
< #line 643
---
> #line 644
13954c13955
< #line 643
---
> #line 644
13956c13957
< #line 643
---
> #line 644
13958c13959
< #line 643
---
> #line 644
13963c13964
< #line 647
---
> #line 648
13965c13966
< #line 647
---
> #line 648
13967c13968
< #line 650
---
> #line 651
13969,13970d13969
< #line 656
<     if (obj_priv->last_rendering_seqno != request->seqno) {
13971a13971,13972
>     if (obj_priv->last_rendering_seqno != request->seqno) {
> #line 658
13976,13977d13976
< #line 663
<     if (obj->write_domain != (uint32_t )0) {
13978a13978,13979
>     if (obj->write_domain != (uint32_t )0) {
> #line 665
13981c13982
< #line 667
---
> #line 668
13985c13986
< #line 671
---
> #line 672
13987c13988
< #line 677
---
> #line 678
13989c13990
< #line 677
---
> #line 678
13991c13992
< #line 677
---
> #line 678
13993c13994
< #line 677
---
> #line 678
13995c13996
< #line 677
---
> #line 678
13997c13998
< #line 677
---
> #line 678
14001c14002
< #line 677
---
> #line 678
14004c14005
< #line 679
---
> #line 680
14006,14007d14006
< #line 681
<       if (obj___0->write_domain & request->flush_domains) {
14009c14008
<         obj___0->write_domain = 0;
---
>       if (obj___0->write_domain & request->flush_domains) {
14010a14010,14011
>         obj___0->write_domain = 0;
> #line 684
14015c14016
< #line 677
---
> #line 678
14017c14018
< #line 677
---
> #line 678
14019c14020
< #line 677
---
> #line 678
14025c14026
< #line 688
---
> #line 689
14029c14030
< #line 693 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 694 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14035c14036
< #line 696
---
> #line 697
14039c14040
< #line 699 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 700 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14045c14046
< #line 702
---
> #line 703
14047c14048
< #line 704
---
> #line 705
14051c14052
< #line 710 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 711 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14063c14064
< #line 713
---
> #line 714
14065c14066
< #line 716
---
> #line 717
14067c14068
< #line 718
---
> #line 719
14069c14070
< #line 718
---
> #line 719
14071c14072
< #line 718
---
> #line 719
14073c14074
< #line 718
---
> #line 719
14078c14079
< #line 722
---
> #line 723
14080c14081
< #line 722
---
> #line 723
14082c14083
< #line 725
---
> #line 726
14084c14085
< #line 727
---
> #line 728
14086c14087
< #line 727
---
> #line 728
14088c14089
< #line 729
---
> #line 730
14090,14091d14090
< #line 731
<       list_del(& request->list);
14092a14092,14093
>       list_del(& request->list);
> #line 733
14095c14096
< #line 734
---
> #line 735
14099c14100
< #line 736
---
> #line 737
14103c14104
< #line 738 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 739 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14112c14113
< #line 744
---
> #line 745
14114c14115
< #line 744
---
> #line 745
14116c14117
< #line 746
---
> #line 747
14118,14119d14118
< #line 748
<   mutex_lock(& dev->struct_mutex);
14121c14120
<   i915_gem_retire_requests(dev);
---
>   mutex_lock(& dev->struct_mutex);
14122a14122,14123
>   i915_gem_retire_requests(dev);
> #line 751
14124c14125
< #line 750
---
> #line 751
14126c14127
< #line 750
---
> #line 751
14130c14131
< #line 752
---
> #line 753
14136,14137d14136
< #line 753
<   mutex_unlock(& dev->struct_mutex);
14138a14138,14139
>   mutex_unlock(& dev->struct_mutex);
> #line 755
14142c14143
< #line 760 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 761 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14162,14163d14162
< #line 763
<   dev_priv = dev->dev_private;
14164a14164,14165
>   dev_priv = dev->dev_private;
> #line 765
14166c14167
< #line 766
---
> #line 767
14168c14169
< #line 766
---
> #line 767
14170c14171
< #line 766
---
> #line 767
14172c14173
< #line 766
---
> #line 767
14174c14175
< #line 766
---
> #line 767
14181,14182c14182,14183
<                              "i" (766), "i" (sizeof(struct bug_entry )));
< #line 766
---
>                              "i" (767), "i" (sizeof(struct bug_entry )));
> #line 767
14186c14187
< #line 766
---
> #line 767
14192c14193
< #line 766
---
> #line 767
14195c14196
< #line 768
---
> #line 769
14197c14198
< #line 768
---
> #line 769
14199c14200
< #line 768
---
> #line 769
14203,14204d14203
< #line 769
<     dev_priv->mm.waiting_gem_seqno = seqno;
14206c14205
<     i915_user_irq_get(dev);
---
>     dev_priv->mm.waiting_gem_seqno = seqno;
14207a14207,14208
>     i915_user_irq_get(dev);
> #line 772
14209c14210
< #line 771
---
> #line 772
14211c14212
< #line 771
---
> #line 772
14213c14214
< #line 771
---
> #line 772
14217c14218
< #line 771
---
> #line 772
14219c14220
< #line 771
---
> #line 772
14221c14222
< #line 771
---
> #line 772
14223c14224
< #line 771
---
> #line 772
14225c14226
< #line 771
---
> #line 772
14227c14228
< #line 771
---
> #line 772
14229c14230
< #line 771
---
> #line 772
14231c14232
< #line 771
---
> #line 772
14233c14234
< #line 771
---
> #line 772
14235c14236
< #line 771
---
> #line 772
14237c14238
< #line 771
---
> #line 772
14239c14240
< #line 771
---
> #line 772
14241c14242
< #line 771
---
> #line 772
14246c14247
< #line 771
---
> #line 772
14248c14249
< #line 771
---
> #line 772
14250c14251
< #line 771
---
> #line 772
14254c14255
< #line 771
---
> #line 772
14256c14257
< #line 771
---
> #line 772
14259c14260
< #line 771
---
> #line 772
14261c14262
< #line 771
---
> #line 772
14265c14266
< #line 771
---
> #line 772
14267c14268
< #line 771
---
> #line 772
14271c14272
< #line 771
---
> #line 772
14273,14274d14273
< #line 775
<     i915_user_irq_put(dev);
14275a14275,14276
>     i915_user_irq_put(dev);
> #line 777
14278,14279d14278
< #line 778
<   if (dev_priv->mm.wedged) {
14280a14280,14281
>   if (dev_priv->mm.wedged) {
> #line 780
14285,14286d14285
< #line 781
<   if (ret && ret != -512) {
14287a14287,14288
>   if (ret && ret != -512) {
> #line 783
14289c14290
< #line 782
---
> #line 783
14295,14296d14295
< #line 790
<   if (ret == 0) {
14297a14297,14298
>   if (ret == 0) {
> #line 792
14302c14303
< #line 793
---
> #line 794
14306c14307
< #line 796 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 797 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14318c14319
< #line 801
---
> #line 802
14320,14321d14320
< #line 810
<   if (flush_domains & 1U) {
14322a14322,14323
>   if (flush_domains & 1U) {
> #line 812
14327c14328
< #line 813
---
> #line 814
14329,14330d14329
< #line 843
<     cmd = ((4 << 23) | 0) | (1 << 2);
14331a14331,14332
>     cmd = ((4 << 23) | 0) | (1 << 2);
> #line 845
14333c14334
< #line 846
---
> #line 847
14338c14339
< #line 847
---
> #line 848
14340,14341d14340
< #line 852
<       if (invalidate_domains & 4U) {
14342a14342,14343
>       if (invalidate_domains & 4U) {
> #line 854
14350,14351d14350
< #line 855
<     if (invalidate_domains & 16U) {
14352a14352,14353
>     if (invalidate_domains & 16U) {
> #line 857
14357c14358
< #line 861
---
> #line 862
14359c14360
< #line 861
---
> #line 862
14361c14362
< #line 861
---
> #line 862
14366,14378d14366
< #line 861
<       outcount = 0;
< #line 861
<       outring = dev_priv->ring.tail;
< #line 861
<       ringmask = dev_priv->ring.tail_mask;
< #line 861
<       virt = dev_priv->ring.virtual_start;
< #line 861
<       break;
<     }
< #line 862
<     while (1) {
14380c14368
<       *((unsigned int volatile   *)(virt + outring)) = cmd;
---
>       outcount = 0;
14382c14370
<       outcount = outcount + 1U;
---
>       outring = dev_priv->ring.tail;
14384c14372
<       outring = outring + 4U;
---
>       ringmask = dev_priv->ring.tail_mask;
14386c14374
<       outring = outring & ringmask;
---
>       virt = dev_priv->ring.virtual_start;
14393c14381
<       *((unsigned int volatile   *)(virt + outring)) = 0;
---
>       *((unsigned int volatile   *)(virt + outring)) = cmd;
14406c14394
<       dev_priv->ring.tail = outring;
---
>       *((unsigned int volatile   *)(virt + outring)) = 0;
14408c14396
<       dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
---
>       outcount = outcount + 1U;
14410c14398,14400
<       writel(outring, dev_priv->regs + 8240);
---
>       outring = outring + 4U;
> #line 864
>       outring = outring & ringmask;
14413a14404,14414
> #line 865
>     while (1) {
> #line 865
>       dev_priv->ring.tail = outring;
> #line 865
>       dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
> #line 865
>       writel(outring, dev_priv->regs + 8240);
> #line 865
>       break;
>     }
14417c14418
< #line 866
---
> #line 867
14421c14422
< #line 872 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 873 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14431,14432d14431
< #line 875
<   dev = obj->dev;
14433a14433,14434
>   dev = obj->dev;
> #line 877
14435,14436d14435
< #line 882
<   if (obj->write_domain & (unsigned int )(~ (1 | 64))) {
14437a14437,14438
>   if (obj->write_domain & (unsigned int )(~ (1 | 64))) {
> #line 884
14439c14440
< #line 888
---
> #line 889
14441,14442d14441
< #line 890
<     i915_gem_object_move_to_active(obj);
14443a14443,14444
>     i915_gem_object_move_to_active(obj);
> #line 892
14445c14446
< #line 893
---
> #line 894
14447c14448
< #line 893
---
> #line 894
14450c14451
< #line 893
---
> #line 894
14452c14453
< #line 893
---
> #line 894
14454c14455
< #line 893
---
> #line 894
14461,14462c14462,14463
<                                "i" (893), "i" (sizeof(struct bug_entry )));
< #line 893
---
>                                "i" (894), "i" (sizeof(struct bug_entry )));
> #line 894
14466c14467
< #line 893
---
> #line 894
14472c14473
< #line 893
---
> #line 894
14478c14479
< #line 902
---
> #line 903
14480,14481d14480
< #line 907
<     ret = i915_wait_request(dev, obj_priv->last_rendering_seqno);
14483c14482
<     if (ret != 0) {
---
>     ret = i915_wait_request(dev, obj_priv->last_rendering_seqno);
14484a14484,14485
>     if (ret != 0) {
> #line 910
14492c14493
< #line 912
---
> #line 913
14496c14497
< #line 918 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 919 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14506,14507d14506
< #line 921
<   dev = obj->dev;
14509c14508
<   obj_priv = obj->driver_private;
---
>   dev = obj->dev;
14510a14510,14511
>   obj_priv = obj->driver_private;
> #line 924
14512,14513d14512
< #line 929
<   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((void *)0)) {
14514a14514,14515
>   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((void *)0)) {
> #line 931
14519,14520d14519
< #line 932
<   if (obj_priv->pin_count != 0) {
14522c14521
<     printk("<3>[drm:%s] *ERROR* Attempting to unbind pinned buffer\n", "i915_gem_object_unbind");
---
>   if (obj_priv->pin_count != 0) {
14523a14523,14524
>     printk("<3>[drm:%s] *ERROR* Attempting to unbind pinned buffer\n", "i915_gem_object_unbind");
> #line 935
14528,14529d14528
< #line 939
<   ret = i915_gem_object_wait_rendering(obj);
14531c14530
<   if (ret) {
---
>   ret = i915_gem_object_wait_rendering(obj);
14532a14532,14533
>   if (ret) {
> #line 942
14535c14536
< #line 942
---
> #line 943
14540c14541
< #line 951
---
> #line 952
14542,14543d14542
< #line 953
<   if (ret) {
14544a14544,14545
>   if (ret) {
> #line 955
14547c14548
< #line 955
---
> #line 956
14552,14553d14552
< #line 958
<   if ((unsigned long )obj_priv->agp_mem != (unsigned long )((void *)0)) {
14555c14554
<     drm_unbind_agp(obj_priv->agp_mem);
---
>   if ((unsigned long )obj_priv->agp_mem != (unsigned long )((void *)0)) {
14557c14556
<     drm_free_agp(obj_priv->agp_mem, obj->size / (1UL << 12));
---
>     drm_unbind_agp(obj_priv->agp_mem);
14558a14558,14559
>     drm_free_agp(obj_priv->agp_mem, obj->size / (1UL << 12));
> #line 962
14563c14564
< #line 964
---
> #line 965
14565c14566
< #line 964
---
> #line 965
14567c14568
< #line 964
---
> #line 965
14569c14570
< #line 964
---
> #line 965
14571c14572
< #line 964
---
> #line 965
14578,14579c14579,14580
<                              "i" (964), "i" (sizeof(struct bug_entry )));
< #line 964
---
>                              "i" (965), "i" (sizeof(struct bug_entry )));
> #line 965
14583c14584
< #line 964
---
> #line 965
14589c14590
< #line 964
---
> #line 965
14592c14593
< #line 966
---
> #line 967
14594,14595d14594
< #line 968
<   if (obj_priv->gtt_space) {
14597c14596
<     atomic_dec(& dev->gtt_count);
---
>   if (obj_priv->gtt_space) {
14598a14598,14599
>     atomic_dec(& dev->gtt_count);
> #line 971
14600,14601d14600
< #line 972
<     drm_mm_put_block(obj_priv->gtt_space);
14602a14602,14603
>     drm_mm_put_block(obj_priv->gtt_space);
> #line 974
14607c14608
< #line 977
---
> #line 978
14609c14610
< #line 977
---
> #line 978
14613c14614
< #line 978
---
> #line 979
14616c14617
< #line 980
---
> #line 981
14620c14621
< #line 983 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 984 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14642c14643
< #line 986
---
> #line 987
14644c14645
< #line 989
---
> #line 990
14646c14647
< #line 991
---
> #line 992
14648c14649
< #line 995
---
> #line 996
14650c14651
< #line 995
---
> #line 996
14654c14655
< #line 996
---
> #line 997
14656c14657
< #line 996
---
> #line 997
14658,14659d14658
< #line 999
<       obj = obj_priv->obj;
14660a14660,14661
>       obj = obj_priv->obj;
> #line 1001
14662c14663
< #line 1000
---
> #line 1001
14664c14665
< #line 1000
---
> #line 1001
14666c14667
< #line 1000
---
> #line 1001
14668c14669
< #line 1000
---
> #line 1001
14675,14676c14676,14677
<                                  "i" (1000), "i" (sizeof(struct bug_entry )));
< #line 1000
---
>                                  "i" (1001), "i" (sizeof(struct bug_entry )));
> #line 1001
14680c14681
< #line 1000
---
> #line 1001
14686c14687
< #line 1000
---
> #line 1001
14689c14690
< #line 1004
---
> #line 1005
14691c14692
< #line 1004
---
> #line 1005
14693c14694
< #line 1004
---
> #line 1005
14695c14696
< #line 1004
---
> #line 1005
14697c14698
< #line 1004
---
> #line 1005
14704,14705c14705,14706
<                                  "i" (1004), "i" (sizeof(struct bug_entry )));
< #line 1004
---
>                                  "i" (1005), "i" (sizeof(struct bug_entry )));
> #line 1005
14709c14710
< #line 1004
---
> #line 1005
14715c14716
< #line 1004
---
> #line 1005
14718,14719d14718
< #line 1007
<       ret = i915_gem_object_unbind(obj);
14720a14720,14721
>       ret = i915_gem_object_unbind(obj);
> #line 1009
14723c14724
< #line 1015
---
> #line 1016
14725c14726
< #line 1015
---
> #line 1016
14729c14730
< #line 1018
---
> #line 1019
14731c14732
< #line 1018
---
> #line 1019
14733,14734d14733
< #line 1022
<       ret = i915_wait_request(dev, request->seqno);
14736c14735
<       if (ret) {
---
>       ret = i915_wait_request(dev, request->seqno);
14737a14737,14738
>       if (ret) {
> #line 1025
14742c14743
< #line 1031
---
> #line 1032
14744c14745
< #line 1031
---
> #line 1032
14748c14749
< #line 1032
---
> #line 1033
14751c14752
< #line 1033
---
> #line 1034
14754c14755
< #line 1041
---
> #line 1042
14756c14757
< #line 1041
---
> #line 1042
14760c14761
< #line 1042
---
> #line 1043
14762c14763
< #line 1042
---
> #line 1043
14764c14765
< #line 1045
---
> #line 1046
14766c14767
< #line 1047
---
> #line 1048
14768c14769
< #line 1050
---
> #line 1051
14770,14771d14770
< #line 1052
<       obj = (void *)0;
14772a14772,14773
>       obj = (void *)0;
> #line 1054
14775c14776
< #line 1056
---
> #line 1057
14777c14778
< #line 1056
---
> #line 1057
14779c14780
< #line 1056
---
> #line 1057
14781c14782
< #line 1056
---
> #line 1057
14784c14785
< #line 1064
---
> #line 1065
14788c14789
< #line 1066
---
> #line 1067
14792c14793
< #line 1069 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1070 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14808c14809
< #line 1072
---
> #line 1073
14810,14811d14810
< #line 1079
<   if (obj_priv->page_list) {
14812a14812,14813
>   if (obj_priv->page_list) {
> #line 1081
14817,14818d14817
< #line 1085
<   page_count___0 = obj->size / (1UL << 12);
14819a14819,14820
>   page_count___0 = obj->size / (1UL << 12);
> #line 1087
14821c14822
< #line 1086
---
> #line 1087
14824c14825
< #line 1086
---
> #line 1087
14826c14827
< #line 1086
---
> #line 1087
14828c14829
< #line 1086
---
> #line 1087
14835,14836c14836,14837
<                              "i" (1086), "i" (sizeof(struct bug_entry )));
< #line 1086
---
>                              "i" (1087), "i" (sizeof(struct bug_entry )));
> #line 1087
14840c14841
< #line 1086
---
> #line 1087
14846c14847
< #line 1086
---
> #line 1087
14849c14850
< #line 1087
---
> #line 1088
14851c14852
< #line 1087
---
> #line 1088
14853,14854d14853
< #line 1089
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((void *)0)) {
14856c14855
<     printk("<3>[drm:%s] *ERROR* Faled to allocate page list\n", "i915_gem_object_get_page_list");
---
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((void *)0)) {
14857a14857,14858
>     printk("<3>[drm:%s] *ERROR* Faled to allocate page list\n", "i915_gem_object_get_page_list");
> #line 1092
14862,14863d14862
< #line 1094
<   inode = ((obj->filp)->f_path.dentry)->d_inode;
14865c14864
<   mapping = inode->i_mapping;
---
>   inode = ((obj->filp)->f_path.dentry)->d_inode;
14866a14866,14867
>   mapping = inode->i_mapping;
> #line 1097
14868c14869
< #line 1096
---
> #line 1097
14870c14871
< #line 1096
---
> #line 1097
14874c14875
< #line 1096
---
> #line 1097
14877,14878d14877
< #line 1097
<     page = read_mapping_page(mapping, i, (void *)0);
14879a14879,14880
>     page = read_mapping_page(mapping, i, (void *)0);
> #line 1099
14881,14882d14881
< #line 1098
<     if (tmp___2) {
14883a14883,14884
>     if (tmp___2) {
> #line 1100
14885,14886d14885
< #line 1099
<       ret = tmp___1;
14887a14887,14888
>       ret = tmp___1;
> #line 1101
14890,14891d14890
< #line 1101
<       i915_gem_object_free_page_list(obj);
14892a14892,14893
>       i915_gem_object_free_page_list(obj);
> #line 1103
14897c14898
< #line 1104
---
> #line 1105
14899c14900
< #line 1096
---
> #line 1097
14902c14903
< #line 1106
---
> #line 1107
14906c14907
< #line 1112 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1113 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
14922,14923d14922
< #line 1115
<   dev = obj->dev;
14925c14924
<   dev_priv = dev->dev_private;
---
>   dev = obj->dev;
14926a14926,14927
>   dev_priv = dev->dev_private;
> #line 1118
14928,14929d14928
< #line 1121
<   if (alignment == 0U) {
14930a14930,14931
>   if (alignment == 0U) {
> #line 1123
14935,14936d14935
< #line 1123
<   if ((unsigned long )alignment & ((1UL << 12) - 1UL)) {
14937a14937,14938
>   if ((unsigned long )alignment & ((1UL << 12) - 1UL)) {
> #line 1125
14940c14941
< #line 1125
---
> #line 1126
14946c14947
< #line 1129
---
> #line 1130
14949,14950d14949
< #line 1131
<   if ((unsigned long )free_space != (unsigned long )((void *)0)) {
14951a14951,14952
>   if ((unsigned long )free_space != (unsigned long )((void *)0)) {
> #line 1133
14953,14954d14953
< #line 1134
<     if ((unsigned long )obj_priv->gtt_space != (unsigned long )((void *)0)) {
14956c14955
<       (obj_priv->gtt_space)->private = obj;
---
>     if ((unsigned long )obj_priv->gtt_space != (unsigned long )((void *)0)) {
14957a14957,14958
>       (obj_priv->gtt_space)->private = obj;
> #line 1137
14965c14966
< #line 1139
---
> #line 1140
14967c14968
< #line 1146
---
> #line 1147
14969c14970
< #line 1146
---
> #line 1147
14971c14972
< #line 1146
---
> #line 1147
14973c14974
< #line 1146
---
> #line 1147
14975c14976
< #line 1146
---
> #line 1147
14977c14978
< #line 1146
---
> #line 1147
14979,14980d14979
< #line 1149
<           printk("<3>[drm:%s] *ERROR* GTT full, but LRU list empty\n", "i915_gem_object_bind_to_gtt");
14981a14981,14982
>           printk("<3>[drm:%s] *ERROR* GTT full, but LRU list empty\n", "i915_gem_object_bind_to_gtt");
> #line 1151
14992,14993d14992
< #line 1153
<     ret = i915_gem_evict_something(dev);
14995c14994
<     if (ret != 0) {
---
>     ret = i915_gem_evict_something(dev);
14996a14996,14997
>     if (ret != 0) {
> #line 1156
14999c15000
< #line 1156
---
> #line 1157
15004c15005
< #line 1158
---
> #line 1159
15009,15010d15009
< #line 1165
<   ret = i915_gem_object_get_page_list(obj);
15012c15011
<   if (ret) {
---
>   ret = i915_gem_object_get_page_list(obj);
15014c15013
<     drm_mm_put_block(obj_priv->gtt_space);
---
>   if (ret) {
15016c15015
<     obj_priv->gtt_space = (void *)0;
---
>     drm_mm_put_block(obj_priv->gtt_space);
15017a15017,15018
>     obj_priv->gtt_space = (void *)0;
> #line 1170
15022c15023
< #line 1172
---
> #line 1173
15024c15025
< #line 1176
---
> #line 1177
15027,15028d15027
< #line 1181
<   if ((unsigned long )obj_priv->agp_mem == (unsigned long )((void *)0)) {
15030c15029
<     i915_gem_object_free_page_list(obj);
---
>   if ((unsigned long )obj_priv->agp_mem == (unsigned long )((void *)0)) {
15032c15031
<     drm_mm_put_block(obj_priv->gtt_space);
---
>     i915_gem_object_free_page_list(obj);
15034c15033
<     obj_priv->gtt_space = (void *)0;
---
>     drm_mm_put_block(obj_priv->gtt_space);
15035a15035,15036
>     obj_priv->gtt_space = (void *)0;
> #line 1186
15040,15041d15040
< #line 1187
<   atomic_inc(& dev->gtt_count);
15042a15042,15043
>   atomic_inc(& dev->gtt_count);
> #line 1189
15044c15045
< #line 1194
---
> #line 1195
15046c15047
< #line 1194
---
> #line 1195
15049c15050
< #line 1194
---
> #line 1195
15051c15052
< #line 1194
---
> #line 1195
15053c15054
< #line 1194
---
> #line 1195
15060,15061c15061,15062
<                              "i" (1194), "i" (sizeof(struct bug_entry )));
< #line 1194
---
>                              "i" (1195), "i" (sizeof(struct bug_entry )));
> #line 1195
15065c15066
< #line 1194
---
> #line 1195
15071c15072
< #line 1194
---
> #line 1195
15074c15075
< #line 1195
---
> #line 1196
15076c15077
< #line 1195
---
> #line 1196
15079c15080
< #line 1195
---
> #line 1196
15081c15082
< #line 1195
---
> #line 1196
15083c15084
< #line 1195
---
> #line 1196
15090,15091c15091,15092
<                              "i" (1195), "i" (sizeof(struct bug_entry )));
< #line 1195
---
>                              "i" (1196), "i" (sizeof(struct bug_entry )));
> #line 1196
15095c15096
< #line 1195
---
> #line 1196
15101c15102
< #line 1195
---
> #line 1196
15104c15105
< #line 1197
---
> #line 1198
15108c15109
< #line 1200 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1201 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15114c15115
< #line 1203
---
> #line 1204
15116,15117d15116
< #line 1209
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((void *)0)) {
15118a15118,15119
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((void *)0)) {
> #line 1211
15123,15124d15123
< #line 1212
<   drm_clflush_pages(obj_priv->page_list, obj->size / (1UL << 12));
15125a15125,15126
>   drm_clflush_pages(obj_priv->page_list, obj->size / (1UL << 12));
> #line 1214
15129c15130
< #line 1326 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1327 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15140,15141d15140
< #line 1331
<   dev = obj->dev;
15143c15142
<   obj_priv = obj->driver_private;
---
>   dev = obj->dev;
15145c15144
<   invalidate_domains = 0;
---
>   obj_priv = obj->driver_private;
15146a15146,15147
>   invalidate_domains = 0;
> #line 1335
15148,15149d15148
< #line 1347
<   if (write_domain == (uint32_t )0) {
15150a15150,15151
>   if (write_domain == (uint32_t )0) {
> #line 1349
15153c15154
< #line 1350
---
> #line 1351
15156,15157d15156
< #line 1358
<   if (obj->write_domain && obj->write_domain != read_domains) {
15159c15158
<     flush_domains = flush_domains | obj->write_domain;
---
>   if (obj->write_domain && obj->write_domain != read_domains) {
15160a15160,15161
>     flush_domains = flush_domains | obj->write_domain;
> #line 1361
15165,15166d15165
< #line 1366
<   invalidate_domains = invalidate_domains | (read_domains & ~ obj->read_domains);
15167a15167,15168
>   invalidate_domains = invalidate_domains | (read_domains & ~ obj->read_domains);
> #line 1368
15169c15170
< #line 1377
---
> #line 1378
15171,15172d15171
< #line 1380
<       ret = i915_gem_object_wait_rendering(obj);
15174c15173
<       if (ret) {
---
>       ret = i915_gem_object_wait_rendering(obj);
15175a15175,15176
>       if (ret) {
> #line 1383
15183c15184
< #line 1384
---
> #line 1385
15188,15189d15188
< #line 1387
<   if ((write_domain | flush_domains) != 0U) {
15190a15190,15191
>   if ((write_domain | flush_domains) != 0U) {
> #line 1389
15195c15196
< #line 1393
---
> #line 1394
15197c15198
< #line 1396
---
> #line 1397
15199c15200
< #line 1398
---
> #line 1399
15204c15205
< #line 1400
---
> #line 1401
15206,15207d15206
< #line 1402
<   dev->invalidate_domains = dev->invalidate_domains | invalidate_domains;
15208a15208,15209
>   dev->invalidate_domains = dev->invalidate_domains | invalidate_domains;
> #line 1404
15210c15211
< #line 1410
---
> #line 1411
15214c15215
< #line 1419 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1420 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15226c15227
< #line 1426
---
> #line 1427
15228,15229d15228
< #line 1429
<   if (obj->read_domains & 1U) {
15230a15230,15231
>   if (obj->read_domains & 1U) {
> #line 1431
15235c15236
< #line 1432
---
> #line 1433
15237c15238
< #line 1434
---
> #line 1435
15239c15240
< #line 1434
---
> #line 1435
15244,15245d15244
< #line 1438
<   if (obj->write_domain & (unsigned int )(~ (1 | 64))) {
15247c15246
<     ret = i915_gem_object_wait_rendering(obj);
---
>   if (obj->write_domain & (unsigned int )(~ (1 | 64))) {
15249c15248
<     if (ret) {
---
>     ret = i915_gem_object_wait_rendering(obj);
15250a15250,15251
>     if (ret) {
> #line 1442
15258,15259d15258
< #line 1444
<   if ((unsigned long )obj_priv->page_cpu_valid == (unsigned long )((void *)0)) {
15260a15260,15261
>   if ((unsigned long )obj_priv->page_cpu_valid == (unsigned long )((void *)0)) {
> #line 1446
15262c15263
< #line 1445
---
> #line 1446
15267c15268
< #line 1452
---
> #line 1453
15269c15270
< #line 1452
---
> #line 1453
15271c15272
< #line 1452
---
> #line 1453
15275c15276
< #line 1452
---
> #line 1453
15278,15279d15278
< #line 1453
<     if (*(obj_priv->page_cpu_valid + i)) {
15280a15280,15281
>     if (*(obj_priv->page_cpu_valid + i)) {
> #line 1455
15285c15286
< #line 1456
---
> #line 1457
15287c15288
< #line 1458
---
> #line 1459
15290c15291
< #line 1452
---
> #line 1453
15293c15294
< #line 1461
---
> #line 1462
15297c15298
< #line 1470 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1471 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15303c15304
< #line 1473
---
> #line 1474
15305c15306
< #line 1479
---
> #line 1480
15307c15308
< #line 1486
---
> #line 1487
15309,15310d15309
< #line 1489
<     dev->invalidate_domains = 0;
15311a15311,15312
>     dev->invalidate_domains = 0;
> #line 1491
15316c15317
< #line 1493
---
> #line 1494
15320c15321
< #line 1499 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1500 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15341c15342
< #line 1504
---
> #line 1505
15343c15344
< #line 1507
---
> #line 1508
15345,15346d15345
< #line 1509
<   last_reloc_offset = -1;
15347a15347,15348
>   last_reloc_offset = -1;
> #line 1511
15349,15350d15349
< #line 1513
<   ret = i915_gem_object_pin(obj, (uint32_t )entry->alignment);
15352c15351
<   if (ret) {
---
>   ret = i915_gem_object_pin(obj, (uint32_t )entry->alignment);
15353a15353,15354
>   if (ret) {
> #line 1516
15358c15359
< #line 1517
---
> #line 1518
15360c15361
< #line 1519
---
> #line 1520
15362c15363
< #line 1524
---
> #line 1525
15364c15365
< #line 1524
---
> #line 1525
15366c15367
< #line 1524
---
> #line 1525
15370c15371
< #line 1524
---
> #line 1525
15373c15374
< #line 1530
---
> #line 1531
15375,15376d15375
< #line 1530
<     ret = tmp;
15378c15377
<     if (ret != 0) {
---
>     ret = tmp;
15380c15379
<       i915_gem_object_unpin(obj);
---
>     if (ret != 0) {
15381a15381,15382
>       i915_gem_object_unpin(obj);
> #line 1534
15386c15387
< #line 1536
---
> #line 1537
15388,15389d15388
< #line 1538
<     if ((unsigned long )target_obj == (unsigned long )((void *)0)) {
15391c15390
<       i915_gem_object_unpin(obj);
---
>     if ((unsigned long )target_obj == (unsigned long )((void *)0)) {
15392a15392,15393
>       i915_gem_object_unpin(obj);
> #line 1541
15397c15398
< #line 1542
---
> #line 1543
15399,15400d15399
< #line 1547
<     if ((unsigned long )target_obj_priv->gtt_space == (unsigned long )((void *)0)) {
15401a15401,15402
>     if ((unsigned long )target_obj_priv->gtt_space == (unsigned long )((void *)0)) {
> #line 1549
15404,15405d15404
< #line 1550
<       drm_gem_object_unreference(target_obj);
15407c15406
<       i915_gem_object_unpin(obj);
---
>       drm_gem_object_unreference(target_obj);
15408a15408,15409
>       i915_gem_object_unpin(obj);
> #line 1553
15413,15414d15413
< #line 1555
<     if (reloc.offset > (uint64_t )(obj->size - (size_t )4)) {
15415a15415,15416
>     if (reloc.offset > (uint64_t )(obj->size - (size_t )4)) {
> #line 1557
15419,15420d15419
< #line 1560
<       drm_gem_object_unreference(target_obj);
15422c15421
<       i915_gem_object_unpin(obj);
---
>       drm_gem_object_unreference(target_obj);
15423a15423,15424
>       i915_gem_object_unpin(obj);
> #line 1563
15428,15429d15428
< #line 1564
<     if (reloc.offset & 3ULL) {
15430a15430,15431
>     if (reloc.offset & 3ULL) {
> #line 1566
15433,15434d15433
< #line 1569
<       drm_gem_object_unreference(target_obj);
15436c15435
<       i915_gem_object_unpin(obj);
---
>       drm_gem_object_unreference(target_obj);
15437a15437,15438
>       i915_gem_object_unpin(obj);
> #line 1572
15442c15443
< #line 1574
---
> #line 1575
15444c15445
< #line 1576
---
> #line 1577
15448,15449d15448
< #line 1583
<       drm_gem_object_unreference(target_obj);
15451c15450
<       i915_gem_object_unpin(obj);
---
>       drm_gem_object_unreference(target_obj);
15452a15452,15453
>       i915_gem_object_unpin(obj);
> #line 1586
15457,15458d15457
< #line 1603
<     target_obj->pending_read_domains = target_obj->pending_read_domains | reloc.read_domains;
15459a15459,15460
>     target_obj->pending_read_domains = target_obj->pending_read_domains | reloc.read_domains;
> #line 1605
15461,15462d15461
< #line 1609
<     if ((uint64_t )target_obj_priv->gtt_offset == reloc.presumed_offset) {
15464c15463
<       drm_gem_object_unreference(target_obj);
---
>     if ((uint64_t )target_obj_priv->gtt_offset == reloc.presumed_offset) {
15465a15465,15466
>       drm_gem_object_unreference(target_obj);
> #line 1612
15470c15471
< #line 1618
---
> #line 1619
15472,15473d15472
< #line 1623
<     if (obj->write_domain & 1U) {
15475c15474
<       i915_gem_clflush_object(obj);
---
>     if (obj->write_domain & 1U) {
15477c15476
<       drm_agp_chipset_flush(dev);
---
>       i915_gem_clflush_object(obj);
15478a15478,15479
>       drm_agp_chipset_flush(dev);
> #line 1627
15483,15484d15483
< #line 1632
<     reloc_offset = (uint64_t )obj_priv->gtt_offset + reloc.offset;
15485a15485,15486
>     reloc_offset = (uint64_t )obj_priv->gtt_offset + reloc.offset;
> #line 1634
15487,15488d15487
< #line 1636
<       if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
15489a15489,15490
>       if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
> #line 1638
15494c15495
< #line 1639
---
> #line 1640
15497,15498d15497
< #line 1643
<       last_reloc_offset = reloc_offset;
15500c15499
<       if ((unsigned long )reloc_page == (unsigned long )((void *)0)) {
---
>       last_reloc_offset = reloc_offset;
15502c15501
<         drm_gem_object_unreference(target_obj);
---
>       if ((unsigned long )reloc_page == (unsigned long )((void *)0)) {
15504c15503
<         i915_gem_object_unpin(obj);
---
>         drm_gem_object_unreference(target_obj);
15505a15505,15506
>         i915_gem_object_unpin(obj);
> #line 1648
15513c15514
< #line 1651
---
> #line 1652
15515c15516
< #line 1653
---
> #line 1654
15517c15518
< #line 1660
---
> #line 1661
15519,15520d15519
< #line 1665
<     reloc.presumed_offset = target_obj_priv->gtt_offset;
15521a15521,15522
>     reloc.presumed_offset = target_obj_priv->gtt_offset;
> #line 1667
15523,15524d15523
< #line 1666
<     ret = tmp___0;
15526c15525
<     if (ret != 0) {
---
>     ret = tmp___0;
15528c15527
<       drm_gem_object_unreference(target_obj);
---
>     if (ret != 0) {
15530c15529
<       i915_gem_object_unpin(obj);
---
>       drm_gem_object_unreference(target_obj);
15531a15531,15532
>       i915_gem_object_unpin(obj);
> #line 1671
15536c15537
< #line 1673
---
> #line 1674
15539c15540
< #line 1524
---
> #line 1525
15542,15543d15542
< #line 1676
<   if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
15544a15544,15545
>   if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
> #line 1678
15549c15550
< #line 1683
---
> #line 1684
15553c15554
< #line 1688 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1689 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15572,15573d15572
< #line 1693
<   dev_priv = dev->dev_private;
15574a15574,15575
>   dev_priv = dev->dev_private;
> #line 1695
15576,15577d15576
< #line 1696
<   nbox = exec->num_cliprects;
15578a15578,15579
>   nbox = exec->num_cliprects;
> #line 1698
15580,15581d15580
< #line 1701
<   exec_start = (uint32_t )exec_offset + exec->batch_start_offset;
15582a15582,15583
>   exec_start = (uint32_t )exec_offset + exec->batch_start_offset;
> #line 1703
15584,15585d15584
< #line 1704
<   if ((exec_start | exec_len) & 7U) {
15587c15586
<     printk("<3>[drm:%s] *ERROR* alignment\n", "i915_dispatch_gem_execbuffer");
---
>   if ((exec_start | exec_len) & 7U) {
15588a15588,15589
>     printk("<3>[drm:%s] *ERROR* alignment\n", "i915_dispatch_gem_execbuffer");
> #line 1707
15593,15594d15593
< #line 1709
<   if (! exec_start) {
15595a15595,15596
>   if (! exec_start) {
> #line 1711
15600c15601
< #line 1712
---
> #line 1713
15602c15603
< #line 1714
---
> #line 1715
15604c15605
< #line 1714
---
> #line 1715
15606c15607
< #line 1714
---
> #line 1715
15610c15611
< #line 1714
---
> #line 1715
15613,15614d15613
< #line 1715
<     if (i < nbox) {
15615a15615,15616
>     if (i < nbox) {
> #line 1717
15617c15618
< #line 1716
---
> #line 1717
15619,15620d15619
< #line 1718
<       if (ret) {
15621a15621,15622
>       if (ret) {
> #line 1720
15629,15630d15629
< #line 1722
<     if (dev->pci_device == 13687 || dev->pci_device == 9570) {
15631a15631,15632
>     if (dev->pci_device == 13687 || dev->pci_device == 9570) {
> #line 1724
15633c15634
< #line 1723
---
> #line 1724
15635c15636
< #line 1723
---
> #line 1724
15640,15652d15640
< #line 1723
<         outcount = 0;
< #line 1723
<         outring = dev_priv->ring.tail;
< #line 1723
<         ringmask = dev_priv->ring.tail_mask;
< #line 1723
<         virt = dev_priv->ring.virtual_start;
< #line 1723
<         break;
<       }
< #line 1724
<       while (1) {
15654c15642
<         *((unsigned int volatile   *)(virt + outring)) = (48 << 23) | 1;
---
>         outcount = 0;
15656c15644
<         outcount = outcount + 1U;
---
>         outring = dev_priv->ring.tail;
15658c15646
<         outring = outring + 4U;
---
>         ringmask = dev_priv->ring.tail_mask;
15660c15648
<         outring = outring & ringmask;
---
>         virt = dev_priv->ring.virtual_start;
15667c15655
<         *((unsigned int volatile   *)(virt + outring)) = exec_start | 1U;
---
>         *((unsigned int volatile   *)(virt + outring)) = (48 << 23) | 1;
15680c15668
<         *((unsigned int volatile   *)(virt + outring)) = (exec_start + exec_len) - (uint32_t )4;
---
>         *((unsigned int volatile   *)(virt + outring)) = exec_start | 1U;
15693c15681
<         *((unsigned int volatile   *)(virt + outring)) = 0;
---
>         *((unsigned int volatile   *)(virt + outring)) = (exec_start + exec_len) - (uint32_t )4;
15706c15694
<         dev_priv->ring.tail = outring;
---
>         *((unsigned int volatile   *)(virt + outring)) = 0;
15708c15696
<         dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
---
>         outcount = outcount + 1U;
15710c15698,15700
<         writel(outring, dev_priv->regs + 8240);
---
>         outring = outring + 4U;
> #line 1728
>         outring = outring & ringmask;
15713a15704,15714
> #line 1729
>       while (1) {
> #line 1729
>         dev_priv->ring.tail = outring;
> #line 1729
>         dev_priv->ring.space = (unsigned int )dev_priv->ring.space - outcount * 4U;
> #line 1729
>         writel(outring, dev_priv->regs + 8240);
> #line 1729
>         break;
>       }
15715c15716
< #line 1730
---
> #line 1731
15717c15718
< #line 1730
---
> #line 1731
15719c15720
< #line 1730
---
> #line 1731
15724c15725
< #line 1730
---
> #line 1731
15726c15727
< #line 1730
---
> #line 1731
15728c15729
< #line 1730
---
> #line 1731
15730c15731
< #line 1730
---
> #line 1731
15732c15733
< #line 1730
---
> #line 1731
15735,15736d15735
< #line 1731
<       if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
15737a15737,15738
>       if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
> #line 1733
15739c15740
< #line 1732
---
> #line 1733
15741c15742
< #line 1732
---
> #line 1733
15743c15744
< #line 1732
---
> #line 1733
15745c15746
< #line 1732
---
> #line 1733
15747c15748
< #line 1732
---
> #line 1733
15750c15751
< #line 1735
---
> #line 1736
15752c15753
< #line 1735
---
> #line 1736
15754c15755
< #line 1735
---
> #line 1736
15756c15757
< #line 1735
---
> #line 1736
15758c15759
< #line 1735
---
> #line 1736
15760c15761
< #line 1735
---
> #line 1736
15764c15765
< #line 1737
---
> #line 1738
15766c15767
< #line 1737
---
> #line 1738
15768c15769
< #line 1737
---
> #line 1738
15770c15771
< #line 1737
---
> #line 1738
15772c15773
< #line 1737
---
> #line 1738
15774c15775
< #line 1737
---
> #line 1738
15777c15778
< #line 1739
---
> #line 1740
15779c15780
< #line 1739
---
> #line 1740
15781c15782
< #line 1739
---
> #line 1740
15783c15784
< #line 1739
---
> #line 1740
15785c15786
< #line 1739
---
> #line 1740
15787c15788
< #line 1739
---
> #line 1740
15791c15792
< #line 1741
---
> #line 1742
15793c15794
< #line 1741
---
> #line 1742
15795c15796
< #line 1741
---
> #line 1742
15797c15798
< #line 1741
---
> #line 1742
15799c15800
< #line 1741
---
> #line 1742
15803c15804
< #line 1714
---
> #line 1715
15806c15807
< #line 1746
---
> #line 1747
15810c15811
< #line 1755 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1756 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15818,15819d15818
< #line 1758
<   i915_file_priv = file_priv->driver_priv;
15820a15820,15821
>   i915_file_priv = file_priv->driver_priv;
> #line 1760
15822,15823d15822
< #line 1762
<   mutex_lock(& dev->struct_mutex);
15825c15824
<   seqno = i915_file_priv->mm.last_gem_throttle_seqno;
---
>   mutex_lock(& dev->struct_mutex);
15826a15826,15827
>   seqno = i915_file_priv->mm.last_gem_throttle_seqno;
> #line 1765
15828,15829d15828
< #line 1766
<   if (seqno) {
15830a15830,15831
>   if (seqno) {
> #line 1768
15835,15836d15835
< #line 1768
<   mutex_unlock(& dev->struct_mutex);
15837a15837,15838
>   mutex_unlock(& dev->struct_mutex);
> #line 1770
15841c15842
< #line 1772 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1773 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
15867,15868d15867
< #line 1776
<   dev_priv = dev->dev_private;
15870c15869
<   i915_file_priv = file_priv->driver_priv;
---
>   dev_priv = dev->dev_private;
15872c15871
<   args = data;
---
>   i915_file_priv = file_priv->driver_priv;
15874c15873
<   exec_list = (void *)0;
---
>   args = data;
15875a15875,15876
>   exec_list = (void *)0;
> #line 1781
15877c15878
< #line 1782
---
> #line 1783
15879,15880d15879
< #line 1791
<   if (args->buffer_count < (uint32_t )1) {
15881a15881,15882
>   if (args->buffer_count < (uint32_t )1) {
> #line 1793
15884c15885
< #line 1793
---
> #line 1794
15889c15890
< #line 1796
---
> #line 1797
15891c15892
< #line 1796
---
> #line 1797
15893c15894
< #line 1798
---
> #line 1799
15895c15896
< #line 1798
---
> #line 1799
15897,15898d15897
< #line 1800
<   if ((unsigned long )exec_list == (unsigned long )((void *)0) || (unsigned long )object_list == (unsigned long )((void *)0)) {
15899a15899,15900
>   if ((unsigned long )exec_list == (unsigned long )((void *)0) || (unsigned long )object_list == (unsigned long )((void *)0)) {
> #line 1802
15902,15903d15902
< #line 1804
<     ret = -12;
15904a15904,15905
>     ret = -12;
> #line 1806
15909c15910
< #line 1807
---
> #line 1808
15912c15913
< #line 1807
---
> #line 1808
15914,15915d15914
< #line 1811
<   if (ret != 0) {
15916a15916,15917
>   if (ret != 0) {
> #line 1813
15919c15920
< #line 1814
---
> #line 1815
15924c15925
< #line 1817
---
> #line 1818
15926,15927d15926
< #line 1821
<   if (dev_priv->mm.wedged) {
15929c15928
<     printk("<3>[drm:%s] *ERROR* Execbuf while wedged\n", "i915_gem_execbuffer");
---
>   if (dev_priv->mm.wedged) {
15931c15930
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Execbuf while wedged\n", "i915_gem_execbuffer");
15932a15932,15933
>     mutex_unlock(& dev->struct_mutex);
> #line 1825
15937,15938d15937
< #line 1827
<   if (dev_priv->mm.suspended) {
15940c15939
<     printk("<3>[drm:%s] *ERROR* Execbuf while VT-switched.\n", "i915_gem_execbuffer");
---
>   if (dev_priv->mm.suspended) {
15942c15941
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Execbuf while VT-switched.\n", "i915_gem_execbuffer");
15943a15943,15944
>     mutex_unlock(& dev->struct_mutex);
> #line 1831
15948,15949d15948
< #line 1837
<   dev->invalidate_domains = 0;
15950a15950,15951
>   dev->invalidate_domains = 0;
> #line 1839
15952c15953
< #line 1841
---
> #line 1842
15954c15955
< #line 1841
---
> #line 1842
15956c15957
< #line 1841
---
> #line 1842
15960c15961
< #line 1841
---
> #line 1842
15963c15964
< #line 1842
---
> #line 1843
15965,15966d15965
< #line 1844
<     if ((unsigned long )*(object_list + i) == (unsigned long )((void *)0)) {
15967a15967,15968
>     if ((unsigned long )*(object_list + i) == (unsigned long )((void *)0)) {
> #line 1846
15970,15971d15970
< #line 1847
<       ret = -9;
15972a15972,15973
>       ret = -9;
> #line 1849
15977,15978d15977
< #line 1851
<     (*(object_list + i))->pending_read_domains = 0;
15980c15979
<     (*(object_list + i))->pending_write_domain = 0;
---
>     (*(object_list + i))->pending_read_domains = 0;
15981a15981,15982
>     (*(object_list + i))->pending_write_domain = 0;
> #line 1854
15983,15984d15983
< #line 1856
<     if (ret) {
15985a15985,15986
>     if (ret) {
> #line 1858
15988c15989
< #line 1858
---
> #line 1859
15993c15994
< #line 1860
---
> #line 1861
15995c15996
< #line 1841
---
> #line 1842
15998,15999d15998
< #line 1864
<   batch_obj = *(object_list + (args->buffer_count - (uint32_t )1));
16001c16000
<   batch_obj->pending_read_domains = 8;
---
>   batch_obj = *(object_list + (args->buffer_count - (uint32_t )1));
16002a16002,16003
>   batch_obj->pending_read_domains = 8;
> #line 1867
16004c16005
< #line 1870
---
> #line 1871
16006c16007
< #line 1870
---
> #line 1871
16008c16009
< #line 1870
---
> #line 1871
16012c16013
< #line 1870
---
> #line 1871
16015,16016d16015
< #line 1871
<     obj = *(object_list + i);
16017a16017,16018
>     obj = *(object_list + i);
> #line 1873
16019c16020
< #line 1874
---
> #line 1875
16021,16022d16021
< #line 1880
<       ret = -12;
16023a16023,16024
>       ret = -12;
> #line 1882
16028c16029
< #line 1885
---
> #line 1886
16030,16031d16030
< #line 1888
<     if (ret) {
16032a16032,16033
>     if (ret) {
> #line 1890
16037c16038
< #line 1870
---
> #line 1871
16040c16041
< #line 1895
---
> #line 1896
16042c16043
< #line 1906
---
> #line 1907
16044c16045
< #line 1915
---
> #line 1916
16046,16047d16046
< #line 1918
<   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
16049c16048
<   if (ret) {
---
>   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
16051c16050
<     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
---
>   if (ret) {
16052a16052,16053
>     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
> #line 1922
16057c16058
< #line 1928
---
> #line 1929
16059,16060d16059
< #line 1939
<   seqno = i915_add_request(dev, flush_domains);
16061a16061,16062
>   seqno = i915_add_request(dev, flush_domains);
> #line 1941
16063c16064
< #line 1940
---
> #line 1941
16065c16066
< #line 1940
---
> #line 1941
16067c16068
< #line 1940
---
> #line 1941
16069c16070
< #line 1940
---
> #line 1941
16076,16077c16077,16078
<                              "i" (1940), "i" (sizeof(struct bug_entry )));
< #line 1940
---
>                              "i" (1941), "i" (sizeof(struct bug_entry )));
> #line 1941
16081c16082
< #line 1940
---
> #line 1941
16087c16088
< #line 1940
---
> #line 1941
16090,16091d16090
< #line 1941
<   i915_file_priv->mm.last_gem_seqno = seqno;
16092a16092,16093
>   i915_file_priv->mm.last_gem_seqno = seqno;
> #line 1943
16094c16095
< #line 1942
---
> #line 1943
16096c16097
< #line 1942
---
> #line 1943
16100c16101
< #line 1942
---
> #line 1943
16103,16104d16103
< #line 1943
<     obj___0 = *(object_list + i);
16105a16105,16106
>     obj___0 = *(object_list + i);
> #line 1945
16107,16108d16107
< #line 1946
<     i915_gem_object_move_to_active(obj___0);
16109a16109,16110
>     i915_gem_object_move_to_active(obj___0);
> #line 1948
16111c16112
< #line 1942
---
> #line 1943
16114c16115
< #line 1959
---
> #line 1960
16117c16118
< #line 1959
---
> #line 1960
16119,16120d16119
< #line 1963
<   if (ret) {
16121a16121,16122
>   if (ret) {
> #line 1965
16128,16129d16128
< #line 1968
<   if ((unsigned long )object_list != (unsigned long )((void *)0)) {
16130a16130,16131
>   if ((unsigned long )object_list != (unsigned long )((void *)0)) {
> #line 1970
16132c16133
< #line 1969
---
> #line 1970
16134c16135
< #line 1969
---
> #line 1970
16138c16139
< #line 1969
---
> #line 1970
16141c16142
< #line 1970
---
> #line 1971
16143c16144
< #line 1969
---
> #line 1970
16146c16147
< #line 1972
---
> #line 1973
16148c16149
< #line 1972
---
> #line 1973
16150c16151
< #line 1972
---
> #line 1973
16154c16155
< #line 1972
---
> #line 1973
16157c16158
< #line 1973
---
> #line 1974
16159c16160
< #line 1972
---
> #line 1973
16165c16166
< #line 1975
---
> #line 1976
16168c16169
< #line 1978
---
> #line 1979
16171c16172
< #line 1980
---
> #line 1981
16173c16174
< #line 1983
---
> #line 1984
16177c16178
< #line 1986 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 1987 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16186,16187d16186
< #line 1989
<   dev = obj->dev;
16188a16188,16189
>   dev = obj->dev;
> #line 1991
16190,16191d16190
< #line 1994
<   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((void *)0)) {
16193c16192
<     ret = i915_gem_object_bind_to_gtt(obj, alignment);
---
>   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((void *)0)) {
16195c16194
<     if (ret != 0) {
---
>     ret = i915_gem_object_bind_to_gtt(obj, alignment);
16197c16196
<       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
---
>     if (ret != 0) {
16198a16198,16199
>       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
> #line 1999
16206c16207
< #line 2001
---
> #line 2002
16208,16209d16208
< #line 2006
<   if (obj_priv->pin_count == 1) {
16211c16210
<     atomic_inc(& dev->pin_count);
---
>   if (obj_priv->pin_count == 1) {
16213c16212
<     atomic_add(obj->size, & dev->pin_memory);
---
>     atomic_inc(& dev->pin_count);
16214a16214,16215
>     atomic_add(obj->size, & dev->pin_memory);
> #line 2010
16216c16217
< #line 2009
---
> #line 2010
16218c16219
< #line 2009
---
> #line 2010
16222c16223
< #line 2013
---
> #line 2014
16231c16232
< #line 2017
---
> #line 2018
16235c16236
< #line 2020 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2021 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16245,16246d16245
< #line 2023
<   dev = obj->dev;
16248c16247
<   dev_priv = dev->dev_private;
---
>   dev = obj->dev;
16249a16249,16250
>   dev_priv = dev->dev_private;
> #line 2026
16251,16252d16251
< #line 2028
<   obj_priv->pin_count = obj_priv->pin_count - 1;
16253a16253,16254
>   obj_priv->pin_count = obj_priv->pin_count - 1;
> #line 2030
16255c16256
< #line 2029
---
> #line 2030
16257c16258
< #line 2029
---
> #line 2030
16259c16260
< #line 2029
---
> #line 2030
16261c16262
< #line 2029
---
> #line 2030
16268,16269c16269,16270
<                              "i" (2029), "i" (sizeof(struct bug_entry )));
< #line 2029
---
>                              "i" (2030), "i" (sizeof(struct bug_entry )));
> #line 2030
16273c16274
< #line 2029
---
> #line 2030
16279c16280
< #line 2029
---
> #line 2030
16282c16283
< #line 2030
---
> #line 2031
16284c16285
< #line 2030
---
> #line 2031
16287c16288
< #line 2030
---
> #line 2031
16289c16290
< #line 2030
---
> #line 2031
16291c16292
< #line 2030
---
> #line 2031
16298,16299c16299,16300
<                              "i" (2030), "i" (sizeof(struct bug_entry )));
< #line 2030
---
>                              "i" (2031), "i" (sizeof(struct bug_entry )));
> #line 2031
16303c16304
< #line 2030
---
> #line 2031
16309c16310
< #line 2030
---
> #line 2031
16312,16313d16312
< #line 2036
<   if (obj_priv->pin_count == 0) {
16314a16314,16315
>   if (obj_priv->pin_count == 0) {
> #line 2038
16316c16317
< #line 2040
---
> #line 2041
16321,16322d16321
< #line 2042
<     atomic_dec(& dev->pin_count);
16323a16323,16324
>     atomic_dec(& dev->pin_count);
> #line 2044
16328c16329
< #line 2046
---
> #line 2047
16332c16333
< #line 2048 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2049 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16341c16342
< #line 2052
---
> #line 2053
16343c16344
< #line 2057
---
> #line 2058
16345,16346d16345
< #line 2059
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16348c16347
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16349a16349,16350
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2062
16352,16353d16352
< #line 2063
<     mutex_unlock(& dev->struct_mutex);
16354a16354,16355
>     mutex_unlock(& dev->struct_mutex);
> #line 2065
16359c16360
< #line 2066
---
> #line 2067
16361,16362d16361
< #line 2068
<   ret = i915_gem_object_pin(obj, args->alignment);
16364c16363
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, args->alignment);
16366c16365
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
16368c16367
<     mutex_unlock(& dev->struct_mutex);
---
>     drm_gem_object_unreference(obj);
16369a16369,16370
>     mutex_unlock(& dev->struct_mutex);
> #line 2073
16374,16375d16374
< #line 2078
<   if (obj->write_domain & 1U) {
16377c16376
<     i915_gem_clflush_object(obj);
---
>   if (obj->write_domain & 1U) {
16379c16378
<     drm_agp_chipset_flush(dev);
---
>     i915_gem_clflush_object(obj);
16380a16380,16381
>     drm_agp_chipset_flush(dev);
> #line 2082
16385,16386d16385
< #line 2083
<   args->offset = obj_priv->gtt_offset;
16388c16387
<   drm_gem_object_unreference(obj);
---
>   args->offset = obj_priv->gtt_offset;
16389a16389,16390
>   drm_gem_object_unreference(obj);
> #line 2086
16391c16392
< #line 2087
---
> #line 2088
16395c16396
< #line 2090 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2091 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16402c16403
< #line 2094
---
> #line 2095
16404c16405
< #line 2097
---
> #line 2098
16406,16407d16406
< #line 2099
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16409c16408
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16410a16410,16411
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2102
16413,16414d16413
< #line 2103
<     mutex_unlock(& dev->struct_mutex);
16415a16415,16416
>     mutex_unlock(& dev->struct_mutex);
> #line 2105
16420c16421
< #line 2107
---
> #line 2108
16422,16423d16422
< #line 2109
<   drm_gem_object_unreference(obj);
16425c16424
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
16426a16426,16427
>   mutex_unlock(& dev->struct_mutex);
> #line 2112
16430c16431
< #line 2114 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2115 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16438c16439
< #line 2118
---
> #line 2119
16440,16441d16440
< #line 2122
<   mutex_lock(& dev->struct_mutex);
16443c16442
<   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
---
>   mutex_lock(& dev->struct_mutex);
16445c16444
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, args->handle);
16446a16446,16447
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
> #line 2126
16449,16450d16449
< #line 2127
<     mutex_unlock(& dev->struct_mutex);
16451a16451,16452
>     mutex_unlock(& dev->struct_mutex);
> #line 2129
16456,16457d16456
< #line 2131
<   obj_priv = obj->driver_private;
16458a16458,16459
>   obj_priv = obj->driver_private;
> #line 2133
16460,16461d16460
< #line 2134
<   drm_gem_object_unreference(obj);
16463c16462
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
16464a16464,16465
>   mutex_unlock(& dev->struct_mutex);
> #line 2137
16468c16469
< #line 2139 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2140 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16474c16475
< #line 2143
---
> #line 2144
16476c16477
< #line 2143
---
> #line 2144
16480c16481
< #line 2146 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2147 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16487c16488
< #line 2150
---
> #line 2151
16489,16490d16489
< #line 2150
<   obj_priv = tmp;
16492c16491
<   if ((unsigned long )obj_priv == (unsigned long )((void *)0)) {
---
>   obj_priv = tmp;
16493a16493,16494
>   if ((unsigned long )obj_priv == (unsigned long )((void *)0)) {
> #line 2153
16498,16499d16498
< #line 2160
<   obj->write_domain = 1;
16500a16500,16501
>   obj->write_domain = 1;
> #line 2162
16502c16503
< #line 2163
---
> #line 2164
16504,16505d16504
< #line 2165
<   obj->driver_private = obj_priv;
16507c16506
<   obj_priv->obj = obj;
---
>   obj->driver_private = obj_priv;
16509c16508
<   INIT_LIST_HEAD(& obj_priv->list);
---
>   obj_priv->obj = obj;
16510a16510,16511
>   INIT_LIST_HEAD(& obj_priv->list);
> #line 2169
16514c16515
< #line 2171 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2172 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16520c16521
< #line 2173
---
> #line 2174
16522c16523
< #line 2175
---
> #line 2176
16524c16525
< #line 2175
---
> #line 2176
16528c16529
< #line 2175
---
> #line 2176
16531c16532
< #line 2176
---
> #line 2177
16534c16535
< #line 2178
---
> #line 2179
16536,16537d16536
< #line 2180
<   drm_free(obj_priv->page_cpu_valid, 1, 2);
16539c16538
<   drm_free(obj->driver_private, 1, 2);
---
>   drm_free(obj_priv->page_cpu_valid, 1, 2);
16540a16540,16541
>   drm_free(obj->driver_private, 1, 2);
> #line 2183
16544c16545
< #line 2184 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2185 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16556c16557
< #line 2190
---
> #line 2191
16558c16559
< #line 2194
---
> #line 2195
16560c16561
< #line 2194
---
> #line 2195
16562c16563
< #line 2194
---
> #line 2195
16564c16565
< #line 2194
---
> #line 2195
16567c16568
< #line 2194
---
> #line 2195
16570c16571
< #line 2194
---
> #line 2195
16572c16573
< #line 2194
---
> #line 2195
16574c16575
< #line 2194
---
> #line 2195
16576c16577
< #line 2194
---
> #line 2195
16583,16584c16584,16585
<                              "i" (2194), "i" (sizeof(struct bug_entry )));
< #line 2194
---
>                              "i" (2195), "i" (sizeof(struct bug_entry )));
> #line 2195
16588c16589
< #line 2194
---
> #line 2195
16594c16595
< #line 2194
---
> #line 2195
16597,16598d16597
< #line 2196
<   ret = i915_gem_object_set_domain(obj, read_domains, write_domain);
16600c16599
<   if (ret) {
---
>   ret = i915_gem_object_set_domain(obj, read_domains, write_domain);
16601a16601,16602
>   if (ret) {
> #line 2199
16606c16607
< #line 2199
---
> #line 2200
16608,16609d16608
< #line 2201
<   if (flush_domains & (unsigned int )(~ (1 | 64))) {
16610a16610,16611
>   if (flush_domains & (unsigned int )(~ (1 | 64))) {
> #line 2203
16615c16616
< #line 2204
---
> #line 2205
16619c16620
< #line 2208 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2209 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16629c16630
< #line 2215
---
> #line 2216
16631c16632
< #line 2215
---
> #line 2216
16633c16634
< #line 2215
---
> #line 2216
16635c16636
< #line 2215
---
> #line 2216
16640c16641
< #line 2216
---
> #line 2217
16642c16643
< #line 2216
---
> #line 2217
16644c16645
< #line 2219
---
> #line 2220
16646,16647d16646
< #line 2221
<     if (obj_priv->pin_count != 0) {
16649c16648
<       printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
---
>     if (obj_priv->pin_count != 0) {
16651c16650
<       mutex_unlock(& dev->struct_mutex);
---
>       printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
16652a16652,16653
>       mutex_unlock(& dev->struct_mutex);
> #line 2225
16657,16658d16657
< #line 2227
<     ret = i915_gem_object_unbind(obj);
16660c16659
<     if (ret != 0) {
---
>     ret = i915_gem_object_unbind(obj);
16661a16661,16662
>     if (ret != 0) {
> #line 2230
16664,16665d16664
< #line 2231
<       mutex_unlock(& dev->struct_mutex);
16666a16666,16667
>       mutex_unlock(& dev->struct_mutex);
> #line 2233
16672c16673
< #line 2237
---
> #line 2238
16676c16677
< #line 2240 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2241 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
16710c16711
< #line 2243
---
> #line 2244
16712c16713
< #line 2247
---
> #line 2248
16714,16715d16714
< #line 2249
<   if (dev_priv->mm.suspended || (unsigned long )dev_priv->ring.ring_obj == (unsigned long )((void *)0)) {
16717c16716
<     mutex_unlock(& dev->struct_mutex);
---
>   if (dev_priv->mm.suspended || (unsigned long )dev_priv->ring.ring_obj == (unsigned long )((void *)0)) {
16718a16718,16719
>     mutex_unlock(& dev->struct_mutex);
> #line 2252
16723c16724
< #line 2257
---
> #line 2258
16725,16726d16725
< #line 2261
<   mutex_unlock(& dev->struct_mutex);
16728c16727
<   cancel_delayed_work_sync(& dev_priv->mm.retire_work);
---
>   mutex_unlock(& dev->struct_mutex);
16729a16729,16730
>   cancel_delayed_work_sync(& dev_priv->mm.retire_work);
> #line 2264
16731c16732
< #line 2265
---
> #line 2266
16733c16734
< #line 2269
---
> #line 2270
16735c16736
< #line 2271
---
> #line 2272
16737,16738d16737
< #line 2274
<   if (seqno == (uint32_t )0) {
16740c16739
<     mutex_unlock(& dev->struct_mutex);
---
>   if (seqno == (uint32_t )0) {
16741a16741,16742
>     mutex_unlock(& dev->struct_mutex);
> #line 2277
16746,16747d16746
< #line 2279
<   dev_priv->mm.waiting_gem_seqno = seqno;
16749c16748
<   last_seqno = 0;
---
>   dev_priv->mm.waiting_gem_seqno = seqno;
16751c16750
<   stuck = 0;
---
>   last_seqno = 0;
16753c16752
<   while (1) {
---
>   stuck = 0;
16755c16754
<     cur_seqno = i915_get_gem_seqno(dev);
---
>   while (1) {
16756a16756,16757
>     cur_seqno = i915_get_gem_seqno(dev);
> #line 2285
16758,16759d16758
< #line 2284
<     if (tmp) {
16760a16760,16761
>     if (tmp) {
> #line 2286
16765,16766d16765
< #line 2286
<     if (last_seqno == cur_seqno) {
16767a16767,16768
>     if (last_seqno == cur_seqno) {
> #line 2288
16769c16770
< #line 2287
---
> #line 2288
16771,16772d16771
< #line 2287
<       if (tmp___0 > 100) {
16774c16773
<         printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
---
>       if (tmp___0 > 100) {
16776c16775
<         dev_priv->mm.wedged = 1;
---
>         printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
16778c16777
<         __wake_up(& dev_priv->irq_queue, 1, 1, (void *)0);
---
>         dev_priv->mm.wedged = 1;
16779a16779,16780
>         __wake_up(& dev_priv->irq_queue, 1, 1, (void *)0);
> #line 2292
16787,16788d16787
< #line 2294
<     msleep(10);
16789a16789,16790
>     msleep(10);
> #line 2296
16792c16793
< #line 2297
---
> #line 2298
16794c16795
< #line 2299
---
> #line 2300
16796c16797
< #line 2304
---
> #line 2305
16798c16799
< #line 2304
---
> #line 2305
16800c16801
< #line 2304
---
> #line 2305
16802c16803
< #line 2304
---
> #line 2305
16805c16806
< #line 2304
---
> #line 2305
16808c16809
< #line 2304
---
> #line 2305
16810c16811
< #line 2304
---
> #line 2305
16812c16813
< #line 2304
---
> #line 2305
16814c16815
< #line 2304
---
> #line 2305
16821,16822c16822,16823
<                              "i" (2304), "i" (sizeof(struct bug_entry )));
< #line 2304
---
>                              "i" (2305), "i" (sizeof(struct bug_entry )));
> #line 2305
16826c16827
< #line 2304
---
> #line 2305
16832c16833
< #line 2304
---
> #line 2305
16835c16836
< #line 2305
---
> #line 2306
16837c16838
< #line 2305
---
> #line 2306
16839c16840
< #line 2305
---
> #line 2306
16841c16842
< #line 2305
---
> #line 2306
16844c16845
< #line 2305
---
> #line 2306
16847c16848
< #line 2305
---
> #line 2306
16849c16850
< #line 2305
---
> #line 2306
16851c16852
< #line 2305
---
> #line 2306
16853c16854
< #line 2305
---
> #line 2306
16860,16861c16861,16862
<                              "i" (2305), "i" (sizeof(struct bug_entry )));
< #line 2305
---
>                              "i" (2306), "i" (sizeof(struct bug_entry )));
> #line 2306
16865c16866
< #line 2305
---
> #line 2306
16871c16872
< #line 2305
---
> #line 2306
16874c16875
< #line 2310
---
> #line 2311
16876c16877
< #line 2310
---
> #line 2311
16878c16879
< #line 2310
---
> #line 2311
16880c16881
< #line 2310
---
> #line 2311
16883c16884
< #line 2310
---
> #line 2311
16886c16887
< #line 2310
---
> #line 2311
16888c16889
< #line 2310
---
> #line 2311
16890c16891
< #line 2310
---
> #line 2311
16892c16893
< #line 2310
---
> #line 2311
16899,16900c16900,16901
<                              "i" (2310), "i" (sizeof(struct bug_entry )));
< #line 2310
---
>                              "i" (2311), "i" (sizeof(struct bug_entry )));
> #line 2311
16904c16905
< #line 2310
---
> #line 2311
16910c16911
< #line 2310
---
> #line 2311
16913,16914d16913
< #line 2313
<   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
16916c16915
<   if (ret) {
---
>   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
16918c16917
<     mutex_unlock(& dev->struct_mutex);
---
>   if (ret) {
16919a16919,16920
>     mutex_unlock(& dev->struct_mutex);
> #line 2317
16924c16925
< #line 2319
---
> #line 2320
16926c16927
< #line 2319
---
> #line 2320
16928c16929
< #line 2319
---
> #line 2320
16930c16931
< #line 2319
---
> #line 2320
16933c16934
< #line 2319
---
> #line 2320
16936c16937
< #line 2319
---
> #line 2320
16938c16939
< #line 2319
---
> #line 2320
16940c16941
< #line 2319
---
> #line 2320
16942c16943
< #line 2319
---
> #line 2320
16949,16950c16950,16951
<                              "i" (2319), "i" (sizeof(struct bug_entry )));
< #line 2319
---
>                              "i" (2320), "i" (sizeof(struct bug_entry )));
> #line 2320
16954c16955
< #line 2319
---
> #line 2320
16960c16961
< #line 2319
---
> #line 2320
16963c16964
< #line 2320
---
> #line 2321
16965c16966
< #line 2320
---
> #line 2321
16967c16968
< #line 2320
---
> #line 2321
16969c16970
< #line 2320
---
> #line 2321
16972c16973
< #line 2320
---
> #line 2321
16975c16976
< #line 2320
---
> #line 2321
16977c16978
< #line 2320
---
> #line 2321
16979c16980
< #line 2320
---
> #line 2321
16981c16982
< #line 2320
---
> #line 2321
16988,16989c16989,16990
<                              "i" (2320), "i" (sizeof(struct bug_entry )));
< #line 2320
---
>                              "i" (2321), "i" (sizeof(struct bug_entry )));
> #line 2321
16993c16994
< #line 2320
---
> #line 2321
16999c17000
< #line 2320
---
> #line 2321
17002c17003
< #line 2321
---
> #line 2322
17004c17005
< #line 2321
---
> #line 2322
17006c17007
< #line 2321
---
> #line 2322
17008c17009
< #line 2321
---
> #line 2322
17011c17012
< #line 2321
---
> #line 2322
17014c17015
< #line 2321
---
> #line 2322
17016c17017
< #line 2321
---
> #line 2322
17018c17019
< #line 2321
---
> #line 2322
17020c17021
< #line 2321
---
> #line 2322
17027,17028c17028,17029
<                              "i" (2321), "i" (sizeof(struct bug_entry )));
< #line 2321
---
>                              "i" (2322), "i" (sizeof(struct bug_entry )));
> #line 2322
17032c17033
< #line 2321
---
> #line 2322
17038c17039
< #line 2321
---
> #line 2322
17041c17042
< #line 2322
---
> #line 2323
17043c17044
< #line 2322
---
> #line 2323
17045c17046
< #line 2322
---
> #line 2323
17047c17048
< #line 2322
---
> #line 2323
17050c17051
< #line 2322
---
> #line 2323
17053c17054
< #line 2322
---
> #line 2323
17055c17056
< #line 2322
---
> #line 2323
17057c17058
< #line 2322
---
> #line 2323
17059c17060
< #line 2322
---
> #line 2323
17066,17067c17067,17068
<                              "i" (2322), "i" (sizeof(struct bug_entry )));
< #line 2322
---
>                              "i" (2323), "i" (sizeof(struct bug_entry )));
> #line 2323
17071c17072
< #line 2322
---
> #line 2323
17077c17078
< #line 2322
---
> #line 2323
17080,17081d17080
< #line 2324
<   i915_gem_cleanup_ringbuffer(dev);
17082a17082,17083
>   i915_gem_cleanup_ringbuffer(dev);
> #line 2326
17084c17085
< #line 2327
---
> #line 2328
17088c17089
< #line 2330 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2331 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17097c17098
< #line 2333
---
> #line 2334
17099,17100d17099
< #line 2341
<   if (! ((((dev->pci_device == 10690 || dev->pci_device == 10674) || dev->pci_device == 10706) || dev->pci_device == 10818) || ((dev->pci_device == 11778 || dev->pci_device == 11794) || dev->pci_device == 11810))) {
17101a17101,17102
>   if (! ((((dev->pci_device == 10690 || dev->pci_device == 10674) || dev->pci_device == 10706) || dev->pci_device == 10818) || ((dev->pci_device == 11778 || dev->pci_device == 11794) || dev->pci_device == 11810))) {
> #line 2343
17106,17107d17106
< #line 2344
<   obj = drm_gem_object_alloc(dev, 4096);
17109c17108
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 4096);
17111c17110
<     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
---
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
17112a17112,17113
>     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
> #line 2348
17117,17118d17117
< #line 2349
<   obj_priv = obj->driver_private;
17119a17119,17120
>   obj_priv = obj->driver_private;
> #line 2351
17121,17122d17121
< #line 2352
<   ret = i915_gem_object_pin(obj, 4096);
17124c17123
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096);
17126c17125
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
17127a17127,17128
>     drm_gem_object_unreference(obj);
> #line 2356
17132c17133
< #line 2358
---
> #line 2359
17134,17135d17134
< #line 2360
<   dev_priv->hw_status_page = kmap(*(obj_priv->page_list + 0));
17137c17136
<   if ((unsigned long )dev_priv->hw_status_page == (unsigned long )((void *)0)) {
---
>   dev_priv->hw_status_page = kmap(*(obj_priv->page_list + 0));
17139c17138
<     printk("<3>[drm:%s] *ERROR* Failed to map status page.\n", "i915_gem_init_hws");
---
>   if ((unsigned long )dev_priv->hw_status_page == (unsigned long )((void *)0)) {
17141c17140
<     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
---
>     printk("<3>[drm:%s] *ERROR* Failed to map status page.\n", "i915_gem_init_hws");
17143c17142
<     drm_gem_object_unreference(obj);
---
>     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
17144a17144,17145
>     drm_gem_object_unreference(obj);
> #line 2366
17149,17150d17149
< #line 2367
<   dev_priv->hws_obj = obj;
17152c17151
<   memset(dev_priv->hw_status_page, 0, 1UL << 12);
---
>   dev_priv->hws_obj = obj;
17154c17153
<   writel(dev_priv->status_gfx_addr, dev_priv->regs + 8320);
---
>   memset(dev_priv->hw_status_page, 0, 1UL << 12);
17156c17155
<   readl(dev_priv->regs + 8320);
---
>   writel(dev_priv->status_gfx_addr, dev_priv->regs + 8320);
17157a17157,17158
>   readl(dev_priv->regs + 8320);
> #line 2372
17159c17160
< #line 2371
---
> #line 2372
17161c17162
< #line 2371
---
> #line 2372
17166c17167
< #line 2371
---
> #line 2372
17169c17170
< #line 2373
---
> #line 2374
17173c17174
< #line 2376 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2377 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17197c17198
< #line 2379
---
> #line 2380
17199,17200d17199
< #line 2385
<   ret = i915_gem_init_hws(dev);
17202c17201
<   if (ret != 0) {
---
>   ret = i915_gem_init_hws(dev);
17203a17203,17204
>   if (ret != 0) {
> #line 2388
17208,17209d17208
< #line 2389
<   obj = drm_gem_object_alloc(dev, 128 * 1024);
17211c17210
<   if ((unsigned long )obj == (unsigned long )((void *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 128 * 1024);
17213c17212
<     printk("<3>[drm:%s] *ERROR* Failed to allocate ringbuffer\n", "i915_gem_init_ringbuffer");
---
>   if ((unsigned long )obj == (unsigned long )((void *)0)) {
17214a17214,17215
>     printk("<3>[drm:%s] *ERROR* Failed to allocate ringbuffer\n", "i915_gem_init_ringbuffer");
> #line 2393
17219c17220
< #line 2394
---
> #line 2395
17221,17222d17221
< #line 2396
<   ret = i915_gem_object_pin(obj, 4096);
17224c17223
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096);
17226c17225
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
17227a17227,17228
>     drm_gem_object_unreference(obj);
> #line 2400
17232,17233d17232
< #line 2403
<   dev_priv->ring.Size = obj->size;
17234a17234,17235
>   dev_priv->ring.Size = obj->size;
> #line 2405
17236,17237d17236
< #line 2406
<   dev_priv->ring.map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
17239c17238
<   dev_priv->ring.map.size = obj->size;
---
>   dev_priv->ring.map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
17241c17240
<   dev_priv->ring.map.type = 0;
---
>   dev_priv->ring.map.size = obj->size;
17243c17242
<   dev_priv->ring.map.flags = 0;
---
>   dev_priv->ring.map.type = 0;
17244a17244,17245
>   dev_priv->ring.map.flags = 0;
> #line 2411
17246,17247d17246
< #line 2412
<   drm_core_ioremap_wc(& dev_priv->ring.map, dev);
17249c17248
<   if ((unsigned long )dev_priv->ring.map.handle == (unsigned long )((void *)0)) {
---
>   drm_core_ioremap_wc(& dev_priv->ring.map, dev);
17251c17250
<     printk("<3>[drm:%s] *ERROR* Failed to map ringbuffer.\n", "i915_gem_init_ringbuffer");
---
>   if ((unsigned long )dev_priv->ring.map.handle == (unsigned long )((void *)0)) {
17253c17252
<     memset(& dev_priv->ring, 0, sizeof(dev_priv->ring));
---
>     printk("<3>[drm:%s] *ERROR* Failed to map ringbuffer.\n", "i915_gem_init_ringbuffer");
17255c17254
<     drm_gem_object_unreference(obj);
---
>     memset(& dev_priv->ring, 0, sizeof(dev_priv->ring));
17256a17256,17257
>     drm_gem_object_unreference(obj);
> #line 2418
17261,17262d17261
< #line 2419
<   dev_priv->ring.ring_obj = obj;
17263a17263,17264
>   dev_priv->ring.ring_obj = obj;
> #line 2421
17265,17266d17265
< #line 2423
<   writel(0, dev_priv->regs + 8252);
17268c17267
<   writel(0, dev_priv->regs + 8240);
---
>   writel(0, dev_priv->regs + 8252);
17269a17269,17270
>   writel(0, dev_priv->regs + 8240);
> #line 2426
17271,17272d17271
< #line 2428
<   writel(obj_priv->gtt_offset, dev_priv->regs + 8248);
17273a17273,17274
>   writel(obj_priv->gtt_offset, dev_priv->regs + 8248);
> #line 2430
17275c17276
< #line 2429
---
> #line 2430
17277,17278d17277
< #line 2432
<   if (head != (u32 )0) {
17279a17279,17280
>   if (head != (u32 )0) {
> #line 2434
17281c17282
< #line 2433
---
> #line 2434
17283c17284
< #line 2433
---
> #line 2434
17285c17286
< #line 2433
---
> #line 2434
17287c17288
< #line 2433
---
> #line 2434
17290c17291
< #line 2439
---
> #line 2440
17292c17293
< #line 2441
---
> #line 2442
17294c17295
< #line 2441
---
> #line 2442
17296c17297
< #line 2441
---
> #line 2442
17298c17299
< #line 2441
---
> #line 2442
17300c17301
< #line 2441
---
> #line 2442
17306c17307
< #line 2449
---
> #line 2450
17308c17309
< #line 2454
---
> #line 2455
17310c17311
< #line 2454
---
> #line 2455
17312,17313d17312
< #line 2457
<   if (head != (u32 )0) {
17314a17314,17315
>   if (head != (u32 )0) {
> #line 2459
17316c17317
< #line 2458
---
> #line 2459
17318c17319
< #line 2458
---
> #line 2459
17320c17321
< #line 2458
---
> #line 2459
17322c17323
< #line 2458
---
> #line 2459
17325c17326
< #line 2464
---
> #line 2465
17330c17331
< #line 2468
---
> #line 2469
17332c17333
< #line 2470
---
> #line 2471
17336c17337
< #line 2473 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2474 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17344c17345
< #line 2476
---
> #line 2477
17346,17347d17346
< #line 2478
<   if ((unsigned long )dev_priv->ring.ring_obj == (unsigned long )((void *)0)) {
17348a17348,17349
>   if ((unsigned long )dev_priv->ring.ring_obj == (unsigned long )((void *)0)) {
> #line 2480
17353c17354
< #line 2481
---
> #line 2482
17355,17356d17355
< #line 2483
<   i915_gem_object_unpin(dev_priv->ring.ring_obj);
17358c17357
<   drm_gem_object_unreference(dev_priv->ring.ring_obj);
---
>   i915_gem_object_unpin(dev_priv->ring.ring_obj);
17360c17359
<   dev_priv->ring.ring_obj = (void *)0;
---
>   drm_gem_object_unreference(dev_priv->ring.ring_obj);
17361a17361,17362
>   dev_priv->ring.ring_obj = (void *)0;
> #line 2487
17363,17364d17363
< #line 2488
<   if ((unsigned long )dev_priv->hws_obj != (unsigned long )((void *)0)) {
17366c17365
<     obj = dev_priv->hws_obj;
---
>   if ((unsigned long )dev_priv->hws_obj != (unsigned long )((void *)0)) {
17367a17367,17368
>     obj = dev_priv->hws_obj;
> #line 2491
17369c17370
< #line 2492
---
> #line 2493
17371c17372
< #line 2492
---
> #line 2493
17374,17375d17374
< #line 2493
<     i915_gem_object_unpin(obj);
17377c17376
<     drm_gem_object_unreference(obj);
---
>     i915_gem_object_unpin(obj);
17379c17378
<     dev_priv->hws_obj = (void *)0;
---
>     drm_gem_object_unreference(obj);
17381c17380
<     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
---
>     dev_priv->hws_obj = (void *)0;
17382a17382,17383
>     memset(& dev_priv->hws_map, 0, sizeof(dev_priv->hws_map));
> #line 2498
17384c17385
< #line 2500
---
> #line 2501
17389c17390
< #line 2502
---
> #line 2503
17393c17394
< #line 2504 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2505 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17412c17413
< #line 2508
---
> #line 2509
17414,17415d17414
< #line 2511
<   if (dev_priv->mm.wedged) {
17417c17416
<     printk("<3>[drm:%s] *ERROR* Reenabling wedged hardware, good luck\n", "i915_gem_entervt_ioctl");
---
>   if (dev_priv->mm.wedged) {
17418a17418,17419
>     printk("<3>[drm:%s] *ERROR* Reenabling wedged hardware, good luck\n", "i915_gem_entervt_ioctl");
> #line 2514
17423,17424d17423
< #line 2516
<   ret = i915_gem_init_ringbuffer(dev);
17426c17425
<   if (ret != 0) {
---
>   ret = i915_gem_init_ringbuffer(dev);
17427a17427,17428
>   if (ret != 0) {
> #line 2519
17432,17433d17432
< #line 2520
<   mutex_lock(& dev->struct_mutex);
17434a17434,17435
>   mutex_lock(& dev->struct_mutex);
> #line 2522
17436c17437
< #line 2521
---
> #line 2522
17438c17439
< #line 2521
---
> #line 2522
17440c17441
< #line 2521
---
> #line 2522
17443c17444
< #line 2521
---
> #line 2522
17446c17447
< #line 2521
---
> #line 2522
17448c17449
< #line 2521
---
> #line 2522
17450c17451
< #line 2521
---
> #line 2522
17452c17453
< #line 2521
---
> #line 2522
17459,17460c17460,17461
<                              "i" (2521), "i" (sizeof(struct bug_entry )));
< #line 2521
---
>                              "i" (2522), "i" (sizeof(struct bug_entry )));
> #line 2522
17464c17465
< #line 2521
---
> #line 2522
17470c17471
< #line 2521
---
> #line 2522
17473c17474
< #line 2522
---
> #line 2523
17475c17476
< #line 2522
---
> #line 2523
17477c17478
< #line 2522
---
> #line 2523
17479c17480
< #line 2522
---
> #line 2523
17482c17483
< #line 2522
---
> #line 2523
17485c17486
< #line 2522
---
> #line 2523
17487c17488
< #line 2522
---
> #line 2523
17489c17490
< #line 2522
---
> #line 2523
17491c17492
< #line 2522
---
> #line 2523
17498,17499c17499,17500
<                              "i" (2522), "i" (sizeof(struct bug_entry )));
< #line 2522
---
>                              "i" (2523), "i" (sizeof(struct bug_entry )));
> #line 2523
17503c17504
< #line 2522
---
> #line 2523
17509c17510
< #line 2522
---
> #line 2523
17512c17513
< #line 2523
---
> #line 2524
17514c17515
< #line 2523
---
> #line 2524
17516c17517
< #line 2523
---
> #line 2524
17518c17519
< #line 2523
---
> #line 2524
17521c17522
< #line 2523
---
> #line 2524
17524c17525
< #line 2523
---
> #line 2524
17526c17527
< #line 2523
---
> #line 2524
17528c17529
< #line 2523
---
> #line 2524
17530c17531
< #line 2523
---
> #line 2524
17537,17538c17538,17539
<                              "i" (2523), "i" (sizeof(struct bug_entry )));
< #line 2523
---
>                              "i" (2524), "i" (sizeof(struct bug_entry )));
> #line 2524
17542c17543
< #line 2523
---
> #line 2524
17548c17549
< #line 2523
---
> #line 2524
17551c17552
< #line 2524
---
> #line 2525
17553c17554
< #line 2524
---
> #line 2525
17555c17556
< #line 2524
---
> #line 2525
17557c17558
< #line 2524
---
> #line 2525
17560c17561
< #line 2524
---
> #line 2525
17563c17564
< #line 2524
---
> #line 2525
17565c17566
< #line 2524
---
> #line 2525
17567c17568
< #line 2524
---
> #line 2525
17569c17570
< #line 2524
---
> #line 2525
17576,17577c17577,17578
<                              "i" (2524), "i" (sizeof(struct bug_entry )));
< #line 2524
---
>                              "i" (2525), "i" (sizeof(struct bug_entry )));
> #line 2525
17581c17582
< #line 2524
---
> #line 2525
17587c17588
< #line 2524
---
> #line 2525
17590,17591d17590
< #line 2525
<   dev_priv->mm.suspended = 0;
17592a17592,17593
>   dev_priv->mm.suspended = 0;
> #line 2527
17594c17595
< #line 2528
---
> #line 2529
17596c17597
< #line 2530
---
> #line 2531
17600c17601
< #line 2533 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2534 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17606,17607d17606
< #line 2539
<   ret = i915_gem_idle(dev);
17608a17608,17609
>   ret = i915_gem_idle(dev);
> #line 2541
17610c17611
< #line 2542
---
> #line 2543
17614c17615
< #line 2545 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2546 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17620,17621d17620
< #line 2550
<   ret = i915_gem_idle(dev);
17623c17622
<   if (ret) {
---
>   ret = i915_gem_idle(dev);
17624a17624,17625
>   if (ret) {
> #line 2553
17630c17631
< #line 2553
---
> #line 2554
17634c17635
< #line 2555 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
---
> #line 2556 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--32_1--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/32_1/drivers/gpu/drm/i915/i915_gem.c"
17642c17643
< #line 2558
---
> #line 2559
17644,17645d17644
< #line 2560
<   INIT_LIST_HEAD(& dev_priv->mm.active_list);
17647c17646
<   INIT_LIST_HEAD(& dev_priv->mm.flushing_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.active_list);
17649c17648
<   INIT_LIST_HEAD(& dev_priv->mm.inactive_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.flushing_list);
17651c17650
<   INIT_LIST_HEAD(& dev_priv->mm.request_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.inactive_list);
17652a17652,17653
>   INIT_LIST_HEAD(& dev_priv->mm.request_list);
> #line 2565
17654c17655
< #line 2564
---
> #line 2565
17656c17657
< #line 2564
---
> #line 2565
17658c17659
< #line 2564
---
> #line 2565
17660c17661
< #line 2564
---
> #line 2565
17662c17663
< #line 2564
---
> #line 2565
17664c17665
< #line 2564
---
> #line 2565
17666c17667
< #line 2564
---
> #line 2565
17669c17670
< #line 2564
---
> #line 2565
17672c17673
< #line 2564
---
> #line 2565
17674c17675
< #line 2564
---
> #line 2565
17677c17678
< #line 2566
---
> #line 2567
17679c17680
< #line 2566
---
> #line 2567
17681c17682
< #line 2566
---
> #line 2567
17683c17684
< #line 2566
---
> #line 2567
17685c17686
< #line 2566
---
> #line 2567
17687c17688
< #line 2566
---
> #line 2567
17689c17690
< #line 2566
---
> #line 2567
17692c17693
< #line 2566
---
> #line 2567
17695c17696
< #line 2568
---
> #line 2569
17697,17698d17697
< #line 2570
<   i915_gem_detect_bit_6_swizzle(dev);
17699a17699,17700
>   i915_gem_detect_bit_6_swizzle(dev);
> #line 2572

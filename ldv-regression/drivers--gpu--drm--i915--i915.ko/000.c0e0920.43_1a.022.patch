12456a12457,12458
> #line 163
>     return (ret);
12460c12462
< #line 165
---
> #line 166
12462c12464
< #line 167
---
> #line 168
12464,12465d12465
< #line 169
<   if ((unsigned long long )read != args->size) {
12467c12467
<     drm_gem_object_unreference(obj);
---
>   if ((unsigned long long )read != args->size) {
12469c12469
<     mutex_unlock(& dev->struct_mutex);
---
>     drm_gem_object_unreference(obj);
12471c12471
<     if (read < 0L) {
---
>     mutex_unlock(& dev->struct_mutex);
12472a12473,12474
>     if (read < 0L) {
> #line 174
12475c12477
< #line 175
---
> #line 176
12481,12482d12482
< #line 178
<   drm_gem_object_unreference(obj);
12483a12484,12485
>   drm_gem_object_unreference(obj);
> #line 180
12485c12487
< #line 181
---
> #line 182
12489c12491
< #line 185 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 186 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12512c12514
< #line 189
---
> #line 190
12514c12516
< #line 196
---
> #line 197
12516,12517d12517
< #line 200
<   user_data = (char *)args->data_ptr;
12519c12519
<   remain = (ssize_t )args->size;
---
>   user_data = (char *)args->data_ptr;
12520a12521,12522
>   remain = (ssize_t )args->size;
> #line 203
12522c12524
< #line 202
---
> #line 203
12525c12527
< #line 202
---
> #line 203
12527,12528d12528
< #line 202
<   if (tmp___0 == 0L) {
12529a12530,12531
>   if (tmp___0 == 0L) {
> #line 204
12534,12535d12535
< #line 206
<   mutex_lock_nested(& dev->struct_mutex, 0U);
12537c12537
<   ret = i915_gem_object_pin(obj, 0U);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
12539c12539
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 0U);
12541c12541
<     mutex_unlock(& dev->struct_mutex);
---
>   if (ret != 0) {
12542a12543,12544
>     mutex_unlock(& dev->struct_mutex);
> #line 211
12547c12549
< #line 212
---
> #line 213
12549,12550d12550
< #line 214
<   if (ret != 0) {
12551a12552,12553
>   if (ret != 0) {
> #line 216
12556,12557d12557
< #line 217
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
12559c12559
<   offset = (loff_t )((uint64_t )obj_priv->gtt_offset + args->offset);
---
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
12560a12561,12562
>   offset = (loff_t )((uint64_t )obj_priv->gtt_offset + args->offset);
> #line 220
12562c12564
< #line 221
---
> #line 222
12565,12566d12566
< #line 228
<   i = (int )(offset >> 12);
12568c12568
<   o = (int )offset & 4095;
---
>   i = (int )(offset >> 12);
12570c12570
<   l = (int )remain;
---
>   o = (int )offset & 4095;
12572c12572
<   if ((unsigned int )(o + l) > 4096U) {
---
>   l = (int )remain;
12573a12574,12575
>   if ((unsigned int )(o + l) > 4096U) {
> #line 233
12578c12580
< #line 234
---
> #line 235
12580c12582
< #line 255
---
> #line 256
12582c12584
< #line 255
---
> #line 256
12584,12585d12585
< #line 261
<   if ((unsigned long )vaddr == (unsigned long )((char *)0)) {
12587c12587
<     ret = -14;
---
>   if ((unsigned long )vaddr == (unsigned long )((char *)0)) {
12588a12589,12590
>     ret = -14;
> #line 264
12593c12595
< #line 265
---
> #line 266
12596c12598
< #line 265
---
> #line 266
12598,12599d12599
< #line 269
<   iounmap((void volatile   *)vaddr);
12601c12601
<   if (unwritten != 0UL) {
---
>   iounmap((void volatile   *)vaddr);
12603c12603
<     ret = -14;
---
>   if (unwritten != 0UL) {
12604a12605,12606
>     ret = -14;
> #line 273
12609,12610d12610
< #line 276
<   remain = remain - (ssize_t )l;
12612c12612
<   user_data = user_data + (unsigned long )l;
---
>   remain = remain - (ssize_t )l;
12613a12614,12615
>   user_data = user_data + (unsigned long )l;
> #line 279
12616,12617d12617
< #line 221
<   if (remain > 0L) {
12618a12619,12620
>   if (remain > 0L) {
> #line 223
12625,12626d12626
< #line 287
<   i915_gem_object_unpin(obj);
12627a12628,12629
>   i915_gem_object_unpin(obj);
> #line 289
12629c12631
< #line 290
---
> #line 291
12633c12635
< #line 294 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 295 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12642c12644
< #line 302
---
> #line 303
12644c12646
< #line 304
---
> #line 305
12646,12647d12647
< #line 306
<   if (ret != 0) {
12649c12649
<     mutex_unlock(& dev->struct_mutex);
---
>   if (ret != 0) {
12650a12651,12652
>     mutex_unlock(& dev->struct_mutex);
> #line 309
12655c12657
< #line 311
---
> #line 312
12657c12659
< #line 313
---
> #line 314
12660,12661d12661
< #line 316
<   if ((unsigned long long )written != args->size) {
12663c12663
<     mutex_unlock(& dev->struct_mutex);
---
>   if ((unsigned long long )written != args->size) {
12665c12665
<     if (written < 0L) {
---
>     mutex_unlock(& dev->struct_mutex);
12666a12667,12668
>     if (written < 0L) {
> #line 320
12669c12671
< #line 321
---
> #line 322
12675c12677
< #line 324
---
> #line 325
12677c12679
< #line 326
---
> #line 327
12681c12683
< #line 335 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 336 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12690c12692
< #line 338
---
> #line 339
12692c12694
< #line 341
---
> #line 342
12694,12695d12695
< #line 343
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12697c12697
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12698a12699,12700
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 346
12703c12705
< #line 346
---
> #line 347
12705c12707
< #line 352
---
> #line 353
12707,12708d12708
< #line 354
<     drm_gem_object_unreference(obj);
12709a12710,12711
>     drm_gem_object_unreference(obj);
> #line 356
12714c12716
< #line 364
---
> #line 365
12716c12718
< #line 366
---
> #line 367
12719c12721
< #line 368
---
> #line 369
12722c12724
< #line 375
---
> #line 376
12724c12726
< #line 377
---
> #line 378
12728c12730
< #line 384 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 385 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12736c12738
< #line 387
---
> #line 388
12738,12739d12739
< #line 391
<   if (((dev->driver)->driver_features & 4096U) == 0U) {
12740a12741,12742
>   if (((dev->driver)->driver_features & 4096U) == 0U) {
> #line 393
12745,12746d12746
< #line 394
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12748c12748
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12749a12750,12751
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 397
12754c12756
< #line 398
---
> #line 399
12756c12758
< #line 403
---
> #line 404
12758,12759d12759
< #line 405
<   drm_gem_object_unreference(obj);
12761c12761
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
12762a12763,12764
>   mutex_unlock(& dev->struct_mutex);
> #line 408
12766c12768
< #line 414 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 415 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12775c12777
< #line 417
---
> #line 418
12777c12779
< #line 420
---
> #line 421
12779,12780d12780
< #line 422
<   if (((dev->driver)->driver_features & 4096U) == 0U) {
12781a12782,12783
>   if (((dev->driver)->driver_features & 4096U) == 0U) {
> #line 424
12786,12787d12787
< #line 425
<   mutex_lock_nested(& dev->struct_mutex, 0U);
12789c12789
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
12791c12791
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12793c12793
<     mutex_unlock(& dev->struct_mutex);
---
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
12794a12795,12796
>     mutex_unlock(& dev->struct_mutex);
> #line 430
12799c12801
< #line 436
---
> #line 437
12801,12802d12802
< #line 439
<   if ((int )obj->write_domain & 1 && obj_priv->pin_count != 0) {
12804c12804
<     i915_gem_clflush_object(obj);
---
>   if ((int )obj->write_domain & 1 && obj_priv->pin_count != 0) {
12805a12806,12807
>     i915_gem_clflush_object(obj);
> #line 442
12810,12811d12811
< #line 443
<   drm_gem_object_unreference(obj);
12813c12813
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
12814a12815,12816
>   mutex_unlock(& dev->struct_mutex);
> #line 446
12818c12820
< #line 456 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 457 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12830c12832
< #line 459
---
> #line 460
12832,12833d12833
< #line 464
<   if (((dev->driver)->driver_features & 4096U) == 0U) {
12834a12835,12836
>   if (((dev->driver)->driver_features & 4096U) == 0U) {
> #line 466
12839,12840d12840
< #line 467
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12842c12842
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12843a12844,12845
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 470
12848c12850
< #line 471
---
> #line 472
12850c12852
< #line 473
---
> #line 474
12852,12853d12853
< #line 473
<   down_write(& (tmp->mm)->mmap_sem);
12854a12855,12856
>   down_write(& (tmp->mm)->mmap_sem);
> #line 475
12856c12858
< #line 477
---
> #line 478
12858,12859d12859
< #line 477
<   up_write(& (tmp___0->mm)->mmap_sem);
12861c12861
<   mutex_lock_nested(& dev->struct_mutex, 0U);
---
>   up_write(& (tmp___0->mm)->mmap_sem);
12863c12863
<   drm_gem_object_unreference(obj);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
12865c12865
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
12866a12867,12868
>   mutex_unlock(& dev->struct_mutex);
> #line 482
12868,12869d12869
< #line 481
<   if (tmp___1 != 0L) {
12870a12871,12872
>   if (tmp___1 != 0L) {
> #line 483
12875c12877
< #line 484
---
> #line 485
12877c12879
< #line 486
---
> #line 487
12881c12883
< #line 490 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 491 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12889,12890d12890
< #line 492
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
12891a12892,12893
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
> #line 494
12893,12894d12894
< #line 496
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
12895a12896,12897
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
> #line 498
12900c12902
< #line 500
---
> #line 501
12902c12904
< #line 500
---
> #line 501
12905,12906d12906
< #line 501
<   if ((unsigned long )*(obj_priv->page_list + (unsigned long )i) != (unsigned long )((struct page *)0)) {
12908c12908
<     if (obj_priv->dirty != 0) {
---
>   if ((unsigned long )*(obj_priv->page_list + (unsigned long )i) != (unsigned long )((struct page *)0)) {
12909a12910,12911
>     if (obj_priv->dirty != 0) {
> #line 504
12914,12915d12915
< #line 504
<     mark_page_accessed(*(obj_priv->page_list + (unsigned long )i));
12916a12917,12918
>     mark_page_accessed(*(obj_priv->page_list + (unsigned long )i));
> #line 506
12921c12923
< #line 500
---
> #line 501
12924,12925d12925
< #line 500
<   if (i < page_count___0) {
12926a12927,12928
>   if (i < page_count___0) {
> #line 502
12931c12933
< #line 507
---
> #line 508
12933c12935
< #line 509
---
> #line 510
12935,12936d12936
< #line 512
<   obj_priv->page_list = 0;
12937a12938,12939
>   obj_priv->page_list = 0;
> #line 514
12941c12943
< #line 516 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 517 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12949,12950d12950
< #line 518
<   dev = obj->dev;
12952c12952
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
---
>   dev = obj->dev;
12953a12954,12955
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 521
12955,12956d12956
< #line 523
<   if (obj_priv->active == 0) {
12958c12958
<     drm_gem_object_reference(obj);
---
>   if (obj_priv->active == 0) {
12959a12960,12961
>     drm_gem_object_reference(obj);
> #line 526
12964c12966
< #line 528
---
> #line 529
12966c12968
< #line 530
---
> #line 531
12970c12972
< #line 534 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 535 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12978,12979d12979
< #line 536
<   dev = obj->dev;
12981c12981
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
---
>   dev = obj->dev;
12982a12983,12984
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 539
12984,12985d12985
< #line 541
<   if (obj_priv->pin_count != 0) {
12986a12987,12988
>   if (obj_priv->pin_count != 0) {
> #line 543
12989c12991
< #line 544
---
> #line 545
12992,12993d12993
< #line 546
<   if (obj_priv->active != 0) {
12995c12995
<     obj_priv->active = 0;
---
>   if (obj_priv->active != 0) {
12996a12997,12998
>     obj_priv->active = 0;
> #line 549
13001c13003
< #line 550
---
> #line 551
13005c13007
< #line 562 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 563 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13019c13021
< #line 564
---
> #line 565
13021c13023
< #line 570
---
> #line 571
13023,13024d13024
< #line 570
<   request = (struct drm_i915_gem_request *)tmp;
13026c13026
<   if ((unsigned long )request == (unsigned long )((struct drm_i915_gem_request *)0)) {
---
>   request = (struct drm_i915_gem_request *)tmp;
13027a13028,13029
>   if ((unsigned long )request == (unsigned long )((struct drm_i915_gem_request *)0)) {
> #line 573
13032,13033d13033
< #line 577
<   seqno = dev_priv->mm.next_gem_seqno;
13035c13035
<   dev_priv->mm.next_gem_seqno = dev_priv->mm.next_gem_seqno + (uint32_t )1;
---
>   seqno = dev_priv->mm.next_gem_seqno;
13037c13037
<   if (dev_priv->mm.next_gem_seqno == 0U) {
---
>   dev_priv->mm.next_gem_seqno = dev_priv->mm.next_gem_seqno + (uint32_t )1;
13038a13039,13040
>   if (dev_priv->mm.next_gem_seqno == 0U) {
> #line 581
13043c13045
< #line 582
---
> #line 583
13045c13047
< #line 582
---
> #line 583
13050,13057d13051
< #line 582
<   outcount = 0U;
< #line 582
<   outring = (unsigned int )dev_priv->ring.tail;
< #line 582
<   ringmask = (unsigned int )dev_priv->ring.tail_mask;
< #line 582
<   virt = (char volatile   *)dev_priv->ring.virtual_start;
13059c13053
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = 276824065U;
---
>   outcount = 0U;
13061c13055
<   outcount = outcount + 1U;
---
>   outring = (unsigned int )dev_priv->ring.tail;
13063c13057
<   outring = outring + 4U;
---
>   ringmask = (unsigned int )dev_priv->ring.tail_mask;
13065c13059
<   outring = outring & ringmask;
---
>   virt = (char volatile   *)dev_priv->ring.virtual_start;
13067c13061
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = 64U;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = 276824065U;
13075c13069
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = seqno;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = 64U;
13082,13084c13076,13078
< #line 587
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = 16777216U;
< #line 587
---
> #line 586
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = seqno;
> #line 586
13086c13080
< #line 587
---
> #line 586
13088c13082
< #line 587
---
> #line 586
13091c13085
<   dev_priv->ring.tail = (int )outring;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = 16777216U;
13093c13087,13089
<   dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
---
>   outcount = outcount + 1U;
> #line 588
>   outring = outring + 4U;
13094a13091,13096
>   outring = outring & ringmask;
> #line 589
>   dev_priv->ring.tail = (int )outring;
> #line 589
>   dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
> #line 589
13096c13098
< #line 590
---
> #line 591
13098c13100
< #line 590
---
> #line 591
13103,13104d13104
< #line 592
<   request->seqno = seqno;
13106c13106
<   request->emitted_jiffies = jiffies;
---
>   request->seqno = seqno;
13108c13108
<   request->flush_domains = flush_domains;
---
>   request->emitted_jiffies = jiffies;
13110c13110
<   was_empty = list_empty((struct list_head  const  *)(& dev_priv->mm.request_list));
---
>   request->flush_domains = flush_domains;
13111a13112,13113
>   was_empty = list_empty((struct list_head  const  *)(& dev_priv->mm.request_list));
> #line 597
13113,13114d13114
< #line 598
<   if (was_empty != 0) {
13115a13116,13117
>   if (was_empty != 0) {
> #line 600
13120c13122
< #line 600
---
> #line 601
13124c13126
< #line 610 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 611 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13136,13137d13137
< #line 612
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
13139c13139
<   cmd = 33554436U;
---
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
13140a13141,13142
>   cmd = 33554436U;
> #line 615
13142,13143d13143
< #line 618
<   if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
13144a13145,13146
>   if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
> #line 620
13149c13151
< #line 620
---
> #line 621
13151c13153
< #line 620
---
> #line 621
13156,13163d13157
< #line 620
<   outcount = 0U;
< #line 620
<   outring = (unsigned int )dev_priv->ring.tail;
< #line 620
<   ringmask = (unsigned int )dev_priv->ring.tail_mask;
< #line 620
<   virt = (char volatile   *)dev_priv->ring.virtual_start;
13165c13159
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = cmd;
---
>   outcount = 0U;
13167c13161
<   outcount = outcount + 1U;
---
>   outring = (unsigned int )dev_priv->ring.tail;
13169c13163
<   outring = outring + 4U;
---
>   ringmask = (unsigned int )dev_priv->ring.tail_mask;
13171c13165
<   outring = outring & ringmask;
---
>   virt = (char volatile   *)dev_priv->ring.virtual_start;
13173c13167
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = cmd;
13181c13175
<   dev_priv->ring.tail = (int )outring;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
13183c13177
<   dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
---
>   outcount = outcount + 1U;
13185c13179,13181
<   writel(outring, (void volatile   *)dev_priv->regs + 8240U);
---
>   outring = outring + 4U;
> #line 623
>   outring = outring & ringmask;
13186a13183,13188
>   dev_priv->ring.tail = (int )outring;
> #line 624
>   dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
> #line 624
>   writel(outring, (void volatile   *)dev_priv->regs + 8240U);
> #line 625
13190c13192
< #line 632 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 633 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13206c13208
< #line 635
---
> #line 636
13208c13210
< #line 640
---
> #line 641
13211c13213
< #line 644
---
> #line 645
13213c13215
< #line 644
---
> #line 645
13215c13217
< #line 647
---
> #line 648
13217,13218d13218
< #line 653
<   if (obj_priv->last_rendering_seqno != request->seqno) {
13219a13220,13221
>   if (obj_priv->last_rendering_seqno != request->seqno) {
> #line 655
13224,13225d13225
< #line 660
<   if (obj->write_domain != 0U) {
13226a13227,13228
>   if (obj->write_domain != 0U) {
> #line 662
13229c13231
< #line 664
---
> #line 665
13233c13235
< #line 640
---
> #line 641
13235,13236d13236
< #line 640
<   if (tmp == 0) {
13237a13238,13239
>   if (tmp == 0) {
> #line 642
13243c13245
< #line 668
---
> #line 669
13245c13247
< #line 674
---
> #line 675
13247c13249
< #line 674
---
> #line 675
13249c13251
< #line 674
---
> #line 675
13251c13253
< #line 674
---
> #line 675
13253c13255
< #line 674
---
> #line 675
13256c13258
< #line 676
---
> #line 677
13258,13259d13259
< #line 678
<     if ((obj___0->write_domain & request->flush_domains) != 0U) {
13261c13261
<       obj___0->write_domain = 0U;
---
>     if ((obj___0->write_domain & request->flush_domains) != 0U) {
13262a13263,13264
>       obj___0->write_domain = 0U;
> #line 681
13267c13269
< #line 674
---
> #line 675
13269c13271
< #line 674
---
> #line 675
13271c13273
< #line 674
---
> #line 675
13274,13275d13275
< #line 674
<     if ((unsigned long )(& obj_priv___0->list) != (unsigned long )(& dev_priv->mm.flushing_list)) {
13276a13277,13278
>     if ((unsigned long )(& obj_priv___0->list) != (unsigned long )(& dev_priv->mm.flushing_list)) {
> #line 676
13285c13287
< #line 680
---
> #line 681
13289c13291
< #line 691 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 692 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13295c13297
< #line 693
---
> #line 694
13299c13301
< #line 697 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 698 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13305c13307
< #line 699
---
> #line 700
13307c13309
< #line 701
---
> #line 702
13311c13313
< #line 708 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 709 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13323c13325
< #line 710
---
> #line 711
13325c13327
< #line 713
---
> #line 714
13327c13329
< #line 715
---
> #line 716
13330c13332
< #line 719
---
> #line 720
13332c13334
< #line 719
---
> #line 720
13334c13336
< #line 722
---
> #line 723
13336c13338
< #line 724
---
> #line 725
13338c13340
< #line 724
---
> #line 725
13340c13342
< #line 726
---
> #line 727
13342,13343d13343
< #line 728
<     list_del(& request->list);
13344a13345,13346
>     list_del(& request->list);
> #line 730
13347c13349
< #line 731
---
> #line 732
13351c13353
< #line 715
---
> #line 716
13353,13354d13354
< #line 715
<   if (tmp___0 == 0) {
13355a13356,13357
>   if (tmp___0 == 0) {
> #line 717
13361c13363
< #line 720
---
> #line 721
13365c13367
< #line 736 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 737 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13374c13376
< #line 741
---
> #line 742
13376c13378
< #line 741
---
> #line 742
13378c13380
< #line 743
---
> #line 744
13380,13381d13381
< #line 745
<   mutex_lock_nested(& dev->struct_mutex, 0U);
13383c13383
<   i915_gem_retire_requests(dev);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
13384a13385,13386
>   i915_gem_retire_requests(dev);
> #line 748
13386,13387d13387
< #line 747
<   if (tmp == 0) {
13388a13389,13390
>   if (tmp == 0) {
> #line 749
13393,13394d13394
< #line 749
<   mutex_unlock(& dev->struct_mutex);
13395a13396,13397
>   mutex_unlock(& dev->struct_mutex);
> #line 751
13399c13401
< #line 757 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 758 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13419,13420d13420
< #line 759
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
13421a13422,13423
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 761
13423c13425
< #line 762
---
> #line 763
13425c13427
< #line 762
---
> #line 763
13427c13429
< #line 762
---
> #line 763
13429c13431
<                          "i" (762), "i" (24UL));
---
>                          "i" (763), "i" (24UL));
13431c13433
< #line 762
---
> #line 763
13436c13438
< #line 764
---
> #line 765
13438c13440
< #line 764
---
> #line 765
13440,13441d13441
< #line 764
<   if (tmp___8 == 0) {
13443c13443
<     dev_priv->mm.waiting_gem_seqno = seqno;
---
>   if (tmp___8 == 0) {
13445c13445
<     i915_user_irq_get(dev);
---
>     dev_priv->mm.waiting_gem_seqno = seqno;
13446a13447,13448
>     i915_user_irq_get(dev);
> #line 768
13448c13450
< #line 767
---
> #line 768
13450c13452
< #line 767
---
> #line 768
13452c13454
< #line 767
---
> #line 768
13454c13456
< #line 767
---
> #line 768
13456c13458
< #line 767
---
> #line 768
13458c13460
< #line 767
---
> #line 768
13460c13462
< #line 767
---
> #line 768
13462c13464
< #line 767
---
> #line 768
13464c13466
< #line 767
---
> #line 768
13467c13469
< #line 767
---
> #line 768
13469c13471
< #line 767
---
> #line 768
13471c13473
< #line 767
---
> #line 768
13473c13475
< #line 767
---
> #line 768
13475c13477
< #line 767
---
> #line 768
13480c13482
< #line 767
---
> #line 768
13482c13484
< #line 767
---
> #line 768
13484c13486
< #line 767
---
> #line 768
13486c13488
< #line 767
---
> #line 768
13488c13490
< #line 767
---
> #line 768
13493c13495
< #line 767
---
> #line 768
13495c13497
< #line 767
---
> #line 768
13498c13500
< #line 767
---
> #line 768
13501c13503
< #line 767
---
> #line 768
13506c13508
< #line 767
---
> #line 768
13508,13509d13509
< #line 771
<     i915_user_irq_put(dev);
13510a13511,13512
>     i915_user_irq_put(dev);
> #line 773
13515,13516d13516
< #line 774
<   if (dev_priv->mm.wedged != 0) {
13517a13518,13519
>   if (dev_priv->mm.wedged != 0) {
> #line 776
13522,13523d13523
< #line 777
<   if (ret != 0 && ret != -512) {
13524a13525,13526
>   if (ret != 0 && ret != -512) {
> #line 779
13526c13528
< #line 778
---
> #line 779
13532,13533d13533
< #line 786
<   if (ret == 0) {
13534a13535,13536
>   if (ret == 0) {
> #line 788
13539c13541
< #line 789
---
> #line 790
13543c13545
< #line 793 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 794 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13555c13557
< #line 797
---
> #line 798
13557,13558d13558
< #line 806
<   if ((int )flush_domains & 1) {
13559a13560,13561
>   if ((int )flush_domains & 1) {
> #line 808
13564c13566
< #line 809
---
> #line 810
13566,13567d13567
< #line 839
<     cmd = 33554436U;
13568a13569,13570
>     cmd = 33554436U;
> #line 841
13570c13572
< #line 842
---
> #line 843
13575c13577
< #line 843
---
> #line 844
13577,13578d13578
< #line 848
<       if ((invalidate_domains & 4U) != 0U) {
13579a13580,13581
>       if ((invalidate_domains & 4U) != 0U) {
> #line 850
13587,13588d13588
< #line 851
<     if ((invalidate_domains & 16U) != 0U) {
13589a13590,13591
>     if ((invalidate_domains & 16U) != 0U) {
> #line 853
13594c13596
< #line 857
---
> #line 858
13596c13598
< #line 857
---
> #line 858
13601,13608d13602
< #line 857
<     outcount = 0U;
< #line 857
<     outring = (unsigned int )dev_priv->ring.tail;
< #line 857
<     ringmask = (unsigned int )dev_priv->ring.tail_mask;
< #line 857
<     virt = (char volatile   *)dev_priv->ring.virtual_start;
13610c13604
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = cmd;
---
>     outcount = 0U;
13612c13606
<     outcount = outcount + 1U;
---
>     outring = (unsigned int )dev_priv->ring.tail;
13614c13608
<     outring = outring + 4U;
---
>     ringmask = (unsigned int )dev_priv->ring.tail_mask;
13616c13610
<     outring = outring & ringmask;
---
>     virt = (char volatile   *)dev_priv->ring.virtual_start;
13618c13612
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = cmd;
13626c13620
<     dev_priv->ring.tail = (int )outring;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
13628c13622
<     dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
---
>     outcount = outcount + 1U;
13629a13624,13631
>     outring = outring + 4U;
> #line 860
>     outring = outring & ringmask;
> #line 861
>     dev_priv->ring.tail = (int )outring;
> #line 861
>     dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
> #line 861
13634c13636
< #line 862
---
> #line 863
13638c13640
< #line 869 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 870 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13648,13649d13649
< #line 871
<   dev = obj->dev;
13650a13651,13652
>   dev = obj->dev;
> #line 873
13652,13653d13653
< #line 878
<   if ((obj->write_domain & 4294967230U) != 0U) {
13654a13655,13656
>   if ((obj->write_domain & 4294967230U) != 0U) {
> #line 880
13656c13658
< #line 884
---
> #line 885
13658,13659d13659
< #line 886
<     i915_gem_object_move_to_active(obj);
13660a13661,13662
>     i915_gem_object_move_to_active(obj);
> #line 888
13662c13664
< #line 889
---
> #line 890
13664c13666
< #line 889
---
> #line 890
13666c13668
< #line 889
---
> #line 890
13668c13670
<                            "i" (889), "i" (24UL));
---
>                            "i" (890), "i" (24UL));
13670c13672
< #line 889
---
> #line 890
13678c13680
< #line 898
---
> #line 899
13680,13681d13681
< #line 903
<     ret = i915_wait_request(dev, obj_priv->last_rendering_seqno);
13683c13683
<     if (ret != 0) {
---
>     ret = i915_wait_request(dev, obj_priv->last_rendering_seqno);
13684a13685,13686
>     if (ret != 0) {
> #line 906
13692c13694
< #line 908
---
> #line 909
13696c13698
< #line 915 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 916 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13706,13707d13707
< #line 917
<   dev = obj->dev;
13709c13709
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
---
>   dev = obj->dev;
13710a13711,13712
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
> #line 920
13712,13713d13713
< #line 925
<   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
13714a13715,13716
>   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
> #line 927
13719,13720d13720
< #line 928
<   if (obj_priv->pin_count != 0) {
13722c13722
<     printk("<3>[drm:%s] *ERROR* Attempting to unbind pinned buffer\n", "i915_gem_object_unbind");
---
>   if (obj_priv->pin_count != 0) {
13723a13724,13725
>     printk("<3>[drm:%s] *ERROR* Attempting to unbind pinned buffer\n", "i915_gem_object_unbind");
> #line 931
13728,13729d13729
< #line 935
<   ret = i915_gem_object_wait_rendering(obj);
13731c13731
<   if (ret != 0) {
---
>   ret = i915_gem_object_wait_rendering(obj);
13732a13733,13734
>   if (ret != 0) {
> #line 938
13735c13737
< #line 938
---
> #line 939
13740c13742
< #line 947
---
> #line 948
13742,13743d13743
< #line 949
<   if (ret != 0) {
13744a13745,13746
>   if (ret != 0) {
> #line 951
13747c13749
< #line 951
---
> #line 952
13752,13753d13753
< #line 954
<   if ((unsigned long )obj_priv->agp_mem != (unsigned long )((struct agp_memory *)0)) {
13755c13755
<     drm_unbind_agp(obj_priv->agp_mem);
---
>   if ((unsigned long )obj_priv->agp_mem != (unsigned long )((struct agp_memory *)0)) {
13757c13757
<     drm_free_agp(obj_priv->agp_mem, (int )(obj->size / 4096UL));
---
>     drm_unbind_agp(obj_priv->agp_mem);
13758a13759,13760
>     drm_free_agp(obj_priv->agp_mem, (int )(obj->size / 4096UL));
> #line 958
13763c13765
< #line 960
---
> #line 961
13765c13767
< #line 960
---
> #line 961
13767c13769
< #line 960
---
> #line 961
13769c13771
<                          "i" (960), "i" (24UL));
---
>                          "i" (961), "i" (24UL));
13771c13773
< #line 960
---
> #line 961
13776c13778
< #line 962
---
> #line 963
13778,13779d13779
< #line 964
<   if ((unsigned long )obj_priv->gtt_space != (unsigned long )((struct drm_mm_node *)0)) {
13781c13781
<     atomic_dec(& dev->gtt_count);
---
>   if ((unsigned long )obj_priv->gtt_space != (unsigned long )((struct drm_mm_node *)0)) {
13782a13783,13784
>     atomic_dec(& dev->gtt_count);
> #line 967
13784,13785d13785
< #line 968
<     drm_mm_put_block(obj_priv->gtt_space);
13786a13787,13788
>     drm_mm_put_block(obj_priv->gtt_space);
> #line 970
13791c13793
< #line 973
---
> #line 974
13793,13794d13794
< #line 973
<   if (tmp___0 == 0) {
13795a13796,13797
>   if (tmp___0 == 0) {
> #line 975
13800c13802
< #line 976
---
> #line 977
13804c13806
< #line 980 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 981 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13826c13828
< #line 982
---
> #line 983
13828c13830
< #line 985
---
> #line 986
13831c13833
< #line 991
---
> #line 992
13833,13834d13834
< #line 991
<   if (tmp___1 == 0) {
13835a13836,13837
>   if (tmp___1 == 0) {
> #line 993
13837c13839
< #line 992
---
> #line 993
13839,13840d13840
< #line 995
<     obj = obj_priv->obj;
13841a13842,13843
>     obj = obj_priv->obj;
> #line 997
13843c13845
< #line 996
---
> #line 997
13845c13847
< #line 996
---
> #line 997
13847c13849
<                            "i" (996), "i" (24UL));
---
>                            "i" (997), "i" (24UL));
13849c13851
< #line 996
---
> #line 997
13854c13856
< #line 1000
---
> #line 1001
13856c13858
< #line 1000
---
> #line 1001
13858c13860
< #line 1000
---
> #line 1001
13860c13862
<                            "i" (1000), "i" (24UL));
---
>                            "i" (1001), "i" (24UL));
13862c13864
< #line 1000
---
> #line 1001
13867,13868d13868
< #line 1003
<     ret = i915_gem_object_unbind(obj);
13869a13870,13871
>     ret = i915_gem_object_unbind(obj);
> #line 1005
13874c13876
< #line 1011
---
> #line 1012
13876c13878
< #line 1011
---
> #line 1012
13878c13880
< #line 1014
---
> #line 1015
13880c13882
< #line 1014
---
> #line 1015
13882,13883d13883
< #line 1018
<     ret = i915_wait_request(dev, request->seqno);
13885c13885
<     if (ret != 0) {
---
>     ret = i915_wait_request(dev, request->seqno);
13886a13887,13888
>     if (ret != 0) {
> #line 1021
13891c13893
< #line 1027
---
> #line 1028
13893,13894d13894
< #line 1027
<     if (tmp___2 == 0) {
13895a13896,13897
>     if (tmp___2 == 0) {
> #line 1029
13900c13902
< #line 1029
---
> #line 1030
13905c13907
< #line 1037
---
> #line 1038
13907,13908d13908
< #line 1037
<   if (tmp___4 == 0) {
13909a13910,13911
>   if (tmp___4 == 0) {
> #line 1039
13911c13913
< #line 1038
---
> #line 1039
13913c13915
< #line 1041
---
> #line 1042
13915c13917
< #line 1043
---
> #line 1044
13917c13919
< #line 1046
---
> #line 1047
13919,13920d13920
< #line 1048
<     obj = 0;
13921a13922,13923
>     obj = 0;
> #line 1050
13926c13928
< #line 1052
---
> #line 1053
13928c13930
< #line 1052
---
> #line 1053
13930c13932
< #line 1052
---
> #line 1053
13932c13934
< #line 1052
---
> #line 1053
13935c13937
< #line 1060
---
> #line 1061
13938c13940
< #line 1061
---
> #line 1062
13941c13943
< #line 1062
---
> #line 1063
13945c13947
< #line 1066 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1067 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13961c13963
< #line 1068
---
> #line 1069
13963,13964d13964
< #line 1075
<   if ((unsigned long )obj_priv->page_list != (unsigned long )((struct page **)0)) {
13965a13966,13967
>   if ((unsigned long )obj_priv->page_list != (unsigned long )((struct page **)0)) {
> #line 1077
13970,13971d13971
< #line 1081
<   page_count___0 = (int )(obj->size / 4096UL);
13972a13973,13974
>   page_count___0 = (int )(obj->size / 4096UL);
> #line 1083
13975c13977
< #line 1082
---
> #line 1083
13977c13979
< #line 1082
---
> #line 1083
13979c13981
<                          "i" (1082), "i" (24UL));
---
>                          "i" (1083), "i" (24UL));
13981c13983
< #line 1082
---
> #line 1083
13986c13988
< #line 1083
---
> #line 1084
13988c13990
< #line 1083
---
> #line 1084
13990,13991d13991
< #line 1085
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
13993c13993
<     printk("<3>[drm:%s] *ERROR* Faled to allocate page list\n", "i915_gem_object_get_page_list");
---
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
13994a13995,13996
>     printk("<3>[drm:%s] *ERROR* Faled to allocate page list\n", "i915_gem_object_get_page_list");
> #line 1088
13999,14000d14000
< #line 1090
<   inode = ((obj->filp)->f_path.dentry)->d_inode;
14002c14002
<   mapping = inode->i_mapping;
---
>   inode = ((obj->filp)->f_path.dentry)->d_inode;
14003a14004,14005
>   mapping = inode->i_mapping;
> #line 1093
14005c14007
< #line 1092
---
> #line 1093
14008,14009d14009
< #line 1093
<   page = read_mapping_page(mapping, (unsigned long )i, 0);
14010a14011,14012
>   page = read_mapping_page(mapping, (unsigned long )i, 0);
> #line 1095
14012,14013d14013
< #line 1094
<   if (tmp___2 != 0L) {
14014a14015,14016
>   if (tmp___2 != 0L) {
> #line 1096
14016,14017d14017
< #line 1095
<     ret = (int )tmp___1;
14018a14019,14020
>     ret = (int )tmp___1;
> #line 1097
14021,14022d14022
< #line 1097
<     i915_gem_object_free_page_list(obj);
14023a14024,14025
>     i915_gem_object_free_page_list(obj);
> #line 1099
14028c14030
< #line 1100
---
> #line 1101
14030c14032
< #line 1092
---
> #line 1093
14033,14034d14034
< #line 1092
<   if (i < page_count___0) {
14035a14036,14037
>   if (i < page_count___0) {
> #line 1094
14041c14043
< #line 1102
---
> #line 1103
14045c14047
< #line 1109 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1110 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14061,14062d14062
< #line 1111
<   dev = obj->dev;
14064c14064
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
---
>   dev = obj->dev;
14065a14066,14067
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 1114
14067,14068d14068
< #line 1117
<   if (alignment == 0U) {
14069a14070,14071
>   if (alignment == 0U) {
> #line 1119
14074,14075d14075
< #line 1119
<   if (((unsigned long )alignment & 4095UL) != 0UL) {
14076a14077,14078
>   if (((unsigned long )alignment & 4095UL) != 0UL) {
> #line 1121
14079c14081
< #line 1121
---
> #line 1122
14085c14087
< #line 1125
---
> #line 1126
14088,14089d14089
< #line 1127
<   if ((unsigned long )free_space != (unsigned long )((struct drm_mm_node *)0)) {
14090a14091,14092
>   if ((unsigned long )free_space != (unsigned long )((struct drm_mm_node *)0)) {
> #line 1129
14092,14093d14093
< #line 1130
<     if ((unsigned long )obj_priv->gtt_space != (unsigned long )((struct drm_mm_node *)0)) {
14095c14095
<       (obj_priv->gtt_space)->private = (void *)obj;
---
>     if ((unsigned long )obj_priv->gtt_space != (unsigned long )((struct drm_mm_node *)0)) {
14096a14097,14098
>       (obj_priv->gtt_space)->private = (void *)obj;
> #line 1133
14104c14106
< #line 1135
---
> #line 1136
14106c14108
< #line 1142
---
> #line 1143
14108c14110
< #line 1142
---
> #line 1143
14110c14112
< #line 1142
---
> #line 1143
14112c14114
< #line 1142
---
> #line 1143
14114c14116
< #line 1142
---
> #line 1143
14116c14118
< #line 1142
---
> #line 1143
14118,14119d14119
< #line 1145
<           printk("<3>[drm:%s] *ERROR* GTT full, but LRU list empty\n", "i915_gem_object_bind_to_gtt");
14120a14121,14122
>           printk("<3>[drm:%s] *ERROR* GTT full, but LRU list empty\n", "i915_gem_object_bind_to_gtt");
> #line 1147
14131,14132d14132
< #line 1149
<     ret = i915_gem_evict_something(dev);
14134c14134
<     if (ret != 0) {
---
>     ret = i915_gem_evict_something(dev);
14135a14136,14137
>     if (ret != 0) {
> #line 1152
14138c14140
< #line 1152
---
> #line 1153
14143c14145
< #line 1154
---
> #line 1155
14148,14149d14149
< #line 1161
<   ret = i915_gem_object_get_page_list(obj);
14151c14151
<   if (ret != 0) {
---
>   ret = i915_gem_object_get_page_list(obj);
14153c14153
<     drm_mm_put_block(obj_priv->gtt_space);
---
>   if (ret != 0) {
14155c14155
<     obj_priv->gtt_space = 0;
---
>     drm_mm_put_block(obj_priv->gtt_space);
14156a14157,14158
>     obj_priv->gtt_space = 0;
> #line 1166
14161c14163
< #line 1168
---
> #line 1169
14163c14165
< #line 1172
---
> #line 1173
14166,14167d14167
< #line 1176
<   if ((unsigned long )obj_priv->agp_mem == (unsigned long )((struct agp_memory *)0)) {
14169c14169
<     i915_gem_object_free_page_list(obj);
---
>   if ((unsigned long )obj_priv->agp_mem == (unsigned long )((struct agp_memory *)0)) {
14171c14171
<     drm_mm_put_block(obj_priv->gtt_space);
---
>     i915_gem_object_free_page_list(obj);
14173c14173
<     obj_priv->gtt_space = 0;
---
>     drm_mm_put_block(obj_priv->gtt_space);
14174a14175,14176
>     obj_priv->gtt_space = 0;
> #line 1181
14179,14180d14180
< #line 1182
<   atomic_inc(& dev->gtt_count);
14181a14182,14183
>   atomic_inc(& dev->gtt_count);
> #line 1184
14183c14185
< #line 1189
---
> #line 1190
14185c14187
< #line 1189
---
> #line 1190
14187c14189
< #line 1189
---
> #line 1190
14189c14191
<                          "i" (1189), "i" (24UL));
---
>                          "i" (1190), "i" (24UL));
14191c14193
< #line 1189
---
> #line 1190
14196c14198
< #line 1190
---
> #line 1191
14198c14200
< #line 1190
---
> #line 1191
14200c14202
< #line 1190
---
> #line 1191
14202c14204
<                          "i" (1190), "i" (24UL));
---
>                          "i" (1191), "i" (24UL));
14204c14206
< #line 1190
---
> #line 1191
14209c14211
< #line 1192
---
> #line 1193
14213c14215
< #line 1196 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1197 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14219c14221
< #line 1198
---
> #line 1199
14221,14222d14222
< #line 1204
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
14223a14224,14225
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
> #line 1206
14228,14229d14229
< #line 1207
<   drm_clflush_pages(obj_priv->page_list, obj->size / 4096UL);
14230a14231,14232
>   drm_clflush_pages(obj_priv->page_list, obj->size / 4096UL);
> #line 1209
14234c14236
< #line 1322 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1323 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14245,14246d14246
< #line 1326
<   dev = obj->dev;
14248c14248
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
---
>   dev = obj->dev;
14250c14250
<   invalidate_domains = 0U;
---
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
14251a14252,14253
>   invalidate_domains = 0U;
> #line 1330
14253,14254d14254
< #line 1342
<   if (write_domain == 0U) {
14255a14256,14257
>   if (write_domain == 0U) {
> #line 1344
14258c14260
< #line 1345
---
> #line 1346
14261,14262d14262
< #line 1353
<   if (obj->write_domain != 0U && obj->write_domain != read_domains) {
14264c14264
<     flush_domains = obj->write_domain | flush_domains;
---
>   if (obj->write_domain != 0U && obj->write_domain != read_domains) {
14265a14266,14267
>     flush_domains = obj->write_domain | flush_domains;
> #line 1356
14270,14271d14271
< #line 1361
<   invalidate_domains = (~ obj->read_domains & read_domains) | invalidate_domains;
14272a14273,14274
>   invalidate_domains = (~ obj->read_domains & read_domains) | invalidate_domains;
> #line 1363
14274c14276
< #line 1372
---
> #line 1373
14276,14277d14277
< #line 1375
<       ret = i915_gem_object_wait_rendering(obj);
14279c14279
<       if (ret != 0) {
---
>       ret = i915_gem_object_wait_rendering(obj);
14280a14281,14282
>       if (ret != 0) {
> #line 1378
14288c14290
< #line 1379
---
> #line 1380
14293,14294d14294
< #line 1382
<   if ((write_domain | flush_domains) != 0U) {
14295a14296,14297
>   if ((write_domain | flush_domains) != 0U) {
> #line 1384
14300c14302
< #line 1388
---
> #line 1389
14302c14304
< #line 1391
---
> #line 1392
14304c14306
< #line 1393
---
> #line 1394
14309c14311
< #line 1395
---
> #line 1396
14311,14312d14312
< #line 1397
<   dev->invalidate_domains = dev->invalidate_domains | invalidate_domains;
14313a14314,14315
>   dev->invalidate_domains = dev->invalidate_domains | invalidate_domains;
> #line 1399
14315c14317
< #line 1405
---
> #line 1406
14319c14321
< #line 1415 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1416 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14331c14333
< #line 1421
---
> #line 1422
14333,14334d14334
< #line 1424
<   if ((int )obj->read_domains & 1) {
14335a14336,14337
>   if ((int )obj->read_domains & 1) {
> #line 1426
14340c14342
< #line 1427
---
> #line 1428
14342c14344
< #line 1429
---
> #line 1430
14344c14346
< #line 1429
---
> #line 1430
14349,14350d14350
< #line 1433
<   if ((obj->write_domain & 4294967230U) != 0U) {
14352c14352
<     ret = i915_gem_object_wait_rendering(obj);
---
>   if ((obj->write_domain & 4294967230U) != 0U) {
14354c14354
<     if (ret != 0) {
---
>     ret = i915_gem_object_wait_rendering(obj);
14355a14356,14357
>     if (ret != 0) {
> #line 1437
14363,14364d14364
< #line 1439
<   if ((unsigned long )obj_priv->page_cpu_valid == (unsigned long )((uint8_t *)0)) {
14365a14366,14367
>   if ((unsigned long )obj_priv->page_cpu_valid == (unsigned long )((uint8_t *)0)) {
> #line 1441
14367c14369
< #line 1440
---
> #line 1441
14372c14374
< #line 1447
---
> #line 1448
14374c14376
< #line 1447
---
> #line 1448
14377,14378d14378
< #line 1448
<   if ((unsigned int )*(obj_priv->page_cpu_valid + (unsigned long )i) != 0U) {
14379a14380,14381
>   if ((unsigned int )*(obj_priv->page_cpu_valid + (unsigned long )i) != 0U) {
> #line 1450
14384c14386
< #line 1451
---
> #line 1452
14386c14388
< #line 1453
---
> #line 1454
14389c14391
< #line 1447
---
> #line 1448
14392,14393d14393
< #line 1447
<   if ((unsigned long long )i <= ((offset + size) - 1ULL) / 4096ULL) {
14394a14395,14396
>   if ((unsigned long long )i <= ((offset + size) - 1ULL) / 4096ULL) {
> #line 1449
14400c14402
< #line 1456
---
> #line 1457
14404c14406
< #line 1466 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1467 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14410c14412
< #line 1468
---
> #line 1469
14412c14414
< #line 1474
---
> #line 1475
14414c14416
< #line 1481
---
> #line 1482
14416,14417d14417
< #line 1484
<     dev->invalidate_domains = 0U;
14418a14419,14420
>     dev->invalidate_domains = 0U;
> #line 1486
14423c14425
< #line 1488
---
> #line 1489
14427c14429
< #line 1495 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1496 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14448c14450
< #line 1499
---
> #line 1500
14450c14452
< #line 1502
---
> #line 1503
14452,14453d14453
< #line 1504
<   last_reloc_offset = 4294967295U;
14454a14455,14456
>   last_reloc_offset = 4294967295U;
> #line 1506
14456,14457d14457
< #line 1508
<   ret = i915_gem_object_pin(obj, (unsigned int )entry->alignment);
14459c14459
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, (unsigned int )entry->alignment);
14460a14461,14462
>   if (ret != 0) {
> #line 1511
14465c14467
< #line 1512
---
> #line 1513
14467c14469
< #line 1514
---
> #line 1515
14469c14471
< #line 1519
---
> #line 1520
14471c14473
< #line 1519
---
> #line 1520
14474c14476
< #line 1525
---
> #line 1526
14477,14478d14478
< #line 1525
<   ret = (int )tmp;
14480c14480
<   if (ret != 0) {
---
>   ret = (int )tmp;
14482c14482
<     i915_gem_object_unpin(obj);
---
>   if (ret != 0) {
14483a14484,14485
>     i915_gem_object_unpin(obj);
> #line 1529
14488c14490
< #line 1531
---
> #line 1532
14490,14491d14491
< #line 1533
<   if ((unsigned long )target_obj == (unsigned long )((struct drm_gem_object *)0)) {
14493c14493
<     i915_gem_object_unpin(obj);
---
>   if ((unsigned long )target_obj == (unsigned long )((struct drm_gem_object *)0)) {
14494a14495,14496
>     i915_gem_object_unpin(obj);
> #line 1536
14499c14501
< #line 1537
---
> #line 1538
14501,14502d14502
< #line 1542
<   if ((unsigned long )target_obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
14503a14504,14505
>   if ((unsigned long )target_obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
> #line 1544
14506,14507d14507
< #line 1545
<     drm_gem_object_unreference(target_obj);
14509c14509
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14510a14511,14512
>     i915_gem_object_unpin(obj);
> #line 1548
14515,14516d14516
< #line 1550
<   if (reloc.offset > (unsigned long long )(obj->size - 4UL)) {
14517a14518,14519
>   if (reloc.offset > (unsigned long long )(obj->size - 4UL)) {
> #line 1552
14521,14522d14522
< #line 1555
<     drm_gem_object_unreference(target_obj);
14524c14524
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14525a14526,14527
>     i915_gem_object_unpin(obj);
> #line 1558
14530,14531d14531
< #line 1559
<   if ((reloc.offset & 3ULL) != 0ULL) {
14532a14533,14534
>   if ((reloc.offset & 3ULL) != 0ULL) {
> #line 1561
14535,14536d14536
< #line 1564
<     drm_gem_object_unreference(target_obj);
14538c14538
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14539a14540,14541
>     i915_gem_object_unpin(obj);
> #line 1567
14544c14546
< #line 1569
---
> #line 1570
14546c14548
< #line 1571
---
> #line 1572
14550,14551d14551
< #line 1578
<     drm_gem_object_unreference(target_obj);
14553c14553
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14554a14555,14556
>     i915_gem_object_unpin(obj);
> #line 1581
14559,14560d14560
< #line 1598
<   target_obj->pending_read_domains = target_obj->pending_read_domains | reloc.read_domains;
14561a14562,14563
>   target_obj->pending_read_domains = target_obj->pending_read_domains | reloc.read_domains;
> #line 1600
14563,14564d14564
< #line 1604
<   if ((uint64_t )target_obj_priv->gtt_offset == reloc.presumed_offset) {
14566c14566
<     drm_gem_object_unreference(target_obj);
---
>   if ((uint64_t )target_obj_priv->gtt_offset == reloc.presumed_offset) {
14567a14568,14569
>     drm_gem_object_unreference(target_obj);
> #line 1607
14572c14574
< #line 1613
---
> #line 1614
14574,14575d14575
< #line 1618
<   if ((int )obj->write_domain & 1) {
14577c14577
<     i915_gem_clflush_object(obj);
---
>   if ((int )obj->write_domain & 1) {
14579c14579
<     drm_agp_chipset_flush(dev);
---
>     i915_gem_clflush_object(obj);
14580a14581,14582
>     drm_agp_chipset_flush(dev);
> #line 1622
14585,14586d14586
< #line 1627
<   reloc_offset = obj_priv->gtt_offset + (uint32_t )reloc.offset;
14587a14588,14589
>   reloc_offset = obj_priv->gtt_offset + (uint32_t )reloc.offset;
> #line 1629
14589,14590d14590
< #line 1631
<     if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
14591a14592,14593
>     if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
> #line 1633
14596c14598
< #line 1634
---
> #line 1635
14599,14600d14600
< #line 1638
<     last_reloc_offset = reloc_offset;
14602c14602
<     if ((unsigned long )reloc_page == (unsigned long )((void *)0)) {
---
>     last_reloc_offset = reloc_offset;
14604c14604
<       drm_gem_object_unreference(target_obj);
---
>     if ((unsigned long )reloc_page == (unsigned long )((void *)0)) {
14606c14606
<       i915_gem_object_unpin(obj);
---
>       drm_gem_object_unreference(target_obj);
14607a14608,14609
>       i915_gem_object_unpin(obj);
> #line 1643
14615c14617
< #line 1646
---
> #line 1647
14617c14619
< #line 1648
---
> #line 1649
14619c14621
< #line 1655
---
> #line 1656
14621,14622d14622
< #line 1660
<   reloc.presumed_offset = (uint64_t )target_obj_priv->gtt_offset;
14623a14624,14625
>   reloc.presumed_offset = (uint64_t )target_obj_priv->gtt_offset;
> #line 1662
14626,14627d14627
< #line 1661
<   ret = (int )tmp___0;
14629c14629
<   if (ret != 0) {
---
>   ret = (int )tmp___0;
14631c14631
<     drm_gem_object_unreference(target_obj);
---
>   if (ret != 0) {
14633c14633
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14634a14635,14636
>     i915_gem_object_unpin(obj);
> #line 1666
14639c14641
< #line 1668
---
> #line 1669
14642c14644
< #line 1519
---
> #line 1520
14645,14646d14646
< #line 1519
<   if ((uint32_t )i < entry->relocation_count) {
14647a14648,14649
>   if ((uint32_t )i < entry->relocation_count) {
> #line 1521
14653,14654d14654
< #line 1671
<   if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
14655a14656,14657
>   if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
> #line 1673
14660c14662
< #line 1678
---
> #line 1679
14664c14666
< #line 1684 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1685 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14683,14684d14684
< #line 1688
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
14685a14686,14687
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 1690
14687,14688d14688
< #line 1691
<   nbox = (int )exec->num_cliprects;
14689a14690,14691
>   nbox = (int )exec->num_cliprects;
> #line 1693
14691,14692d14692
< #line 1696
<   exec_start = (unsigned int )exec_offset + exec->batch_start_offset;
14693a14694,14695
>   exec_start = (unsigned int )exec_offset + exec->batch_start_offset;
> #line 1698
14695,14696d14696
< #line 1699
<   if (((exec_start | exec_len) & 7U) != 0U) {
14698c14698
<     printk("<3>[drm:%s] *ERROR* alignment\n", "i915_dispatch_gem_execbuffer");
---
>   if (((exec_start | exec_len) & 7U) != 0U) {
14699a14700,14701
>     printk("<3>[drm:%s] *ERROR* alignment\n", "i915_dispatch_gem_execbuffer");
> #line 1702
14704,14705d14705
< #line 1704
<   if (exec_start == 0U) {
14706a14707,14708
>   if (exec_start == 0U) {
> #line 1706
14711c14713
< #line 1707
---
> #line 1708
14713c14715
< #line 1709
---
> #line 1710
14715c14717
< #line 1709
---
> #line 1710
14718,14719d14719
< #line 1710
<   if (i < nbox) {
14720a14721,14722
>   if (i < nbox) {
> #line 1712
14722c14724
< #line 1711
---
> #line 1712
14724,14725d14725
< #line 1713
<     if (ret != 0) {
14726a14727,14728
>     if (ret != 0) {
> #line 1715
14734,14735d14735
< #line 1717
<   if (dev->pci_device == 13687 || dev->pci_device == 9570) {
14736a14737,14738
>   if (dev->pci_device == 13687 || dev->pci_device == 9570) {
> #line 1719
14738c14740
< #line 1718
---
> #line 1719
14743,14750d14744
< #line 1718
<     outcount = 0U;
< #line 1718
<     outring = (unsigned int )dev_priv->ring.tail;
< #line 1718
<     ringmask = (unsigned int )dev_priv->ring.tail_mask;
< #line 1718
<     virt = (char volatile   *)dev_priv->ring.virtual_start;
14752c14746
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = 402653185U;
---
>     outcount = 0U;
14754c14748
<     outcount = outcount + 1U;
---
>     outring = (unsigned int )dev_priv->ring.tail;
14756c14750
<     outring = outring + 4U;
---
>     ringmask = (unsigned int )dev_priv->ring.tail_mask;
14758c14752
<     outring = outring & ringmask;
---
>     virt = (char volatile   *)dev_priv->ring.virtual_start;
14760c14754
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = exec_start | 1U;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = 402653185U;
14768c14762
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = (exec_start + exec_len) - 4U;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = exec_start | 1U;
14776c14770
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = (exec_start + exec_len) - 4U;
14784c14778
<     dev_priv->ring.tail = (int )outring;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
14786c14780,14782
<     dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
---
>     outcount = outcount + 1U;
> #line 1723
>     outring = outring + 4U;
14787a14784,14789
>     outring = outring & ringmask;
> #line 1724
>     dev_priv->ring.tail = (int )outring;
> #line 1724
>     dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
> #line 1724
14790c14792
< #line 1725
---
> #line 1726
14792c14794
< #line 1725
---
> #line 1726
14797c14799
< #line 1725
---
> #line 1726
14799c14801
< #line 1725
---
> #line 1726
14801c14803
< #line 1725
---
> #line 1726
14803,14804d14804
< #line 1725
<     virt = (char volatile   *)dev_priv->ring.virtual_start;
14806c14806
<     if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
---
>     virt = (char volatile   *)dev_priv->ring.virtual_start;
14807a14808,14809
>     if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
> #line 1728
14809c14811
< #line 1727
---
> #line 1728
14811c14813
< #line 1727
---
> #line 1728
14813c14815
< #line 1727
---
> #line 1728
14815c14817
< #line 1730
---
> #line 1731
14817c14819
< #line 1730
---
> #line 1731
14819c14821
< #line 1730
---
> #line 1731
14821c14823
< #line 1730
---
> #line 1731
14824c14826
< #line 1732
---
> #line 1733
14826c14828
< #line 1732
---
> #line 1733
14828c14830
< #line 1732
---
> #line 1733
14830c14832
< #line 1732
---
> #line 1733
14832c14834
< #line 1734
---
> #line 1735
14834c14836
< #line 1734
---
> #line 1735
14836c14838
< #line 1734
---
> #line 1735
14838c14840
< #line 1734
---
> #line 1735
14841c14843
< #line 1736
---
> #line 1737
14843c14845
< #line 1736
---
> #line 1737
14845c14847
< #line 1736
---
> #line 1737
14848c14850
< #line 1709
---
> #line 1710
14851,14852d14852
< #line 1709
<   if (i < count) {
14853a14854,14855
>   if (i < count) {
> #line 1711
14859c14861
< #line 1741
---
> #line 1742
14863c14865
< #line 1751 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1752 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14871,14872d14872
< #line 1753
<   i915_file_priv = (struct drm_i915_file_private *)file_priv->driver_priv;
14873a14874,14875
>   i915_file_priv = (struct drm_i915_file_private *)file_priv->driver_priv;
> #line 1755
14875,14876d14876
< #line 1757
<   mutex_lock_nested(& dev->struct_mutex, 0U);
14878c14878
<   seqno = i915_file_priv->mm.last_gem_throttle_seqno;
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
14879a14880,14881
>   seqno = i915_file_priv->mm.last_gem_throttle_seqno;
> #line 1760
14881,14882d14882
< #line 1761
<   if (seqno != 0U) {
14883a14884,14885
>   if (seqno != 0U) {
> #line 1763
14888,14889d14889
< #line 1763
<   mutex_unlock(& dev->struct_mutex);
14890a14891,14892
>   mutex_unlock(& dev->struct_mutex);
> #line 1765
14894c14896
< #line 1768 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1769 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14920,14921d14921
< #line 1771
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
14923c14923
<   i915_file_priv = (struct drm_i915_file_private *)file_priv->driver_priv;
---
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
14925c14925
<   args = (struct drm_i915_gem_execbuffer *)data;
---
>   i915_file_priv = (struct drm_i915_file_private *)file_priv->driver_priv;
14927c14927
<   exec_list = 0;
---
>   args = (struct drm_i915_gem_execbuffer *)data;
14928a14929,14930
>   exec_list = 0;
> #line 1776
14930c14932
< #line 1777
---
> #line 1778
14932,14933d14933
< #line 1786
<   if (args->buffer_count == 0U) {
14934a14935,14936
>   if (args->buffer_count == 0U) {
> #line 1788
14937c14939
< #line 1788
---
> #line 1789
14942c14944
< #line 1791
---
> #line 1792
14944c14946
< #line 1791
---
> #line 1792
14946c14948
< #line 1793
---
> #line 1794
14948c14950
< #line 1793
---
> #line 1794
14950,14951d14951
< #line 1795
<   if ((unsigned long )exec_list == (unsigned long )((struct drm_i915_gem_exec_object *)0) || (unsigned long )object_list == (unsigned long )((struct drm_gem_object **)0)) {
14952a14953,14954
>   if ((unsigned long )exec_list == (unsigned long )((struct drm_i915_gem_exec_object *)0) || (unsigned long )object_list == (unsigned long )((struct drm_gem_object **)0)) {
> #line 1797
14955,14956d14956
< #line 1799
<     ret = -12;
14957a14958,14959
>     ret = -12;
> #line 1801
14962c14964
< #line 1802
---
> #line 1803
14964c14966
< #line 1802
---
> #line 1803
14966,14967d14967
< #line 1806
<   if (ret != 0) {
14968a14969,14970
>   if (ret != 0) {
> #line 1808
14971c14973
< #line 1809
---
> #line 1810
14976c14978
< #line 1812
---
> #line 1813
14978,14979d14979
< #line 1816
<   if (dev_priv->mm.wedged != 0) {
14981c14981
<     printk("<3>[drm:%s] *ERROR* Execbuf while wedged\n", "i915_gem_execbuffer");
---
>   if (dev_priv->mm.wedged != 0) {
14983c14983
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Execbuf while wedged\n", "i915_gem_execbuffer");
14984a14985,14986
>     mutex_unlock(& dev->struct_mutex);
> #line 1820
14989,14990d14990
< #line 1822
<   if (dev_priv->mm.suspended != 0) {
14992c14992
<     printk("<3>[drm:%s] *ERROR* Execbuf while VT-switched.\n", "i915_gem_execbuffer");
---
>   if (dev_priv->mm.suspended != 0) {
14994c14994
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Execbuf while VT-switched.\n", "i915_gem_execbuffer");
14995a14996,14997
>     mutex_unlock(& dev->struct_mutex);
> #line 1826
15000,15001d15001
< #line 1832
<   dev->invalidate_domains = 0U;
15002a15003,15004
>   dev->invalidate_domains = 0U;
> #line 1834
15004c15006
< #line 1836
---
> #line 1837
15006c15008
< #line 1836
---
> #line 1837
15009c15011
< #line 1837
---
> #line 1838
15011,15012d15012
< #line 1839
<   if ((unsigned long )*(object_list + (unsigned long )i) == (unsigned long )((struct drm_gem_object *)0)) {
15013a15014,15015
>   if ((unsigned long )*(object_list + (unsigned long )i) == (unsigned long )((struct drm_gem_object *)0)) {
> #line 1841
15016,15017d15017
< #line 1842
<     ret = -9;
15018a15019,15020
>     ret = -9;
> #line 1844
15023,15024d15024
< #line 1846
<   (*(object_list + (unsigned long )i))->pending_read_domains = 0U;
15026c15026
<   (*(object_list + (unsigned long )i))->pending_write_domain = 0U;
---
>   (*(object_list + (unsigned long )i))->pending_read_domains = 0U;
15027a15028,15029
>   (*(object_list + (unsigned long )i))->pending_write_domain = 0U;
> #line 1849
15030,15031d15031
< #line 1851
<   if (ret != 0) {
15032a15033,15034
>   if (ret != 0) {
> #line 1853
15035c15037
< #line 1853
---
> #line 1854
15040c15042
< #line 1855
---
> #line 1856
15042c15044
< #line 1836
---
> #line 1837
15045,15046d15046
< #line 1836
<   if ((uint32_t )i < args->buffer_count) {
15047a15048,15049
>   if ((uint32_t )i < args->buffer_count) {
> #line 1838
15052,15053d15053
< #line 1859
<   batch_obj = *(object_list + (unsigned long )(args->buffer_count - 1U));
15055c15055
<   batch_obj->pending_read_domains = 8U;
---
>   batch_obj = *(object_list + (unsigned long )(args->buffer_count - 1U));
15056a15057,15058
>   batch_obj->pending_read_domains = 8U;
> #line 1862
15058c15060
< #line 1865
---
> #line 1866
15060c15062
< #line 1865
---
> #line 1866
15063,15064d15064
< #line 1866
<   obj = *(object_list + (unsigned long )i);
15065a15066,15067
>   obj = *(object_list + (unsigned long )i);
> #line 1868
15067c15069
< #line 1869
---
> #line 1870
15069,15070d15070
< #line 1875
<     ret = -12;
15071a15072,15073
>     ret = -12;
> #line 1877
15076c15078
< #line 1880
---
> #line 1881
15078,15079d15079
< #line 1883
<   if (ret != 0) {
15080a15081,15082
>   if (ret != 0) {
> #line 1885
15085c15087
< #line 1865
---
> #line 1866
15088,15089d15089
< #line 1865
<   if ((uint32_t )i < args->buffer_count) {
15090a15091,15092
>   if ((uint32_t )i < args->buffer_count) {
> #line 1867
15095c15097
< #line 1890
---
> #line 1891
15097c15099
< #line 1901
---
> #line 1902
15099c15101
< #line 1910
---
> #line 1911
15101,15102d15102
< #line 1913
<   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
15104c15104
<   if (ret != 0) {
---
>   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
15106c15106
<     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
---
>   if (ret != 0) {
15107a15108,15109
>     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
> #line 1917
15112c15114
< #line 1923
---
> #line 1924
15114,15115d15115
< #line 1934
<   seqno = i915_add_request(dev, flush_domains);
15116a15117,15118
>   seqno = i915_add_request(dev, flush_domains);
> #line 1936
15118c15120
< #line 1935
---
> #line 1936
15120c15122
< #line 1935
---
> #line 1936
15122c15124
<                          "i" (1935), "i" (24UL));
---
>                          "i" (1936), "i" (24UL));
15124c15126
< #line 1935
---
> #line 1936
15129,15130d15130
< #line 1936
<   i915_file_priv->mm.last_gem_seqno = seqno;
15131a15132,15133
>   i915_file_priv->mm.last_gem_seqno = seqno;
> #line 1938
15133c15135
< #line 1937
---
> #line 1938
15136,15137d15137
< #line 1938
<   obj___0 = *(object_list + (unsigned long )i);
15138a15139,15140
>   obj___0 = *(object_list + (unsigned long )i);
> #line 1940
15140,15141d15141
< #line 1941
<   i915_gem_object_move_to_active(obj___0);
15142a15143,15144
>   i915_gem_object_move_to_active(obj___0);
> #line 1943
15144c15146
< #line 1937
---
> #line 1938
15147,15148d15148
< #line 1937
<   if ((uint32_t )i < args->buffer_count) {
15149a15150,15151
>   if ((uint32_t )i < args->buffer_count) {
> #line 1939
15154c15156
< #line 1954
---
> #line 1955
15156c15158
< #line 1954
---
> #line 1955
15158,15159d15159
< #line 1958
<   if (ret != 0) {
15160a15161,15162
>   if (ret != 0) {
> #line 1960
15167,15168d15168
< #line 1963
<   if ((unsigned long )object_list != (unsigned long )((struct drm_gem_object **)0)) {
15169a15170,15171
>   if ((unsigned long )object_list != (unsigned long )((struct drm_gem_object **)0)) {
> #line 1965
15171c15173
< #line 1964
---
> #line 1965
15174c15176
< #line 1965
---
> #line 1966
15176c15178
< #line 1964
---
> #line 1965
15179,15180d15180
< #line 1964
<     if (i < pinned) {
15181a15182,15183
>     if (i < pinned) {
> #line 1966
15186c15188
< #line 1967
---
> #line 1968
15188c15190
< #line 1967
---
> #line 1968
15191c15193
< #line 1968
---
> #line 1969
15193c15195
< #line 1967
---
> #line 1968
15196,15197d15197
< #line 1967
<     if ((uint32_t )i < args->buffer_count) {
15198a15199,15200
>     if ((uint32_t )i < args->buffer_count) {
> #line 1969
15207c15209
< #line 1970
---
> #line 1971
15210c15212
< #line 1973
---
> #line 1974
15212c15214
< #line 1975
---
> #line 1976
15214c15216
< #line 1978
---
> #line 1979
15218c15220
< #line 1982 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1983 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15227,15228d15228
< #line 1984
<   dev = obj->dev;
15229a15230,15231
>   dev = obj->dev;
> #line 1986
15231,15232d15232
< #line 1989
<   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
15234c15234
<     ret = i915_gem_object_bind_to_gtt(obj, alignment);
---
>   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
15236c15236
<     if (ret != 0) {
---
>     ret = i915_gem_object_bind_to_gtt(obj, alignment);
15238c15238
<       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
---
>     if (ret != 0) {
15239a15240,15241
>       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
> #line 1994
15247c15249
< #line 1996
---
> #line 1997
15249,15250d15250
< #line 2001
<   if (obj_priv->pin_count == 1) {
15252c15252
<     atomic_inc(& dev->pin_count);
---
>   if (obj_priv->pin_count == 1) {
15254c15254
<     atomic_add((int )obj->size, & dev->pin_memory);
---
>     atomic_inc(& dev->pin_count);
15255a15256,15257
>     atomic_add((int )obj->size, & dev->pin_memory);
> #line 2005
15257c15259
< #line 2004
---
> #line 2005
15259c15261
< #line 2004
---
> #line 2005
15261c15263
< #line 2008
---
> #line 2009
15272c15274
< #line 2012
---
> #line 2013
15276c15278
< #line 2016 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2017 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15286,15287d15287
< #line 2018
<   dev = obj->dev;
15289c15289
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
---
>   dev = obj->dev;
15290a15291,15292
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 2021
15292,15293d15293
< #line 2023
<   obj_priv->pin_count = obj_priv->pin_count - 1;
15294a15295,15296
>   obj_priv->pin_count = obj_priv->pin_count - 1;
> #line 2025
15296c15298
< #line 2024
---
> #line 2025
15298c15300
< #line 2024
---
> #line 2025
15300c15302
<                          "i" (2024), "i" (24UL));
---
>                          "i" (2025), "i" (24UL));
15302c15304
< #line 2024
---
> #line 2025
15307c15309
< #line 2025
---
> #line 2026
15310c15312
< #line 2025
---
> #line 2026
15312c15314
< #line 2025
---
> #line 2026
15314c15316
<                          "i" (2025), "i" (24UL));
---
>                          "i" (2026), "i" (24UL));
15316c15318
< #line 2025
---
> #line 2026
15321,15322d15322
< #line 2031
<   if (obj_priv->pin_count == 0) {
15323a15324,15325
>   if (obj_priv->pin_count == 0) {
> #line 2033
15325c15327
< #line 2035
---
> #line 2036
15330,15331d15331
< #line 2037
<     atomic_dec(& dev->pin_count);
15332a15333,15334
>     atomic_dec(& dev->pin_count);
> #line 2039
15337c15339
< #line 2040
---
> #line 2041
15341c15343
< #line 2044 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2045 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15350c15352
< #line 2047
---
> #line 2048
15352c15354
< #line 2052
---
> #line 2053
15354,15355d15355
< #line 2054
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
15357c15357
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
15358a15359,15360
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 2057
15361,15362d15362
< #line 2058
<     mutex_unlock(& dev->struct_mutex);
15363a15364,15365
>     mutex_unlock(& dev->struct_mutex);
> #line 2060
15368c15370
< #line 2061
---
> #line 2062
15370,15371d15371
< #line 2063
<   ret = i915_gem_object_pin(obj, (uint32_t )args->alignment);
15373c15373
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, (uint32_t )args->alignment);
15375c15375
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
15377c15377
<     mutex_unlock(& dev->struct_mutex);
---
>     drm_gem_object_unreference(obj);
15378a15379,15380
>     mutex_unlock(& dev->struct_mutex);
> #line 2068
15383,15384d15384
< #line 2073
<   if ((int )obj->write_domain & 1) {
15386c15386
<     i915_gem_clflush_object(obj);
---
>   if ((int )obj->write_domain & 1) {
15388c15388
<     drm_agp_chipset_flush(dev);
---
>     i915_gem_clflush_object(obj);
15389a15390,15391
>     drm_agp_chipset_flush(dev);
> #line 2077
15394,15395d15395
< #line 2078
<   args->offset = (uint64_t )obj_priv->gtt_offset;
15397c15397
<   drm_gem_object_unreference(obj);
---
>   args->offset = (uint64_t )obj_priv->gtt_offset;
15398a15399,15400
>   drm_gem_object_unreference(obj);
> #line 2081
15400c15402
< #line 2082
---
> #line 2083
15404c15406
< #line 2086 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2087 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15411c15413
< #line 2089
---
> #line 2090
15413c15415
< #line 2092
---
> #line 2093
15415,15416d15416
< #line 2094
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
15418c15418
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
15419a15420,15421
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 2097
15422,15423d15423
< #line 2098
<     mutex_unlock(& dev->struct_mutex);
15424a15425,15426
>     mutex_unlock(& dev->struct_mutex);
> #line 2100
15429c15431
< #line 2102
---
> #line 2103
15431,15432d15432
< #line 2104
<   drm_gem_object_unreference(obj);
15434c15434
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
15435a15436,15437
>   mutex_unlock(& dev->struct_mutex);
> #line 2107
15439c15441
< #line 2110 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2111 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15447c15449
< #line 2113
---
> #line 2114
15449,15450d15450
< #line 2117
<   mutex_lock_nested(& dev->struct_mutex, 0U);
15452c15452
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
15454c15454
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
15455a15456,15457
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 2121
15458,15459d15459
< #line 2122
<     mutex_unlock(& dev->struct_mutex);
15460a15461,15462
>     mutex_unlock(& dev->struct_mutex);
> #line 2124
15465,15466d15466
< #line 2126
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
15467a15468,15469
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
> #line 2128
15469,15470d15470
< #line 2129
<   drm_gem_object_unreference(obj);
15472c15472
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
15473a15474,15475
>   mutex_unlock(& dev->struct_mutex);
> #line 2132
15477c15479
< #line 2135 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2136 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15483c15485
< #line 2138
---
> #line 2139
15485c15487
< #line 2138
---
> #line 2139
15489c15491
< #line 2141 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2142 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15496c15498
< #line 2145
---
> #line 2146
15498,15499d15499
< #line 2145
<   obj_priv = (struct drm_i915_gem_object *)tmp;
15501c15501
<   if ((unsigned long )obj_priv == (unsigned long )((struct drm_i915_gem_object *)0)) {
---
>   obj_priv = (struct drm_i915_gem_object *)tmp;
15502a15503,15504
>   if ((unsigned long )obj_priv == (unsigned long )((struct drm_i915_gem_object *)0)) {
> #line 2148
15507,15508d15508
< #line 2155
<   obj->write_domain = 1U;
15509a15510,15511
>   obj->write_domain = 1U;
> #line 2157
15511,15512d15512
< #line 2158
<   obj->driver_private = (void *)obj_priv;
15514c15514
<   obj_priv->obj = obj;
---
>   obj->driver_private = (void *)obj_priv;
15516c15516
<   INIT_LIST_HEAD(& obj_priv->list);
---
>   obj_priv->obj = obj;
15517a15518,15519
>   INIT_LIST_HEAD(& obj_priv->list);
> #line 2162
15521c15523
< #line 2164 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2165 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15527c15529
< #line 2166
---
> #line 2167
15529c15531
< #line 2168
---
> #line 2169
15532c15534
< #line 2169
---
> #line 2170
15535,15536d15536
< #line 2168
<   if (obj_priv->pin_count > 0) {
15537a15538,15539
>   if (obj_priv->pin_count > 0) {
> #line 2170
15542c15544
< #line 2171
---
> #line 2172
15544,15545d15545
< #line 2173
<   drm_free((void *)obj_priv->page_cpu_valid, 1UL, 2);
15547c15547
<   drm_free(obj->driver_private, 1UL, 2);
---
>   drm_free((void *)obj_priv->page_cpu_valid, 1UL, 2);
15548a15549,15550
>   drm_free(obj->driver_private, 1UL, 2);
> #line 2176
15552c15554
< #line 2178 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2179 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15563c15565
< #line 2183
---
> #line 2184
15565c15567
< #line 2187
---
> #line 2188
15567c15569
< #line 2187
---
> #line 2188
15569c15571
< #line 2187
---
> #line 2188
15571c15573
< #line 2187
---
> #line 2188
15573c15575
<                          "i" (2187), "i" (24UL));
---
>                          "i" (2188), "i" (24UL));
15575c15577
< #line 2187
---
> #line 2188
15580,15581d15581
< #line 2189
<   ret = i915_gem_object_set_domain(obj, read_domains, write_domain);
15583c15583
<   if (ret != 0) {
---
>   ret = i915_gem_object_set_domain(obj, read_domains, write_domain);
15584a15585,15586
>   if (ret != 0) {
> #line 2192
15589c15591
< #line 2192
---
> #line 2193
15591,15592d15592
< #line 2194
<   if ((flush_domains & 4294967230U) != 0U) {
15593a15594,15595
>   if ((flush_domains & 4294967230U) != 0U) {
> #line 2196
15598c15600
< #line 2197
---
> #line 2198
15602c15604
< #line 2202 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2203 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15612c15614
< #line 2208
---
> #line 2209
15615c15617
< #line 2209
---
> #line 2210
15617c15619
< #line 2209
---
> #line 2210
15619c15621
< #line 2212
---
> #line 2213
15621,15622d15622
< #line 2214
<   if (obj_priv->pin_count != 0) {
15624c15624
<     printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
---
>   if (obj_priv->pin_count != 0) {
15626c15626
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
15627a15628,15629
>     mutex_unlock(& dev->struct_mutex);
> #line 2218
15632,15633d15633
< #line 2220
<   ret = i915_gem_object_unbind(obj);
15635c15635
<   if (ret != 0) {
---
>   ret = i915_gem_object_unbind(obj);
15636a15637,15638
>   if (ret != 0) {
> #line 2223
15639,15640d15640
< #line 2224
<     mutex_unlock(& dev->struct_mutex);
15641a15642,15643
>     mutex_unlock(& dev->struct_mutex);
> #line 2226
15647c15649
< #line 2208
---
> #line 2209
15649,15650d15650
< #line 2208
<   if (tmp == 0) {
15651a15652,15653
>   if (tmp == 0) {
> #line 2210
15657c15659
< #line 2230
---
> #line 2231
15661c15663
< #line 2234 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2235 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15688c15690
< #line 2236
---
> #line 2237
15690,15691d15691
< #line 2240
<   if (dev_priv->mm.suspended != 0) {
15692a15693,15694
>   if (dev_priv->mm.suspended != 0) {
> #line 2242
15697c15699
< #line 2246
---
> #line 2247
15699c15701
< #line 2248
---
> #line 2249
15701c15703
< #line 2252
---
> #line 2253
15703c15705
< #line 2254
---
> #line 2255
15705,15706d15706
< #line 2257
<   if (seqno == 0U) {
15708c15708
<     mutex_unlock(& dev->struct_mutex);
---
>   if (seqno == 0U) {
15709a15710,15711
>     mutex_unlock(& dev->struct_mutex);
> #line 2260
15714,15715d15715
< #line 2262
<   dev_priv->mm.waiting_gem_seqno = seqno;
15717c15717
<   last_seqno = 0U;
---
>   dev_priv->mm.waiting_gem_seqno = seqno;
15718a15719,15720
>   last_seqno = 0U;
> #line 2265
15721,15722d15722
< #line 2266
<   cur_seqno = i915_get_gem_seqno(dev);
15723a15724,15725
>   cur_seqno = i915_get_gem_seqno(dev);
> #line 2268
15725,15726d15726
< #line 2267
<   if (tmp != 0) {
15727a15728,15729
>   if (tmp != 0) {
> #line 2269
15732,15733d15733
< #line 2269
<   if (last_seqno == cur_seqno) {
15734a15735,15736
>   if (last_seqno == cur_seqno) {
> #line 2271
15736c15738
< #line 2270
---
> #line 2271
15738,15739d15739
< #line 2270
<     if (tmp___0 > 100) {
15741c15741
<       printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
---
>     if (tmp___0 > 100) {
15743c15743
<       dev_priv->mm.wedged = 1;
---
>       printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
15745c15745
<       __wake_up(& dev_priv->irq_queue, 1U, 1, 0);
---
>       dev_priv->mm.wedged = 1;
15746a15747,15748
>       __wake_up(& dev_priv->irq_queue, 1U, 1, 0);
> #line 2275
15754,15755d15755
< #line 2277
<   msleep(10U);
15757c15757
<   last_seqno = cur_seqno;
---
>   msleep(10U);
15758a15759,15760
>   last_seqno = cur_seqno;
> #line 2280
15761c15763
< #line 2280
---
> #line 2281
15763c15765
< #line 2282
---
> #line 2283
15765c15767
< #line 2287
---
> #line 2288
15767c15769
< #line 2287
---
> #line 2288
15769c15771
< #line 2287
---
> #line 2288
15771c15773
< #line 2287
---
> #line 2288
15773c15775
<                          "i" (2287), "i" (24UL));
---
>                          "i" (2288), "i" (24UL));
15775c15777
< #line 2287
---
> #line 2288
15780c15782
< #line 2288
---
> #line 2289
15782c15784
< #line 2288
---
> #line 2289
15784c15786
< #line 2288
---
> #line 2289
15786c15788
< #line 2288
---
> #line 2289
15788c15790
<                          "i" (2288), "i" (24UL));
---
>                          "i" (2289), "i" (24UL));
15790c15792
< #line 2288
---
> #line 2289
15795c15797
< #line 2293
---
> #line 2294
15797c15799
< #line 2293
---
> #line 2294
15799c15801
< #line 2293
---
> #line 2294
15801c15803
< #line 2293
---
> #line 2294
15803c15805
<                          "i" (2293), "i" (24UL));
---
>                          "i" (2294), "i" (24UL));
15805c15807
< #line 2293
---
> #line 2294
15810,15811d15811
< #line 2296
<   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
15813c15813
<   if (ret != 0) {
---
>   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
15814a15815,15816
>   if (ret != 0) {
> #line 2299
15819c15821
< #line 2300
---
> #line 2301
15821c15823
< #line 2300
---
> #line 2301
15823c15825
< #line 2300
---
> #line 2301
15825c15827
< #line 2300
---
> #line 2301
15827c15829
<                          "i" (2300), "i" (24UL));
---
>                          "i" (2301), "i" (24UL));
15829c15831
< #line 2300
---
> #line 2301
15834c15836
< #line 2301
---
> #line 2302
15836c15838
< #line 2301
---
> #line 2302
15838c15840
< #line 2301
---
> #line 2302
15840c15842
< #line 2301
---
> #line 2302
15842c15844
<                          "i" (2301), "i" (24UL));
---
>                          "i" (2302), "i" (24UL));
15844c15846
< #line 2301
---
> #line 2302
15849c15851
< #line 2302
---
> #line 2303
15851c15853
< #line 2302
---
> #line 2303
15853c15855
< #line 2302
---
> #line 2303
15855c15857
< #line 2302
---
> #line 2303
15857c15859
<                          "i" (2302), "i" (24UL));
---
>                          "i" (2303), "i" (24UL));
15859c15861
< #line 2302
---
> #line 2303
15864c15866
< #line 2303
---
> #line 2304
15866c15868
< #line 2303
---
> #line 2304
15868c15870
< #line 2303
---
> #line 2304
15870c15872
< #line 2303
---
> #line 2304
15872c15874
<                          "i" (2303), "i" (24UL));
---
>                          "i" (2304), "i" (24UL));
15874c15876
< #line 2303
---
> #line 2304
15879c15881
< #line 2304
---
> #line 2305
15883c15885
< #line 2308 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2309 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15892c15894
< #line 2310
---
> #line 2311
15894,15895d15895
< #line 2318
<   if ((((dev->pci_device != 10690 && dev->pci_device != 10674) && dev->pci_device != 10706) && dev->pci_device != 10818) && ((dev->pci_device != 11778 && dev->pci_device != 11794) && dev->pci_device != 11810)) {
15896a15897,15898
>   if ((((dev->pci_device != 10690 && dev->pci_device != 10674) && dev->pci_device != 10706) && dev->pci_device != 10818) && ((dev->pci_device != 11778 && dev->pci_device != 11794) && dev->pci_device != 11810)) {
> #line 2320
15901,15902d15902
< #line 2321
<   obj = drm_gem_object_alloc(dev, 4096UL);
15904c15904
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 4096UL);
15906c15906
<     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
---
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
15907a15908,15909
>     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
> #line 2325
15912c15914
< #line 2326
---
> #line 2327
15914,15915d15915
< #line 2328
<   ret = i915_gem_object_pin(obj, 4096U);
15917c15917
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096U);
15919c15919
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
15920a15921,15922
>     drm_gem_object_unreference(obj);
> #line 2332
15925,15926d15926
< #line 2334
<   dev_priv->status_gfx_addr = obj_priv->gtt_offset;
15928c15928
<   dev_priv->hws_map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
---
>   dev_priv->status_gfx_addr = obj_priv->gtt_offset;
15930c15930
<   dev_priv->hws_map.size = 4096UL;
---
>   dev_priv->hws_map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
15932c15932
<   dev_priv->hws_map.type = _DRM_FRAME_BUFFER;
---
>   dev_priv->hws_map.size = 4096UL;
15934c15934
<   dev_priv->hws_map.flags = 0;
---
>   dev_priv->hws_map.type = _DRM_FRAME_BUFFER;
15935a15936,15937
>   dev_priv->hws_map.flags = 0;
> #line 2340
15937,15938d15938
< #line 2343
<   drm_core_ioremap_wc(& dev_priv->hws_map, dev);
15940c15940
<   if ((unsigned long )dev_priv->hws_map.handle == (unsigned long )((void *)0)) {
---
>   drm_core_ioremap_wc(& dev_priv->hws_map, dev);
15942c15942
<     printk("<3>[drm:%s] *ERROR* Failed to map status page.\n", "i915_gem_init_hws");
---
>   if ((unsigned long )dev_priv->hws_map.handle == (unsigned long )((void *)0)) {
15944c15944
<     memset((void *)(& dev_priv->hws_map), 0, 40UL);
---
>     printk("<3>[drm:%s] *ERROR* Failed to map status page.\n", "i915_gem_init_hws");
15946c15946
<     drm_gem_object_unreference(obj);
---
>     memset((void *)(& dev_priv->hws_map), 0, 40UL);
15947a15948,15949
>     drm_gem_object_unreference(obj);
> #line 2349
15952,15953d15953
< #line 2350
<   dev_priv->hws_obj = obj;
15955c15955
<   dev_priv->hw_status_page = dev_priv->hws_map.handle;
---
>   dev_priv->hws_obj = obj;
15957c15957
<   memset(dev_priv->hw_status_page, 0, 4096UL);
---
>   dev_priv->hw_status_page = dev_priv->hws_map.handle;
15959c15959
<   writel(dev_priv->status_gfx_addr, (void volatile   *)dev_priv->regs + 8320U);
---
>   memset(dev_priv->hw_status_page, 0, 4096UL);
15960a15961,15962
>   writel(dev_priv->status_gfx_addr, (void volatile   *)dev_priv->regs + 8320U);
> #line 2355
15962c15964
< #line 2354
---
> #line 2355
15967c15969
< #line 2356
---
> #line 2357
15971c15973
< #line 2360 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2361 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15980c15982
< #line 2362
---
> #line 2363
15982,15983d15983
< #line 2367
<   ret = i915_gem_init_hws(dev);
15985c15985
<   if (ret != 0) {
---
>   ret = i915_gem_init_hws(dev);
15986a15987,15988
>   if (ret != 0) {
> #line 2370
15991,15992d15992
< #line 2371
<   obj = drm_gem_object_alloc(dev, 131072UL);
15994c15994
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 131072UL);
15996c15996
<     printk("<3>[drm:%s] *ERROR* Failed to allocate ringbuffer\n", "i915_gem_init_ringbuffer");
---
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
15997a15998,15999
>     printk("<3>[drm:%s] *ERROR* Failed to allocate ringbuffer\n", "i915_gem_init_ringbuffer");
> #line 2375
16002c16004
< #line 2376
---
> #line 2377
16004,16005d16005
< #line 2378
<   ret = i915_gem_object_pin(obj, 4096U);
16007c16007
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096U);
16009c16009
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
16010a16011,16012
>     drm_gem_object_unreference(obj);
> #line 2382
16015,16016d16016
< #line 2385
<   dev_priv->ring.Size = obj->size;
16017a16018,16019
>   dev_priv->ring.Size = obj->size;
> #line 2387
16019,16020d16020
< #line 2388
<   dev_priv->ring.map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
16022c16022
<   dev_priv->ring.map.size = obj->size;
---
>   dev_priv->ring.map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
16024c16024
<   dev_priv->ring.map.type = _DRM_FRAME_BUFFER;
---
>   dev_priv->ring.map.size = obj->size;
16026c16026
<   dev_priv->ring.map.flags = 0;
---
>   dev_priv->ring.map.type = _DRM_FRAME_BUFFER;
16027a16028,16029
>   dev_priv->ring.map.flags = 0;
> #line 2393
16029,16030d16030
< #line 2394
<   drm_core_ioremap_wc(& dev_priv->ring.map, dev);
16032c16032
<   if ((unsigned long )dev_priv->ring.map.handle == (unsigned long )((void *)0)) {
---
>   drm_core_ioremap_wc(& dev_priv->ring.map, dev);
16034c16034
<     printk("<3>[drm:%s] *ERROR* Failed to map ringbuffer.\n", "i915_gem_init_ringbuffer");
---
>   if ((unsigned long )dev_priv->ring.map.handle == (unsigned long )((void *)0)) {
16036c16036
<     memset((void *)(& dev_priv->ring), 0, 88UL);
---
>     printk("<3>[drm:%s] *ERROR* Failed to map ringbuffer.\n", "i915_gem_init_ringbuffer");
16038c16038
<     drm_gem_object_unreference(obj);
---
>     memset((void *)(& dev_priv->ring), 0, 88UL);
16039a16040,16041
>     drm_gem_object_unreference(obj);
> #line 2400
16044,16045d16045
< #line 2401
<   dev_priv->ring.ring_obj = obj;
16046a16047,16048
>   dev_priv->ring.ring_obj = obj;
> #line 2403
16048,16049d16049
< #line 2405
<   writel(0U, (void volatile   *)dev_priv->regs + 8252U);
16051c16051
<   writel(0U, (void volatile   *)dev_priv->regs + 8244U);
---
>   writel(0U, (void volatile   *)dev_priv->regs + 8252U);
16053c16053
<   writel(0U, (void volatile   *)dev_priv->regs + 8240U);
---
>   writel(0U, (void volatile   *)dev_priv->regs + 8244U);
16054a16055,16056
>   writel(0U, (void volatile   *)dev_priv->regs + 8240U);
> #line 2409
16056,16057d16057
< #line 2411
<   writel(obj_priv->gtt_offset, (void volatile   *)dev_priv->regs + 8248U);
16058a16059,16060
>   writel(obj_priv->gtt_offset, (void volatile   *)dev_priv->regs + 8248U);
> #line 2413
16060c16062
< #line 2418
---
> #line 2419
16062c16064
< #line 2420
---
> #line 2421
16066c16068
< #line 2424 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2425 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16072c16074
< #line 2426
---
> #line 2427
16074,16075d16075
< #line 2428
<   if ((unsigned long )dev_priv->ring.ring_obj == (unsigned long )((struct drm_gem_object *)0)) {
16076a16077,16078
>   if ((unsigned long )dev_priv->ring.ring_obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 2430
16081c16083
< #line 2431
---
> #line 2432
16083,16084d16084
< #line 2433
<   i915_gem_object_unpin(dev_priv->ring.ring_obj);
16086c16086
<   drm_gem_object_unreference(dev_priv->ring.ring_obj);
---
>   i915_gem_object_unpin(dev_priv->ring.ring_obj);
16088c16088
<   dev_priv->ring.ring_obj = 0;
---
>   drm_gem_object_unreference(dev_priv->ring.ring_obj);
16089a16090,16091
>   dev_priv->ring.ring_obj = 0;
> #line 2437
16091,16092d16092
< #line 2438
<   if ((unsigned long )dev_priv->hws_obj != (unsigned long )((struct drm_gem_object *)0)) {
16094c16094
<     i915_gem_object_unpin(dev_priv->hws_obj);
---
>   if ((unsigned long )dev_priv->hws_obj != (unsigned long )((struct drm_gem_object *)0)) {
16096c16096
<     drm_gem_object_unreference(dev_priv->hws_obj);
---
>     i915_gem_object_unpin(dev_priv->hws_obj);
16098c16098
<     dev_priv->hws_obj = 0;
---
>     drm_gem_object_unreference(dev_priv->hws_obj);
16099a16100,16101
>     dev_priv->hws_obj = 0;
> #line 2443
16101c16103
< #line 2445
---
> #line 2446
16106c16108
< #line 2447
---
> #line 2448
16110c16112
< #line 2450 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2451 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16125c16127
< #line 2453
---
> #line 2454
16127,16128d16128
< #line 2456
<   if (dev_priv->mm.wedged != 0) {
16130c16130
<     printk("<3>[drm:%s] *ERROR* Reenabling wedged hardware, good luck\n", "i915_gem_entervt_ioctl");
---
>   if (dev_priv->mm.wedged != 0) {
16131a16132,16133
>     printk("<3>[drm:%s] *ERROR* Reenabling wedged hardware, good luck\n", "i915_gem_entervt_ioctl");
> #line 2459
16136,16137d16137
< #line 2461
<   ret = i915_gem_init_ringbuffer(dev);
16139c16139
<   if (ret != 0) {
---
>   ret = i915_gem_init_ringbuffer(dev);
16140a16141,16142
>   if (ret != 0) {
> #line 2464
16145,16146d16146
< #line 2465
<   mutex_lock_nested(& dev->struct_mutex, 0U);
16147a16148,16149
>   mutex_lock_nested(& dev->struct_mutex, 0U);
> #line 2467
16149c16151
< #line 2466
---
> #line 2467
16151c16153
< #line 2466
---
> #line 2467
16153c16155
< #line 2466
---
> #line 2467
16155c16157
<                          "i" (2466), "i" (24UL));
---
>                          "i" (2467), "i" (24UL));
16157c16159
< #line 2466
---
> #line 2467
16162c16164
< #line 2467
---
> #line 2468
16164c16166
< #line 2467
---
> #line 2468
16166c16168
< #line 2467
---
> #line 2468
16168c16170
< #line 2467
---
> #line 2468
16170c16172
<                          "i" (2467), "i" (24UL));
---
>                          "i" (2468), "i" (24UL));
16172c16174
< #line 2467
---
> #line 2468
16177c16179
< #line 2468
---
> #line 2469
16179c16181
< #line 2468
---
> #line 2469
16181c16183
< #line 2468
---
> #line 2469
16183c16185
< #line 2468
---
> #line 2469
16185c16187
<                          "i" (2468), "i" (24UL));
---
>                          "i" (2469), "i" (24UL));
16187c16189
< #line 2468
---
> #line 2469
16192c16194
< #line 2469
---
> #line 2470
16194c16196
< #line 2469
---
> #line 2470
16196c16198
< #line 2469
---
> #line 2470
16198c16200
< #line 2469
---
> #line 2470
16200c16202
<                          "i" (2469), "i" (24UL));
---
>                          "i" (2470), "i" (24UL));
16202c16204
< #line 2469
---
> #line 2470
16207,16208d16208
< #line 2470
<   dev_priv->mm.suspended = 0;
16209a16210,16211
>   dev_priv->mm.suspended = 0;
> #line 2472
16211c16213
< #line 2473
---
> #line 2474
16213c16215
< #line 2475
---
> #line 2476
16217c16219
< #line 2479 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2480 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16223,16224d16224
< #line 2484
<   mutex_lock_nested(& dev->struct_mutex, 0U);
16226c16226
<   ret = i915_gem_idle(dev);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
16228c16228
<   if (ret == 0) {
---
>   ret = i915_gem_idle(dev);
16229a16230,16231
>   if (ret == 0) {
> #line 2488
16234c16236
< #line 2488
---
> #line 2489
16236c16238
< #line 2490
---
> #line 2491
16238c16240
< #line 2492
---
> #line 2493
16242c16244
< #line 2496 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2497 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16249c16251
< #line 2499
---
> #line 2500
16251c16253
< #line 2501
---
> #line 2502
16253,16254d16254
< #line 2503
<   if ((unsigned long )dev_priv->ring.ring_obj != (unsigned long )((struct drm_gem_object *)0)) {
16256c16256
<     ret = i915_gem_idle(dev);
---
>   if ((unsigned long )dev_priv->ring.ring_obj != (unsigned long )((struct drm_gem_object *)0)) {
16258c16258
<     if (ret != 0) {
---
>     ret = i915_gem_idle(dev);
16259a16260,16261
>     if (ret != 0) {
> #line 2507
16265c16267
< #line 2508
---
> #line 2509
16270,16271d16271
< #line 2511
<   mutex_unlock(& dev->struct_mutex);
16272a16273,16274
>   mutex_unlock(& dev->struct_mutex);
> #line 2513
16276c16278
< #line 2515 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2516 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16286c16288
< #line 2517
---
> #line 2518
16288,16289d16289
< #line 2519
<   INIT_LIST_HEAD(& dev_priv->mm.active_list);
16291c16291
<   INIT_LIST_HEAD(& dev_priv->mm.flushing_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.active_list);
16293c16293
<   INIT_LIST_HEAD(& dev_priv->mm.inactive_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.flushing_list);
16295c16295
<   INIT_LIST_HEAD(& dev_priv->mm.request_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.inactive_list);
16296a16297,16298
>   INIT_LIST_HEAD(& dev_priv->mm.request_list);
> #line 2524
16298c16300
< #line 2523
---
> #line 2524
16300c16302
< #line 2523
---
> #line 2524
16303c16305
< #line 2523
---
> #line 2524
16305c16307
< #line 2523
---
> #line 2524
16307c16309
< #line 2523
---
> #line 2524
16309c16311
< #line 2525
---
> #line 2526
16311c16313
< #line 2525
---
> #line 2526
16313c16315
< #line 2525
---
> #line 2526
16316c16318
< #line 2525
---
> #line 2526
16318c16320
< #line 2525
---
> #line 2526
16320c16322
< #line 2527
---
> #line 2528
16322,16323d16323
< #line 2529
<   i915_gem_detect_bit_6_swizzle(dev);
16324a16325,16326
>   i915_gem_detect_bit_6_swizzle(dev);
> #line 2531
16328c16330
< #line 2543 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2544 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16334c16336
< #line 2549
---
> #line 2550
16336c16338
< #line 2551
---
> #line 2552
16338c16340
< #line 2551
---
> #line 2552
16342c16344
< #line 2565 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2566 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16348c16350
< #line 2571
---
> #line 2572
16350,16351d16351
< #line 2573
<   kmem_cache_alloc(ldv_func_arg1, ldv_func_arg2);
16352a16353,16354
>   kmem_cache_alloc(ldv_func_arg1, ldv_func_arg2);
> #line 2575
16356c16358
< #line 2609 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2610 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16362c16364
< #line 2615
---
> #line 2616
16364,16365d16365
< #line 2617
<   kmem_cache_alloc(ldv_func_arg1, ldv_func_arg2);
16366a16367,16368
>   kmem_cache_alloc(ldv_func_arg1, ldv_func_arg2);
> #line 2619
16370c16372
< #line 2652 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2653 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--43_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/43_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
16377c16379
< #line 2659
---
> #line 2660
16379c16381
< #line 2661
---
> #line 2662
16381c16383
< #line 2661
---
> #line 2662

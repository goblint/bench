11976a11977,11978
> #line 156
>     return (ret);
11980c11982
< #line 158
---
> #line 159
11982c11984
< #line 160
---
> #line 161
11984,11985d11985
< #line 162
<   if ((unsigned long long )read != args->size) {
11987c11987
<     drm_gem_object_unreference(obj);
---
>   if ((unsigned long long )read != args->size) {
11989c11989
<     mutex_unlock(& dev->struct_mutex);
---
>     drm_gem_object_unreference(obj);
11991c11991
<     if (read < 0L) {
---
>     mutex_unlock(& dev->struct_mutex);
11992a11993,11994
>     if (read < 0L) {
> #line 167
11995c11997
< #line 168
---
> #line 169
12001,12002d12002
< #line 171
<   drm_gem_object_unreference(obj);
12003a12004,12005
>   drm_gem_object_unreference(obj);
> #line 173
12005c12007
< #line 174
---
> #line 175
12009c12011
< #line 178 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 179 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12032c12034
< #line 182
---
> #line 183
12034c12036
< #line 189
---
> #line 190
12036,12037d12037
< #line 193
<   user_data = (char *)args->data_ptr;
12039c12039
<   remain = (ssize_t )args->size;
---
>   user_data = (char *)args->data_ptr;
12040a12041,12042
>   remain = (ssize_t )args->size;
> #line 196
12042c12044
< #line 195
---
> #line 196
12045c12047
< #line 195
---
> #line 196
12047,12048d12048
< #line 195
<   if (tmp___0 == 0L) {
12049a12050,12051
>   if (tmp___0 == 0L) {
> #line 197
12054,12055d12055
< #line 199
<   mutex_lock_nested(& dev->struct_mutex, 0U);
12057c12057
<   ret = i915_gem_object_pin(obj, 0U);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
12059c12059
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 0U);
12061c12061
<     mutex_unlock(& dev->struct_mutex);
---
>   if (ret != 0) {
12062a12063,12064
>     mutex_unlock(& dev->struct_mutex);
> #line 204
12067c12069
< #line 205
---
> #line 206
12069,12070d12070
< #line 207
<   if (ret != 0) {
12071a12072,12073
>   if (ret != 0) {
> #line 209
12076,12077d12077
< #line 210
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
12079c12079
<   offset = (loff_t )((uint64_t )obj_priv->gtt_offset + args->offset);
---
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
12080a12081,12082
>   offset = (loff_t )((uint64_t )obj_priv->gtt_offset + args->offset);
> #line 213
12082c12084
< #line 214
---
> #line 215
12085,12086d12086
< #line 221
<   i = (int )(offset >> 12);
12088c12088
<   o = (int )offset & 4095;
---
>   i = (int )(offset >> 12);
12090c12090
<   l = (int )remain;
---
>   o = (int )offset & 4095;
12092c12092
<   if ((unsigned int )(o + l) > 4096U) {
---
>   l = (int )remain;
12093a12094,12095
>   if ((unsigned int )(o + l) > 4096U) {
> #line 226
12098c12100
< #line 227
---
> #line 228
12100c12102
< #line 248
---
> #line 249
12102c12104
< #line 248
---
> #line 249
12104,12105d12105
< #line 254
<   if ((unsigned long )vaddr == (unsigned long )((char *)0)) {
12107c12107
<     ret = -14;
---
>   if ((unsigned long )vaddr == (unsigned long )((char *)0)) {
12108a12109,12110
>     ret = -14;
> #line 257
12113c12115
< #line 258
---
> #line 259
12116c12118
< #line 258
---
> #line 259
12118,12119d12119
< #line 262
<   iounmap((void volatile   *)vaddr);
12121c12121
<   if (unwritten != 0UL) {
---
>   iounmap((void volatile   *)vaddr);
12123c12123
<     ret = -14;
---
>   if (unwritten != 0UL) {
12124a12125,12126
>     ret = -14;
> #line 266
12129,12130d12130
< #line 269
<   remain = remain - (ssize_t )l;
12132c12132
<   user_data = user_data + (unsigned long )l;
---
>   remain = remain - (ssize_t )l;
12133a12134,12135
>   user_data = user_data + (unsigned long )l;
> #line 272
12136,12137d12137
< #line 214
<   if (remain > 0L) {
12138a12139,12140
>   if (remain > 0L) {
> #line 216
12145,12146d12146
< #line 280
<   i915_gem_object_unpin(obj);
12147a12148,12149
>   i915_gem_object_unpin(obj);
> #line 282
12149c12151
< #line 283
---
> #line 284
12153c12155
< #line 287 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 288 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12162c12164
< #line 295
---
> #line 296
12164c12166
< #line 297
---
> #line 298
12166,12167d12167
< #line 299
<   if (ret != 0) {
12169c12169
<     mutex_unlock(& dev->struct_mutex);
---
>   if (ret != 0) {
12170a12171,12172
>     mutex_unlock(& dev->struct_mutex);
> #line 302
12175c12177
< #line 304
---
> #line 305
12177c12179
< #line 306
---
> #line 307
12180,12181d12181
< #line 309
<   if ((unsigned long long )written != args->size) {
12183c12183
<     mutex_unlock(& dev->struct_mutex);
---
>   if ((unsigned long long )written != args->size) {
12185c12185
<     if (written < 0L) {
---
>     mutex_unlock(& dev->struct_mutex);
12186a12187,12188
>     if (written < 0L) {
> #line 313
12189c12191
< #line 314
---
> #line 315
12195c12197
< #line 317
---
> #line 318
12197c12199
< #line 319
---
> #line 320
12201c12203
< #line 328 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 329 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12210c12212
< #line 331
---
> #line 332
12212c12214
< #line 334
---
> #line 335
12214,12215d12215
< #line 336
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12217c12217
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12218a12219,12220
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 339
12223c12225
< #line 339
---
> #line 340
12225c12227
< #line 345
---
> #line 346
12227,12228d12228
< #line 347
<     drm_gem_object_unreference(obj);
12229a12230,12231
>     drm_gem_object_unreference(obj);
> #line 349
12234c12236
< #line 357
---
> #line 358
12236c12238
< #line 359
---
> #line 360
12239c12241
< #line 361
---
> #line 362
12242c12244
< #line 368
---
> #line 369
12244c12246
< #line 370
---
> #line 371
12248c12250
< #line 377 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 378 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12256c12258
< #line 380
---
> #line 381
12258,12259d12259
< #line 384
<   if (((dev->driver)->driver_features & 4096U) == 0U) {
12260a12261,12262
>   if (((dev->driver)->driver_features & 4096U) == 0U) {
> #line 386
12265,12266d12266
< #line 387
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12268c12268
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12269a12270,12271
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 390
12274c12276
< #line 391
---
> #line 392
12276c12278
< #line 396
---
> #line 397
12278,12279d12279
< #line 398
<   drm_gem_object_unreference(obj);
12281c12281
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
12282a12283,12284
>   mutex_unlock(& dev->struct_mutex);
> #line 401
12286c12288
< #line 407 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 408 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12295c12297
< #line 410
---
> #line 411
12297c12299
< #line 413
---
> #line 414
12299,12300d12300
< #line 415
<   if (((dev->driver)->driver_features & 4096U) == 0U) {
12301a12302,12303
>   if (((dev->driver)->driver_features & 4096U) == 0U) {
> #line 417
12306,12307d12307
< #line 418
<   mutex_lock_nested(& dev->struct_mutex, 0U);
12309c12309
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
12311c12311
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12313c12313
<     mutex_unlock(& dev->struct_mutex);
---
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
12314a12315,12316
>     mutex_unlock(& dev->struct_mutex);
> #line 423
12319c12321
< #line 429
---
> #line 430
12321,12322d12322
< #line 432
<   if ((int )obj->write_domain & 1 && obj_priv->pin_count != 0) {
12324c12324
<     i915_gem_clflush_object(obj);
---
>   if ((int )obj->write_domain & 1 && obj_priv->pin_count != 0) {
12325a12326,12327
>     i915_gem_clflush_object(obj);
> #line 435
12330,12331d12331
< #line 436
<   drm_gem_object_unreference(obj);
12333c12333
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
12334a12335,12336
>   mutex_unlock(& dev->struct_mutex);
> #line 439
12338c12340
< #line 449 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 450 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12350c12352
< #line 452
---
> #line 453
12352,12353d12353
< #line 457
<   if (((dev->driver)->driver_features & 4096U) == 0U) {
12354a12355,12356
>   if (((dev->driver)->driver_features & 4096U) == 0U) {
> #line 459
12359,12360d12360
< #line 460
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12362c12362
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
12363a12364,12365
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 463
12368c12370
< #line 464
---
> #line 465
12370c12372
< #line 466
---
> #line 467
12372,12373d12373
< #line 466
<   down_write(& (tmp->mm)->mmap_sem);
12374a12375,12376
>   down_write(& (tmp->mm)->mmap_sem);
> #line 468
12376c12378
< #line 470
---
> #line 471
12378,12379d12379
< #line 470
<   up_write(& (tmp___0->mm)->mmap_sem);
12381c12381
<   mutex_lock_nested(& dev->struct_mutex, 0U);
---
>   up_write(& (tmp___0->mm)->mmap_sem);
12383c12383
<   drm_gem_object_unreference(obj);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
12385c12385
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
12386a12387,12388
>   mutex_unlock(& dev->struct_mutex);
> #line 475
12388,12389d12389
< #line 474
<   if (tmp___1 != 0L) {
12390a12391,12392
>   if (tmp___1 != 0L) {
> #line 476
12395c12397
< #line 477
---
> #line 478
12397c12399
< #line 479
---
> #line 480
12401c12403
< #line 483 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 484 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12409,12410d12410
< #line 485
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
12411a12412,12413
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
> #line 487
12413,12414d12414
< #line 489
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
12415a12416,12417
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
> #line 491
12420c12422
< #line 493
---
> #line 494
12422c12424
< #line 493
---
> #line 494
12425,12426d12426
< #line 494
<   if ((unsigned long )*(obj_priv->page_list + (unsigned long )i) != (unsigned long )((struct page *)0)) {
12428c12428
<     if (obj_priv->dirty != 0) {
---
>   if ((unsigned long )*(obj_priv->page_list + (unsigned long )i) != (unsigned long )((struct page *)0)) {
12429a12430,12431
>     if (obj_priv->dirty != 0) {
> #line 497
12434,12435d12435
< #line 497
<     mark_page_accessed(*(obj_priv->page_list + (unsigned long )i));
12436a12437,12438
>     mark_page_accessed(*(obj_priv->page_list + (unsigned long )i));
> #line 499
12441c12443
< #line 493
---
> #line 494
12444,12445d12445
< #line 493
<   if (i < page_count___0) {
12446a12447,12448
>   if (i < page_count___0) {
> #line 495
12451c12453
< #line 500
---
> #line 501
12453c12455
< #line 502
---
> #line 503
12455,12456d12456
< #line 505
<   obj_priv->page_list = 0;
12457a12458,12459
>   obj_priv->page_list = 0;
> #line 507
12461c12463
< #line 509 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 510 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12469,12470d12470
< #line 511
<   dev = obj->dev;
12472c12472
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
---
>   dev = obj->dev;
12473a12474,12475
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 514
12475,12476d12476
< #line 516
<   if (obj_priv->active == 0) {
12478c12478
<     drm_gem_object_reference(obj);
---
>   if (obj_priv->active == 0) {
12479a12480,12481
>     drm_gem_object_reference(obj);
> #line 519
12484c12486
< #line 521
---
> #line 522
12486c12488
< #line 523
---
> #line 524
12490c12492
< #line 527 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 528 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12498,12499d12499
< #line 529
<   dev = obj->dev;
12501c12501
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
---
>   dev = obj->dev;
12502a12503,12504
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 532
12504,12505d12505
< #line 534
<   if (obj_priv->pin_count != 0) {
12506a12507,12508
>   if (obj_priv->pin_count != 0) {
> #line 536
12509c12511
< #line 537
---
> #line 538
12512,12513d12513
< #line 539
<   if (obj_priv->active != 0) {
12515c12515
<     obj_priv->active = 0;
---
>   if (obj_priv->active != 0) {
12516a12517,12518
>     obj_priv->active = 0;
> #line 542
12521c12523
< #line 543
---
> #line 544
12525c12527
< #line 555 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 556 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12539c12541
< #line 557
---
> #line 558
12541c12543
< #line 563
---
> #line 564
12543,12544d12544
< #line 563
<   request = (struct drm_i915_gem_request *)tmp;
12546c12546
<   if ((unsigned long )request == (unsigned long )((struct drm_i915_gem_request *)0)) {
---
>   request = (struct drm_i915_gem_request *)tmp;
12547a12548,12549
>   if ((unsigned long )request == (unsigned long )((struct drm_i915_gem_request *)0)) {
> #line 566
12552,12553d12553
< #line 570
<   seqno = dev_priv->mm.next_gem_seqno;
12555c12555
<   dev_priv->mm.next_gem_seqno = dev_priv->mm.next_gem_seqno + (uint32_t )1;
---
>   seqno = dev_priv->mm.next_gem_seqno;
12557c12557
<   if (dev_priv->mm.next_gem_seqno == 0U) {
---
>   dev_priv->mm.next_gem_seqno = dev_priv->mm.next_gem_seqno + (uint32_t )1;
12558a12559,12560
>   if (dev_priv->mm.next_gem_seqno == 0U) {
> #line 574
12563c12565
< #line 575
---
> #line 576
12565c12567
< #line 575
---
> #line 576
12570,12577d12571
< #line 575
<   outcount = 0U;
< #line 575
<   outring = (unsigned int )dev_priv->ring.tail;
< #line 575
<   ringmask = (unsigned int )dev_priv->ring.tail_mask;
< #line 575
<   virt = (char volatile   *)dev_priv->ring.virtual_start;
12579c12573
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = 276824065U;
---
>   outcount = 0U;
12581c12575
<   outcount = outcount + 1U;
---
>   outring = (unsigned int )dev_priv->ring.tail;
12583c12577
<   outring = outring + 4U;
---
>   ringmask = (unsigned int )dev_priv->ring.tail_mask;
12585c12579
<   outring = outring & ringmask;
---
>   virt = (char volatile   *)dev_priv->ring.virtual_start;
12587c12581
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = 64U;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = 276824065U;
12595c12589
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = seqno;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = 64U;
12602,12604c12596,12598
< #line 580
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = 16777216U;
< #line 580
---
> #line 579
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = seqno;
> #line 579
12606c12600
< #line 580
---
> #line 579
12608c12602
< #line 580
---
> #line 579
12611c12605
<   dev_priv->ring.tail = (int )outring;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = 16777216U;
12613c12607,12609
<   dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
---
>   outcount = outcount + 1U;
> #line 581
>   outring = outring + 4U;
12614a12611,12616
>   outring = outring & ringmask;
> #line 582
>   dev_priv->ring.tail = (int )outring;
> #line 582
>   dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
> #line 582
12616c12618
< #line 583
---
> #line 584
12618c12620
< #line 583
---
> #line 584
12623,12624d12624
< #line 585
<   request->seqno = seqno;
12626c12626
<   request->emitted_jiffies = jiffies;
---
>   request->seqno = seqno;
12628c12628
<   request->flush_domains = flush_domains;
---
>   request->emitted_jiffies = jiffies;
12630c12630
<   was_empty = list_empty((struct list_head  const  *)(& dev_priv->mm.request_list));
---
>   request->flush_domains = flush_domains;
12631a12632,12633
>   was_empty = list_empty((struct list_head  const  *)(& dev_priv->mm.request_list));
> #line 590
12633,12634d12634
< #line 591
<   if (was_empty != 0) {
12635a12636,12637
>   if (was_empty != 0) {
> #line 593
12640c12642
< #line 593
---
> #line 594
12644c12646
< #line 603 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 604 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12656,12657d12657
< #line 605
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
12659c12659
<   cmd = 33554436U;
---
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
12660a12661,12662
>   cmd = 33554436U;
> #line 608
12662,12663d12663
< #line 611
<   if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
12664a12665,12666
>   if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
> #line 613
12669c12671
< #line 613
---
> #line 614
12671c12673
< #line 613
---
> #line 614
12676,12683d12677
< #line 613
<   outcount = 0U;
< #line 613
<   outring = (unsigned int )dev_priv->ring.tail;
< #line 613
<   ringmask = (unsigned int )dev_priv->ring.tail_mask;
< #line 613
<   virt = (char volatile   *)dev_priv->ring.virtual_start;
12685c12679
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = cmd;
---
>   outcount = 0U;
12687c12681
<   outcount = outcount + 1U;
---
>   outring = (unsigned int )dev_priv->ring.tail;
12689c12683
<   outring = outring + 4U;
---
>   ringmask = (unsigned int )dev_priv->ring.tail_mask;
12691c12685
<   outring = outring & ringmask;
---
>   virt = (char volatile   *)dev_priv->ring.virtual_start;
12693c12687
<   *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = cmd;
12701c12695
<   dev_priv->ring.tail = (int )outring;
---
>   *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
12703c12697
<   dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
---
>   outcount = outcount + 1U;
12705c12699,12701
<   writel(outring, (void volatile   *)dev_priv->regs + 8240U);
---
>   outring = outring + 4U;
> #line 616
>   outring = outring & ringmask;
12706a12703,12708
>   dev_priv->ring.tail = (int )outring;
> #line 617
>   dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
> #line 617
>   writel(outring, (void volatile   *)dev_priv->regs + 8240U);
> #line 618
12710c12712
< #line 625 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 626 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12726c12728
< #line 628
---
> #line 629
12728c12730
< #line 633
---
> #line 634
12731c12733
< #line 637
---
> #line 638
12733c12735
< #line 637
---
> #line 638
12735c12737
< #line 640
---
> #line 641
12737,12738d12738
< #line 646
<   if (obj_priv->last_rendering_seqno != request->seqno) {
12739a12740,12741
>   if (obj_priv->last_rendering_seqno != request->seqno) {
> #line 648
12744,12745d12745
< #line 653
<   if (obj->write_domain != 0U) {
12746a12747,12748
>   if (obj->write_domain != 0U) {
> #line 655
12749c12751
< #line 657
---
> #line 658
12753c12755
< #line 633
---
> #line 634
12755,12756d12756
< #line 633
<   if (tmp == 0) {
12757a12758,12759
>   if (tmp == 0) {
> #line 635
12763c12765
< #line 661
---
> #line 662
12765c12767
< #line 667
---
> #line 668
12767c12769
< #line 667
---
> #line 668
12769c12771
< #line 667
---
> #line 668
12771c12773
< #line 667
---
> #line 668
12773c12775
< #line 667
---
> #line 668
12776c12778
< #line 669
---
> #line 670
12778,12779d12779
< #line 671
<     if ((obj___0->write_domain & request->flush_domains) != 0U) {
12781c12781
<       obj___0->write_domain = 0U;
---
>     if ((obj___0->write_domain & request->flush_domains) != 0U) {
12782a12783,12784
>       obj___0->write_domain = 0U;
> #line 674
12787c12789
< #line 667
---
> #line 668
12789c12791
< #line 667
---
> #line 668
12791c12793
< #line 667
---
> #line 668
12794,12795d12795
< #line 667
<     if ((unsigned long )(& obj_priv___0->list) != (unsigned long )(& dev_priv->mm.flushing_list)) {
12796a12797,12798
>     if ((unsigned long )(& obj_priv___0->list) != (unsigned long )(& dev_priv->mm.flushing_list)) {
> #line 669
12805c12807
< #line 673
---
> #line 674
12809c12811
< #line 684 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 685 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12815c12817
< #line 686
---
> #line 687
12819c12821
< #line 690 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 691 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12825c12827
< #line 692
---
> #line 693
12827c12829
< #line 694
---
> #line 695
12831c12833
< #line 701 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 702 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12843c12845
< #line 703
---
> #line 704
12845c12847
< #line 706
---
> #line 707
12847c12849
< #line 708
---
> #line 709
12850c12852
< #line 712
---
> #line 713
12852c12854
< #line 712
---
> #line 713
12854c12856
< #line 715
---
> #line 716
12856c12858
< #line 717
---
> #line 718
12858c12860
< #line 717
---
> #line 718
12860c12862
< #line 719
---
> #line 720
12862,12863d12863
< #line 721
<     list_del(& request->list);
12864a12865,12866
>     list_del(& request->list);
> #line 723
12867c12869
< #line 724
---
> #line 725
12871c12873
< #line 708
---
> #line 709
12873,12874d12874
< #line 708
<   if (tmp___0 == 0) {
12875a12876,12877
>   if (tmp___0 == 0) {
> #line 710
12881c12883
< #line 713
---
> #line 714
12885c12887
< #line 729 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 730 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12894c12896
< #line 734
---
> #line 735
12896c12898
< #line 734
---
> #line 735
12898c12900
< #line 736
---
> #line 737
12900,12901d12901
< #line 738
<   mutex_lock_nested(& dev->struct_mutex, 0U);
12903c12903
<   i915_gem_retire_requests(dev);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
12904a12905,12906
>   i915_gem_retire_requests(dev);
> #line 741
12906,12907d12907
< #line 740
<   if (tmp == 0) {
12908a12909,12910
>   if (tmp == 0) {
> #line 742
12913,12914d12914
< #line 742
<   mutex_unlock(& dev->struct_mutex);
12915a12916,12917
>   mutex_unlock(& dev->struct_mutex);
> #line 744
12919c12921
< #line 750 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 751 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
12939,12940d12940
< #line 752
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
12941a12942,12943
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 754
12943c12945
< #line 755
---
> #line 756
12945c12947
< #line 755
---
> #line 756
12947c12949
< #line 755
---
> #line 756
12949c12951
<                          "i" (755), "i" (24UL));
---
>                          "i" (756), "i" (24UL));
12951c12953
< #line 755
---
> #line 756
12956c12958
< #line 757
---
> #line 758
12958c12960
< #line 757
---
> #line 758
12960,12961d12961
< #line 757
<   if (tmp___8 == 0) {
12963c12963
<     dev_priv->mm.waiting_gem_seqno = seqno;
---
>   if (tmp___8 == 0) {
12965c12965
<     i915_user_irq_get(dev);
---
>     dev_priv->mm.waiting_gem_seqno = seqno;
12966a12967,12968
>     i915_user_irq_get(dev);
> #line 761
12968c12970
< #line 760
---
> #line 761
12970c12972
< #line 760
---
> #line 761
12972c12974
< #line 760
---
> #line 761
12974c12976
< #line 760
---
> #line 761
12976c12978
< #line 760
---
> #line 761
12978c12980
< #line 760
---
> #line 761
12980c12982
< #line 760
---
> #line 761
12982c12984
< #line 760
---
> #line 761
12984c12986
< #line 760
---
> #line 761
12987c12989
< #line 760
---
> #line 761
12989c12991
< #line 760
---
> #line 761
12991c12993
< #line 760
---
> #line 761
12993c12995
< #line 760
---
> #line 761
12995c12997
< #line 760
---
> #line 761
13000c13002
< #line 760
---
> #line 761
13002c13004
< #line 760
---
> #line 761
13004c13006
< #line 760
---
> #line 761
13006c13008
< #line 760
---
> #line 761
13008c13010
< #line 760
---
> #line 761
13013c13015
< #line 760
---
> #line 761
13015c13017
< #line 760
---
> #line 761
13018c13020
< #line 760
---
> #line 761
13021c13023
< #line 760
---
> #line 761
13026c13028
< #line 760
---
> #line 761
13028,13029d13029
< #line 764
<     i915_user_irq_put(dev);
13030a13031,13032
>     i915_user_irq_put(dev);
> #line 766
13035,13036d13036
< #line 767
<   if (dev_priv->mm.wedged != 0) {
13037a13038,13039
>   if (dev_priv->mm.wedged != 0) {
> #line 769
13042,13043d13043
< #line 770
<   if (ret != 0 && ret != -512) {
13044a13045,13046
>   if (ret != 0 && ret != -512) {
> #line 772
13046c13048
< #line 771
---
> #line 772
13052,13053d13053
< #line 779
<   if (ret == 0) {
13054a13055,13056
>   if (ret == 0) {
> #line 781
13059c13061
< #line 782
---
> #line 783
13063c13065
< #line 786 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 787 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13075c13077
< #line 790
---
> #line 791
13077,13078d13078
< #line 799
<   if ((int )flush_domains & 1) {
13079a13080,13081
>   if ((int )flush_domains & 1) {
> #line 801
13084c13086
< #line 802
---
> #line 803
13086,13087d13087
< #line 832
<     cmd = 33554436U;
13088a13089,13090
>     cmd = 33554436U;
> #line 834
13090c13092
< #line 835
---
> #line 836
13095c13097
< #line 836
---
> #line 837
13097,13098d13098
< #line 841
<       if ((invalidate_domains & 4U) != 0U) {
13099a13100,13101
>       if ((invalidate_domains & 4U) != 0U) {
> #line 843
13107,13108d13108
< #line 844
<     if ((invalidate_domains & 16U) != 0U) {
13109a13110,13111
>     if ((invalidate_domains & 16U) != 0U) {
> #line 846
13114c13116
< #line 850
---
> #line 851
13116c13118
< #line 850
---
> #line 851
13121,13128d13122
< #line 850
<     outcount = 0U;
< #line 850
<     outring = (unsigned int )dev_priv->ring.tail;
< #line 850
<     ringmask = (unsigned int )dev_priv->ring.tail_mask;
< #line 850
<     virt = (char volatile   *)dev_priv->ring.virtual_start;
13130c13124
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = cmd;
---
>     outcount = 0U;
13132c13126
<     outcount = outcount + 1U;
---
>     outring = (unsigned int )dev_priv->ring.tail;
13134c13128
<     outring = outring + 4U;
---
>     ringmask = (unsigned int )dev_priv->ring.tail_mask;
13136c13130
<     outring = outring & ringmask;
---
>     virt = (char volatile   *)dev_priv->ring.virtual_start;
13138c13132
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = cmd;
13146c13140
<     dev_priv->ring.tail = (int )outring;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
13148c13142
<     dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
---
>     outcount = outcount + 1U;
13149a13144,13151
>     outring = outring + 4U;
> #line 853
>     outring = outring & ringmask;
> #line 854
>     dev_priv->ring.tail = (int )outring;
> #line 854
>     dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
> #line 854
13154c13156
< #line 855
---
> #line 856
13158c13160
< #line 862 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 863 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13168,13169d13169
< #line 864
<   dev = obj->dev;
13170a13171,13172
>   dev = obj->dev;
> #line 866
13172,13173d13173
< #line 871
<   if ((obj->write_domain & 4294967230U) != 0U) {
13174a13175,13176
>   if ((obj->write_domain & 4294967230U) != 0U) {
> #line 873
13176c13178
< #line 877
---
> #line 878
13178,13179d13179
< #line 879
<     i915_gem_object_move_to_active(obj);
13180a13181,13182
>     i915_gem_object_move_to_active(obj);
> #line 881
13182c13184
< #line 882
---
> #line 883
13184c13186
< #line 882
---
> #line 883
13186c13188
< #line 882
---
> #line 883
13188c13190
<                            "i" (882), "i" (24UL));
---
>                            "i" (883), "i" (24UL));
13190c13192
< #line 882
---
> #line 883
13198c13200
< #line 891
---
> #line 892
13200,13201d13201
< #line 896
<     ret = i915_wait_request(dev, obj_priv->last_rendering_seqno);
13203c13203
<     if (ret != 0) {
---
>     ret = i915_wait_request(dev, obj_priv->last_rendering_seqno);
13204a13205,13206
>     if (ret != 0) {
> #line 899
13212c13214
< #line 901
---
> #line 902
13216c13218
< #line 908 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 909 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13226,13227d13227
< #line 910
<   dev = obj->dev;
13229c13229
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
---
>   dev = obj->dev;
13230a13231,13232
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
> #line 913
13232,13233d13233
< #line 918
<   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
13234a13235,13236
>   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
> #line 920
13239,13240d13240
< #line 921
<   if (obj_priv->pin_count != 0) {
13242c13242
<     printk("<3>[drm:%s] *ERROR* Attempting to unbind pinned buffer\n", "i915_gem_object_unbind");
---
>   if (obj_priv->pin_count != 0) {
13243a13244,13245
>     printk("<3>[drm:%s] *ERROR* Attempting to unbind pinned buffer\n", "i915_gem_object_unbind");
> #line 924
13248,13249d13249
< #line 928
<   ret = i915_gem_object_wait_rendering(obj);
13251c13251
<   if (ret != 0) {
---
>   ret = i915_gem_object_wait_rendering(obj);
13252a13253,13254
>   if (ret != 0) {
> #line 931
13255c13257
< #line 931
---
> #line 932
13260c13262
< #line 940
---
> #line 941
13262,13263d13263
< #line 942
<   if (ret != 0) {
13264a13265,13266
>   if (ret != 0) {
> #line 944
13267c13269
< #line 944
---
> #line 945
13272,13273d13273
< #line 947
<   if ((unsigned long )obj_priv->agp_mem != (unsigned long )((struct agp_memory *)0)) {
13275c13275
<     drm_unbind_agp(obj_priv->agp_mem);
---
>   if ((unsigned long )obj_priv->agp_mem != (unsigned long )((struct agp_memory *)0)) {
13277c13277
<     drm_free_agp(obj_priv->agp_mem, (int )(obj->size / 4096UL));
---
>     drm_unbind_agp(obj_priv->agp_mem);
13278a13279,13280
>     drm_free_agp(obj_priv->agp_mem, (int )(obj->size / 4096UL));
> #line 951
13283c13285
< #line 953
---
> #line 954
13285c13287
< #line 953
---
> #line 954
13287c13289
< #line 953
---
> #line 954
13289c13291
<                          "i" (953), "i" (24UL));
---
>                          "i" (954), "i" (24UL));
13291c13293
< #line 953
---
> #line 954
13296c13298
< #line 955
---
> #line 956
13298,13299d13299
< #line 957
<   if ((unsigned long )obj_priv->gtt_space != (unsigned long )((struct drm_mm_node *)0)) {
13301c13301
<     atomic_dec(& dev->gtt_count);
---
>   if ((unsigned long )obj_priv->gtt_space != (unsigned long )((struct drm_mm_node *)0)) {
13302a13303,13304
>     atomic_dec(& dev->gtt_count);
> #line 960
13304,13305d13305
< #line 961
<     drm_mm_put_block(obj_priv->gtt_space);
13306a13307,13308
>     drm_mm_put_block(obj_priv->gtt_space);
> #line 963
13311c13313
< #line 966
---
> #line 967
13313,13314d13314
< #line 966
<   if (tmp___0 == 0) {
13315a13316,13317
>   if (tmp___0 == 0) {
> #line 968
13320c13322
< #line 969
---
> #line 970
13324c13326
< #line 973 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 974 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13346c13348
< #line 975
---
> #line 976
13348c13350
< #line 978
---
> #line 979
13351c13353
< #line 984
---
> #line 985
13353,13354d13354
< #line 984
<   if (tmp___1 == 0) {
13355a13356,13357
>   if (tmp___1 == 0) {
> #line 986
13357c13359
< #line 985
---
> #line 986
13359,13360d13360
< #line 988
<     obj = obj_priv->obj;
13361a13362,13363
>     obj = obj_priv->obj;
> #line 990
13363c13365
< #line 989
---
> #line 990
13365c13367
< #line 989
---
> #line 990
13367c13369
<                            "i" (989), "i" (24UL));
---
>                            "i" (990), "i" (24UL));
13369c13371
< #line 989
---
> #line 990
13374c13376
< #line 993
---
> #line 994
13376c13378
< #line 993
---
> #line 994
13378c13380
< #line 993
---
> #line 994
13380c13382
<                            "i" (993), "i" (24UL));
---
>                            "i" (994), "i" (24UL));
13382c13384
< #line 993
---
> #line 994
13387,13388d13388
< #line 996
<     ret = i915_gem_object_unbind(obj);
13389a13390,13391
>     ret = i915_gem_object_unbind(obj);
> #line 998
13394c13396
< #line 1004
---
> #line 1005
13396c13398
< #line 1004
---
> #line 1005
13398c13400
< #line 1007
---
> #line 1008
13400c13402
< #line 1007
---
> #line 1008
13402,13403d13403
< #line 1011
<     ret = i915_wait_request(dev, request->seqno);
13405c13405
<     if (ret != 0) {
---
>     ret = i915_wait_request(dev, request->seqno);
13406a13407,13408
>     if (ret != 0) {
> #line 1014
13411c13413
< #line 1020
---
> #line 1021
13413,13414d13414
< #line 1020
<     if (tmp___2 == 0) {
13415a13416,13417
>     if (tmp___2 == 0) {
> #line 1022
13420c13422
< #line 1022
---
> #line 1023
13425c13427
< #line 1030
---
> #line 1031
13427,13428d13428
< #line 1030
<   if (tmp___4 == 0) {
13429a13430,13431
>   if (tmp___4 == 0) {
> #line 1032
13431c13433
< #line 1031
---
> #line 1032
13433c13435
< #line 1034
---
> #line 1035
13435c13437
< #line 1036
---
> #line 1037
13437c13439
< #line 1039
---
> #line 1040
13439,13440d13440
< #line 1041
<     obj = 0;
13441a13442,13443
>     obj = 0;
> #line 1043
13446c13448
< #line 1045
---
> #line 1046
13448c13450
< #line 1045
---
> #line 1046
13450c13452
< #line 1045
---
> #line 1046
13452c13454
< #line 1045
---
> #line 1046
13455c13457
< #line 1053
---
> #line 1054
13458c13460
< #line 1054
---
> #line 1055
13461c13463
< #line 1055
---
> #line 1056
13465c13467
< #line 1059 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1060 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13481c13483
< #line 1061
---
> #line 1062
13483,13484d13484
< #line 1068
<   if ((unsigned long )obj_priv->page_list != (unsigned long )((struct page **)0)) {
13485a13486,13487
>   if ((unsigned long )obj_priv->page_list != (unsigned long )((struct page **)0)) {
> #line 1070
13490,13491d13491
< #line 1074
<   page_count___0 = (int )(obj->size / 4096UL);
13492a13493,13494
>   page_count___0 = (int )(obj->size / 4096UL);
> #line 1076
13495c13497
< #line 1075
---
> #line 1076
13497c13499
< #line 1075
---
> #line 1076
13499c13501
<                          "i" (1075), "i" (24UL));
---
>                          "i" (1076), "i" (24UL));
13501c13503
< #line 1075
---
> #line 1076
13506c13508
< #line 1076
---
> #line 1077
13508c13510
< #line 1076
---
> #line 1077
13510,13511d13511
< #line 1078
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
13513c13513
<     printk("<3>[drm:%s] *ERROR* Faled to allocate page list\n", "i915_gem_object_get_page_list");
---
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
13514a13515,13516
>     printk("<3>[drm:%s] *ERROR* Faled to allocate page list\n", "i915_gem_object_get_page_list");
> #line 1081
13519,13520d13520
< #line 1083
<   inode = ((obj->filp)->f_path.dentry)->d_inode;
13522c13522
<   mapping = inode->i_mapping;
---
>   inode = ((obj->filp)->f_path.dentry)->d_inode;
13523a13524,13525
>   mapping = inode->i_mapping;
> #line 1086
13525c13527
< #line 1085
---
> #line 1086
13528,13529d13529
< #line 1086
<   page = read_mapping_page(mapping, (unsigned long )i, 0);
13530a13531,13532
>   page = read_mapping_page(mapping, (unsigned long )i, 0);
> #line 1088
13532,13533d13533
< #line 1087
<   if (tmp___2 != 0L) {
13534a13535,13536
>   if (tmp___2 != 0L) {
> #line 1089
13536,13537d13537
< #line 1088
<     ret = (int )tmp___1;
13538a13539,13540
>     ret = (int )tmp___1;
> #line 1090
13541,13542d13542
< #line 1090
<     i915_gem_object_free_page_list(obj);
13543a13544,13545
>     i915_gem_object_free_page_list(obj);
> #line 1092
13548c13550
< #line 1093
---
> #line 1094
13550c13552
< #line 1085
---
> #line 1086
13553,13554d13554
< #line 1085
<   if (i < page_count___0) {
13555a13556,13557
>   if (i < page_count___0) {
> #line 1087
13561c13563
< #line 1095
---
> #line 1096
13565c13567
< #line 1102 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1103 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13581,13582d13582
< #line 1104
<   dev = obj->dev;
13584c13584
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
---
>   dev = obj->dev;
13585a13586,13587
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 1107
13587,13588d13588
< #line 1110
<   if (alignment == 0U) {
13589a13590,13591
>   if (alignment == 0U) {
> #line 1112
13594,13595d13595
< #line 1112
<   if (((unsigned long )alignment & 4095UL) != 0UL) {
13596a13597,13598
>   if (((unsigned long )alignment & 4095UL) != 0UL) {
> #line 1114
13599c13601
< #line 1114
---
> #line 1115
13605c13607
< #line 1118
---
> #line 1119
13608,13609d13609
< #line 1120
<   if ((unsigned long )free_space != (unsigned long )((struct drm_mm_node *)0)) {
13610a13611,13612
>   if ((unsigned long )free_space != (unsigned long )((struct drm_mm_node *)0)) {
> #line 1122
13612,13613d13613
< #line 1123
<     if ((unsigned long )obj_priv->gtt_space != (unsigned long )((struct drm_mm_node *)0)) {
13615c13615
<       (obj_priv->gtt_space)->private = (void *)obj;
---
>     if ((unsigned long )obj_priv->gtt_space != (unsigned long )((struct drm_mm_node *)0)) {
13616a13617,13618
>       (obj_priv->gtt_space)->private = (void *)obj;
> #line 1126
13624c13626
< #line 1128
---
> #line 1129
13626c13628
< #line 1135
---
> #line 1136
13628c13630
< #line 1135
---
> #line 1136
13630c13632
< #line 1135
---
> #line 1136
13632c13634
< #line 1135
---
> #line 1136
13634c13636
< #line 1135
---
> #line 1136
13636c13638
< #line 1135
---
> #line 1136
13638,13639d13639
< #line 1138
<           printk("<3>[drm:%s] *ERROR* GTT full, but LRU list empty\n", "i915_gem_object_bind_to_gtt");
13640a13641,13642
>           printk("<3>[drm:%s] *ERROR* GTT full, but LRU list empty\n", "i915_gem_object_bind_to_gtt");
> #line 1140
13651,13652d13652
< #line 1142
<     ret = i915_gem_evict_something(dev);
13654c13654
<     if (ret != 0) {
---
>     ret = i915_gem_evict_something(dev);
13655a13656,13657
>     if (ret != 0) {
> #line 1145
13658c13660
< #line 1145
---
> #line 1146
13663c13665
< #line 1147
---
> #line 1148
13668,13669d13669
< #line 1154
<   ret = i915_gem_object_get_page_list(obj);
13671c13671
<   if (ret != 0) {
---
>   ret = i915_gem_object_get_page_list(obj);
13673c13673
<     drm_mm_put_block(obj_priv->gtt_space);
---
>   if (ret != 0) {
13675c13675
<     obj_priv->gtt_space = 0;
---
>     drm_mm_put_block(obj_priv->gtt_space);
13676a13677,13678
>     obj_priv->gtt_space = 0;
> #line 1159
13681c13683
< #line 1161
---
> #line 1162
13683c13685
< #line 1165
---
> #line 1166
13686,13687d13687
< #line 1169
<   if ((unsigned long )obj_priv->agp_mem == (unsigned long )((struct agp_memory *)0)) {
13689c13689
<     i915_gem_object_free_page_list(obj);
---
>   if ((unsigned long )obj_priv->agp_mem == (unsigned long )((struct agp_memory *)0)) {
13691c13691
<     drm_mm_put_block(obj_priv->gtt_space);
---
>     i915_gem_object_free_page_list(obj);
13693c13693
<     obj_priv->gtt_space = 0;
---
>     drm_mm_put_block(obj_priv->gtt_space);
13694a13695,13696
>     obj_priv->gtt_space = 0;
> #line 1174
13699,13700d13700
< #line 1175
<   atomic_inc(& dev->gtt_count);
13701a13702,13703
>   atomic_inc(& dev->gtt_count);
> #line 1177
13703c13705
< #line 1182
---
> #line 1183
13705c13707
< #line 1182
---
> #line 1183
13707c13709
< #line 1182
---
> #line 1183
13709c13711
<                          "i" (1182), "i" (24UL));
---
>                          "i" (1183), "i" (24UL));
13711c13713
< #line 1182
---
> #line 1183
13716c13718
< #line 1183
---
> #line 1184
13718c13720
< #line 1183
---
> #line 1184
13720c13722
< #line 1183
---
> #line 1184
13722c13724
<                          "i" (1183), "i" (24UL));
---
>                          "i" (1184), "i" (24UL));
13724c13726
< #line 1183
---
> #line 1184
13729c13731
< #line 1185
---
> #line 1186
13733c13735
< #line 1189 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1190 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13739c13741
< #line 1191
---
> #line 1192
13741,13742d13742
< #line 1197
<   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
13743a13744,13745
>   if ((unsigned long )obj_priv->page_list == (unsigned long )((struct page **)0)) {
> #line 1199
13748,13749d13749
< #line 1200
<   drm_clflush_pages(obj_priv->page_list, obj->size / 4096UL);
13750a13751,13752
>   drm_clflush_pages(obj_priv->page_list, obj->size / 4096UL);
> #line 1202
13754c13756
< #line 1315 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1316 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13765,13766d13766
< #line 1319
<   dev = obj->dev;
13768c13768
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
---
>   dev = obj->dev;
13770c13770
<   invalidate_domains = 0U;
---
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
13771a13772,13773
>   invalidate_domains = 0U;
> #line 1323
13773,13774d13774
< #line 1335
<   if (write_domain == 0U) {
13775a13776,13777
>   if (write_domain == 0U) {
> #line 1337
13778c13780
< #line 1338
---
> #line 1339
13781,13782d13782
< #line 1346
<   if (obj->write_domain != 0U && obj->write_domain != read_domains) {
13784c13784
<     flush_domains = obj->write_domain | flush_domains;
---
>   if (obj->write_domain != 0U && obj->write_domain != read_domains) {
13785a13786,13787
>     flush_domains = obj->write_domain | flush_domains;
> #line 1349
13790,13791d13791
< #line 1354
<   invalidate_domains = (~ obj->read_domains & read_domains) | invalidate_domains;
13792a13793,13794
>   invalidate_domains = (~ obj->read_domains & read_domains) | invalidate_domains;
> #line 1356
13794c13796
< #line 1365
---
> #line 1366
13796,13797d13797
< #line 1368
<       ret = i915_gem_object_wait_rendering(obj);
13799c13799
<       if (ret != 0) {
---
>       ret = i915_gem_object_wait_rendering(obj);
13800a13801,13802
>       if (ret != 0) {
> #line 1371
13808c13810
< #line 1372
---
> #line 1373
13813,13814d13814
< #line 1375
<   if ((write_domain | flush_domains) != 0U) {
13815a13816,13817
>   if ((write_domain | flush_domains) != 0U) {
> #line 1377
13820c13822
< #line 1381
---
> #line 1382
13822c13824
< #line 1384
---
> #line 1385
13824c13826
< #line 1386
---
> #line 1387
13829c13831
< #line 1388
---
> #line 1389
13831,13832d13832
< #line 1390
<   dev->invalidate_domains = dev->invalidate_domains | invalidate_domains;
13833a13834,13835
>   dev->invalidate_domains = dev->invalidate_domains | invalidate_domains;
> #line 1392
13835c13837
< #line 1398
---
> #line 1399
13839c13841
< #line 1408 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1409 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13851c13853
< #line 1414
---
> #line 1415
13853,13854d13854
< #line 1417
<   if ((int )obj->read_domains & 1) {
13855a13856,13857
>   if ((int )obj->read_domains & 1) {
> #line 1419
13860c13862
< #line 1420
---
> #line 1421
13862c13864
< #line 1422
---
> #line 1423
13864c13866
< #line 1422
---
> #line 1423
13869,13870d13870
< #line 1426
<   if ((obj->write_domain & 4294967230U) != 0U) {
13872c13872
<     ret = i915_gem_object_wait_rendering(obj);
---
>   if ((obj->write_domain & 4294967230U) != 0U) {
13874c13874
<     if (ret != 0) {
---
>     ret = i915_gem_object_wait_rendering(obj);
13875a13876,13877
>     if (ret != 0) {
> #line 1430
13883,13884d13884
< #line 1432
<   if ((unsigned long )obj_priv->page_cpu_valid == (unsigned long )((uint8_t *)0)) {
13885a13886,13887
>   if ((unsigned long )obj_priv->page_cpu_valid == (unsigned long )((uint8_t *)0)) {
> #line 1434
13887c13889
< #line 1433
---
> #line 1434
13892c13894
< #line 1440
---
> #line 1441
13894c13896
< #line 1440
---
> #line 1441
13897,13898d13898
< #line 1441
<   if ((unsigned int )*(obj_priv->page_cpu_valid + (unsigned long )i) != 0U) {
13899a13900,13901
>   if ((unsigned int )*(obj_priv->page_cpu_valid + (unsigned long )i) != 0U) {
> #line 1443
13904c13906
< #line 1444
---
> #line 1445
13906c13908
< #line 1446
---
> #line 1447
13909c13911
< #line 1440
---
> #line 1441
13912,13913d13913
< #line 1440
<   if ((unsigned long long )i <= ((offset + size) - 1ULL) / 4096ULL) {
13914a13915,13916
>   if ((unsigned long long )i <= ((offset + size) - 1ULL) / 4096ULL) {
> #line 1442
13920c13922
< #line 1449
---
> #line 1450
13924c13926
< #line 1459 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1460 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13930c13932
< #line 1461
---
> #line 1462
13932c13934
< #line 1467
---
> #line 1468
13934c13936
< #line 1474
---
> #line 1475
13936,13937d13937
< #line 1477
<     dev->invalidate_domains = 0U;
13938a13939,13940
>     dev->invalidate_domains = 0U;
> #line 1479
13943c13945
< #line 1481
---
> #line 1482
13947c13949
< #line 1488 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1489 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
13968c13970
< #line 1492
---
> #line 1493
13970c13972
< #line 1495
---
> #line 1496
13972,13973d13973
< #line 1497
<   last_reloc_offset = 4294967295U;
13974a13975,13976
>   last_reloc_offset = 4294967295U;
> #line 1499
13976,13977d13977
< #line 1501
<   ret = i915_gem_object_pin(obj, (unsigned int )entry->alignment);
13979c13979
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, (unsigned int )entry->alignment);
13980a13981,13982
>   if (ret != 0) {
> #line 1504
13985c13987
< #line 1505
---
> #line 1506
13987c13989
< #line 1507
---
> #line 1508
13989c13991
< #line 1512
---
> #line 1513
13991c13993
< #line 1512
---
> #line 1513
13994c13996
< #line 1518
---
> #line 1519
13997,13998d13998
< #line 1518
<   ret = (int )tmp;
14000c14000
<   if (ret != 0) {
---
>   ret = (int )tmp;
14002c14002
<     i915_gem_object_unpin(obj);
---
>   if (ret != 0) {
14003a14004,14005
>     i915_gem_object_unpin(obj);
> #line 1522
14008c14010
< #line 1524
---
> #line 1525
14010,14011d14011
< #line 1526
<   if ((unsigned long )target_obj == (unsigned long )((struct drm_gem_object *)0)) {
14013c14013
<     i915_gem_object_unpin(obj);
---
>   if ((unsigned long )target_obj == (unsigned long )((struct drm_gem_object *)0)) {
14014a14015,14016
>     i915_gem_object_unpin(obj);
> #line 1529
14019c14021
< #line 1530
---
> #line 1531
14021,14022d14022
< #line 1535
<   if ((unsigned long )target_obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
14023a14024,14025
>   if ((unsigned long )target_obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
> #line 1537
14026,14027d14027
< #line 1538
<     drm_gem_object_unreference(target_obj);
14029c14029
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14030a14031,14032
>     i915_gem_object_unpin(obj);
> #line 1541
14035,14036d14036
< #line 1543
<   if (reloc.offset > (unsigned long long )(obj->size - 4UL)) {
14037a14038,14039
>   if (reloc.offset > (unsigned long long )(obj->size - 4UL)) {
> #line 1545
14041,14042d14042
< #line 1548
<     drm_gem_object_unreference(target_obj);
14044c14044
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14045a14046,14047
>     i915_gem_object_unpin(obj);
> #line 1551
14050,14051d14051
< #line 1552
<   if ((reloc.offset & 3ULL) != 0ULL) {
14052a14053,14054
>   if ((reloc.offset & 3ULL) != 0ULL) {
> #line 1554
14055,14056d14056
< #line 1557
<     drm_gem_object_unreference(target_obj);
14058c14058
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14059a14060,14061
>     i915_gem_object_unpin(obj);
> #line 1560
14064c14066
< #line 1562
---
> #line 1563
14066c14068
< #line 1564
---
> #line 1565
14070,14071d14071
< #line 1571
<     drm_gem_object_unreference(target_obj);
14073c14073
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14074a14075,14076
>     i915_gem_object_unpin(obj);
> #line 1574
14079,14080d14080
< #line 1591
<   target_obj->pending_read_domains = target_obj->pending_read_domains | reloc.read_domains;
14081a14082,14083
>   target_obj->pending_read_domains = target_obj->pending_read_domains | reloc.read_domains;
> #line 1593
14083,14084d14084
< #line 1597
<   if ((uint64_t )target_obj_priv->gtt_offset == reloc.presumed_offset) {
14086c14086
<     drm_gem_object_unreference(target_obj);
---
>   if ((uint64_t )target_obj_priv->gtt_offset == reloc.presumed_offset) {
14087a14088,14089
>     drm_gem_object_unreference(target_obj);
> #line 1600
14092c14094
< #line 1606
---
> #line 1607
14094,14095d14095
< #line 1611
<   if ((int )obj->write_domain & 1) {
14097c14097
<     i915_gem_clflush_object(obj);
---
>   if ((int )obj->write_domain & 1) {
14099c14099
<     drm_agp_chipset_flush(dev);
---
>     i915_gem_clflush_object(obj);
14100a14101,14102
>     drm_agp_chipset_flush(dev);
> #line 1615
14105,14106d14106
< #line 1620
<   reloc_offset = obj_priv->gtt_offset + (uint32_t )reloc.offset;
14107a14108,14109
>   reloc_offset = obj_priv->gtt_offset + (uint32_t )reloc.offset;
> #line 1622
14109,14110d14110
< #line 1624
<     if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
14111a14112,14113
>     if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
> #line 1626
14116c14118
< #line 1627
---
> #line 1628
14119,14120d14120
< #line 1631
<     last_reloc_offset = reloc_offset;
14122c14122
<     if ((unsigned long )reloc_page == (unsigned long )((void *)0)) {
---
>     last_reloc_offset = reloc_offset;
14124c14124
<       drm_gem_object_unreference(target_obj);
---
>     if ((unsigned long )reloc_page == (unsigned long )((void *)0)) {
14126c14126
<       i915_gem_object_unpin(obj);
---
>       drm_gem_object_unreference(target_obj);
14127a14128,14129
>       i915_gem_object_unpin(obj);
> #line 1636
14135c14137
< #line 1639
---
> #line 1640
14137c14139
< #line 1641
---
> #line 1642
14139c14141
< #line 1648
---
> #line 1649
14141,14142d14142
< #line 1653
<   reloc.presumed_offset = (uint64_t )target_obj_priv->gtt_offset;
14143a14144,14145
>   reloc.presumed_offset = (uint64_t )target_obj_priv->gtt_offset;
> #line 1655
14146,14147d14147
< #line 1654
<   ret = (int )tmp___0;
14149c14149
<   if (ret != 0) {
---
>   ret = (int )tmp___0;
14151c14151
<     drm_gem_object_unreference(target_obj);
---
>   if (ret != 0) {
14153c14153
<     i915_gem_object_unpin(obj);
---
>     drm_gem_object_unreference(target_obj);
14154a14155,14156
>     i915_gem_object_unpin(obj);
> #line 1659
14159c14161
< #line 1661
---
> #line 1662
14162c14164
< #line 1512
---
> #line 1513
14165,14166d14166
< #line 1512
<   if ((uint32_t )i < entry->relocation_count) {
14167a14168,14169
>   if ((uint32_t )i < entry->relocation_count) {
> #line 1514
14173,14174d14174
< #line 1664
<   if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
14175a14176,14177
>   if ((unsigned long )reloc_page != (unsigned long )((void *)0)) {
> #line 1666
14180c14182
< #line 1671
---
> #line 1672
14184c14186
< #line 1677 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1678 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14203,14204d14204
< #line 1681
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
14205a14206,14207
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 1683
14207,14208d14208
< #line 1684
<   nbox = (int )exec->num_cliprects;
14209a14210,14211
>   nbox = (int )exec->num_cliprects;
> #line 1686
14211,14212d14212
< #line 1689
<   exec_start = (unsigned int )exec_offset + exec->batch_start_offset;
14213a14214,14215
>   exec_start = (unsigned int )exec_offset + exec->batch_start_offset;
> #line 1691
14215,14216d14216
< #line 1692
<   if (((exec_start | exec_len) & 7U) != 0U) {
14218c14218
<     printk("<3>[drm:%s] *ERROR* alignment\n", "i915_dispatch_gem_execbuffer");
---
>   if (((exec_start | exec_len) & 7U) != 0U) {
14219a14220,14221
>     printk("<3>[drm:%s] *ERROR* alignment\n", "i915_dispatch_gem_execbuffer");
> #line 1695
14224,14225d14225
< #line 1697
<   if (exec_start == 0U) {
14226a14227,14228
>   if (exec_start == 0U) {
> #line 1699
14231c14233
< #line 1700
---
> #line 1701
14233c14235
< #line 1702
---
> #line 1703
14235c14237
< #line 1702
---
> #line 1703
14238,14239d14239
< #line 1703
<   if (i < nbox) {
14240a14241,14242
>   if (i < nbox) {
> #line 1705
14242c14244
< #line 1704
---
> #line 1705
14244,14245d14245
< #line 1706
<     if (ret != 0) {
14246a14247,14248
>     if (ret != 0) {
> #line 1708
14254,14255d14255
< #line 1710
<   if (dev->pci_device == 13687 || dev->pci_device == 9570) {
14256a14257,14258
>   if (dev->pci_device == 13687 || dev->pci_device == 9570) {
> #line 1712
14258c14260
< #line 1711
---
> #line 1712
14263,14270d14264
< #line 1711
<     outcount = 0U;
< #line 1711
<     outring = (unsigned int )dev_priv->ring.tail;
< #line 1711
<     ringmask = (unsigned int )dev_priv->ring.tail_mask;
< #line 1711
<     virt = (char volatile   *)dev_priv->ring.virtual_start;
14272c14266
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = 402653185U;
---
>     outcount = 0U;
14274c14268
<     outcount = outcount + 1U;
---
>     outring = (unsigned int )dev_priv->ring.tail;
14276c14270
<     outring = outring + 4U;
---
>     ringmask = (unsigned int )dev_priv->ring.tail_mask;
14278c14272
<     outring = outring & ringmask;
---
>     virt = (char volatile   *)dev_priv->ring.virtual_start;
14280c14274
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = exec_start | 1U;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = 402653185U;
14288c14282
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = (exec_start + exec_len) - 4U;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = exec_start | 1U;
14296c14290
<     *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = (exec_start + exec_len) - 4U;
14304c14298
<     dev_priv->ring.tail = (int )outring;
---
>     *((unsigned int volatile   *)virt + (unsigned long )outring) = 0U;
14306c14300
<     dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
---
>     outcount = outcount + 1U;
14307a14302,14309
>     outring = outring + 4U;
> #line 1716
>     outring = outring & ringmask;
> #line 1717
>     dev_priv->ring.tail = (int )outring;
> #line 1717
>     dev_priv->ring.space = (int )((unsigned int )dev_priv->ring.space - outcount * 4U);
> #line 1717
14310c14312
< #line 1718
---
> #line 1719
14312c14314
< #line 1718
---
> #line 1719
14317c14319
< #line 1718
---
> #line 1719
14319c14321
< #line 1718
---
> #line 1719
14321c14323
< #line 1718
---
> #line 1719
14323,14324d14324
< #line 1718
<     virt = (char volatile   *)dev_priv->ring.virtual_start;
14326c14326
<     if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
---
>     virt = (char volatile   *)dev_priv->ring.virtual_start;
14327a14328,14329
>     if (((((((((dev->pci_device == 10610 || dev->pci_device == 10626) || dev->pci_device == 10642) || dev->pci_device == 10658) || dev->pci_device == 10754) || dev->pci_device == 10770) || dev->pci_device == 10818) || dev->pci_device == 11778) || dev->pci_device == 11794) || dev->pci_device == 11810) {
> #line 1721
14329c14331
< #line 1720
---
> #line 1721
14331c14333
< #line 1720
---
> #line 1721
14333c14335
< #line 1720
---
> #line 1721
14335c14337
< #line 1723
---
> #line 1724
14337c14339
< #line 1723
---
> #line 1724
14339c14341
< #line 1723
---
> #line 1724
14341c14343
< #line 1723
---
> #line 1724
14344c14346
< #line 1725
---
> #line 1726
14346c14348
< #line 1725
---
> #line 1726
14348c14350
< #line 1725
---
> #line 1726
14350c14352
< #line 1725
---
> #line 1726
14352c14354
< #line 1727
---
> #line 1728
14354c14356
< #line 1727
---
> #line 1728
14356c14358
< #line 1727
---
> #line 1728
14358c14360
< #line 1727
---
> #line 1728
14361c14363
< #line 1729
---
> #line 1730
14363c14365
< #line 1729
---
> #line 1730
14365c14367
< #line 1729
---
> #line 1730
14368c14370
< #line 1702
---
> #line 1703
14371,14372d14372
< #line 1702
<   if (i < count) {
14373a14374,14375
>   if (i < count) {
> #line 1704
14379c14381
< #line 1734
---
> #line 1735
14383c14385
< #line 1744 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1745 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14391,14392d14392
< #line 1746
<   i915_file_priv = (struct drm_i915_file_private *)file_priv->driver_priv;
14393a14394,14395
>   i915_file_priv = (struct drm_i915_file_private *)file_priv->driver_priv;
> #line 1748
14395,14396d14396
< #line 1750
<   mutex_lock_nested(& dev->struct_mutex, 0U);
14398c14398
<   seqno = i915_file_priv->mm.last_gem_throttle_seqno;
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
14399a14400,14401
>   seqno = i915_file_priv->mm.last_gem_throttle_seqno;
> #line 1753
14401,14402d14402
< #line 1754
<   if (seqno != 0U) {
14403a14404,14405
>   if (seqno != 0U) {
> #line 1756
14408,14409d14409
< #line 1756
<   mutex_unlock(& dev->struct_mutex);
14410a14411,14412
>   mutex_unlock(& dev->struct_mutex);
> #line 1758
14414c14416
< #line 1761 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1762 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14440,14441d14441
< #line 1764
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
14443c14443
<   i915_file_priv = (struct drm_i915_file_private *)file_priv->driver_priv;
---
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
14445c14445
<   args = (struct drm_i915_gem_execbuffer *)data;
---
>   i915_file_priv = (struct drm_i915_file_private *)file_priv->driver_priv;
14447c14447
<   exec_list = 0;
---
>   args = (struct drm_i915_gem_execbuffer *)data;
14448a14449,14450
>   exec_list = 0;
> #line 1769
14450c14452
< #line 1770
---
> #line 1771
14452,14453d14453
< #line 1779
<   if (args->buffer_count == 0U) {
14454a14455,14456
>   if (args->buffer_count == 0U) {
> #line 1781
14457c14459
< #line 1781
---
> #line 1782
14462c14464
< #line 1784
---
> #line 1785
14464c14466
< #line 1784
---
> #line 1785
14466c14468
< #line 1786
---
> #line 1787
14468c14470
< #line 1786
---
> #line 1787
14470,14471d14471
< #line 1788
<   if ((unsigned long )exec_list == (unsigned long )((struct drm_i915_gem_exec_object *)0) || (unsigned long )object_list == (unsigned long )((struct drm_gem_object **)0)) {
14472a14473,14474
>   if ((unsigned long )exec_list == (unsigned long )((struct drm_i915_gem_exec_object *)0) || (unsigned long )object_list == (unsigned long )((struct drm_gem_object **)0)) {
> #line 1790
14475,14476d14476
< #line 1792
<     ret = -12;
14477a14478,14479
>     ret = -12;
> #line 1794
14482c14484
< #line 1795
---
> #line 1796
14484c14486
< #line 1795
---
> #line 1796
14486,14487d14487
< #line 1799
<   if (ret != 0) {
14488a14489,14490
>   if (ret != 0) {
> #line 1801
14491c14493
< #line 1802
---
> #line 1803
14496c14498
< #line 1805
---
> #line 1806
14498,14499d14499
< #line 1809
<   if (dev_priv->mm.wedged != 0) {
14501c14501
<     printk("<3>[drm:%s] *ERROR* Execbuf while wedged\n", "i915_gem_execbuffer");
---
>   if (dev_priv->mm.wedged != 0) {
14503c14503
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Execbuf while wedged\n", "i915_gem_execbuffer");
14504a14505,14506
>     mutex_unlock(& dev->struct_mutex);
> #line 1813
14509,14510d14510
< #line 1815
<   if (dev_priv->mm.suspended != 0) {
14512c14512
<     printk("<3>[drm:%s] *ERROR* Execbuf while VT-switched.\n", "i915_gem_execbuffer");
---
>   if (dev_priv->mm.suspended != 0) {
14514c14514
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Execbuf while VT-switched.\n", "i915_gem_execbuffer");
14515a14516,14517
>     mutex_unlock(& dev->struct_mutex);
> #line 1819
14520,14521d14521
< #line 1825
<   dev->invalidate_domains = 0U;
14522a14523,14524
>   dev->invalidate_domains = 0U;
> #line 1827
14524c14526
< #line 1829
---
> #line 1830
14526c14528
< #line 1829
---
> #line 1830
14529c14531
< #line 1830
---
> #line 1831
14531,14532d14532
< #line 1832
<   if ((unsigned long )*(object_list + (unsigned long )i) == (unsigned long )((struct drm_gem_object *)0)) {
14533a14534,14535
>   if ((unsigned long )*(object_list + (unsigned long )i) == (unsigned long )((struct drm_gem_object *)0)) {
> #line 1834
14536,14537d14537
< #line 1835
<     ret = -9;
14538a14539,14540
>     ret = -9;
> #line 1837
14543,14544d14544
< #line 1839
<   (*(object_list + (unsigned long )i))->pending_read_domains = 0U;
14546c14546
<   (*(object_list + (unsigned long )i))->pending_write_domain = 0U;
---
>   (*(object_list + (unsigned long )i))->pending_read_domains = 0U;
14547a14548,14549
>   (*(object_list + (unsigned long )i))->pending_write_domain = 0U;
> #line 1842
14550,14551d14551
< #line 1844
<   if (ret != 0) {
14552a14553,14554
>   if (ret != 0) {
> #line 1846
14555c14557
< #line 1846
---
> #line 1847
14560c14562
< #line 1848
---
> #line 1849
14562c14564
< #line 1829
---
> #line 1830
14565,14566d14566
< #line 1829
<   if ((uint32_t )i < args->buffer_count) {
14567a14568,14569
>   if ((uint32_t )i < args->buffer_count) {
> #line 1831
14572,14573d14573
< #line 1852
<   batch_obj = *(object_list + (unsigned long )(args->buffer_count - 1U));
14575c14575
<   batch_obj->pending_read_domains = 8U;
---
>   batch_obj = *(object_list + (unsigned long )(args->buffer_count - 1U));
14576a14577,14578
>   batch_obj->pending_read_domains = 8U;
> #line 1855
14578c14580
< #line 1858
---
> #line 1859
14580c14582
< #line 1858
---
> #line 1859
14583,14584d14584
< #line 1859
<   obj = *(object_list + (unsigned long )i);
14585a14586,14587
>   obj = *(object_list + (unsigned long )i);
> #line 1861
14587c14589
< #line 1862
---
> #line 1863
14589,14590d14590
< #line 1868
<     ret = -12;
14591a14592,14593
>     ret = -12;
> #line 1870
14596c14598
< #line 1873
---
> #line 1874
14598,14599d14599
< #line 1876
<   if (ret != 0) {
14600a14601,14602
>   if (ret != 0) {
> #line 1878
14605c14607
< #line 1858
---
> #line 1859
14608,14609d14609
< #line 1858
<   if ((uint32_t )i < args->buffer_count) {
14610a14611,14612
>   if ((uint32_t )i < args->buffer_count) {
> #line 1860
14615c14617
< #line 1883
---
> #line 1884
14617c14619
< #line 1894
---
> #line 1895
14619c14621
< #line 1903
---
> #line 1904
14621,14622d14622
< #line 1906
<   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
14624c14624
<   if (ret != 0) {
---
>   ret = i915_dispatch_gem_execbuffer(dev, args, exec_offset);
14626c14626
<     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
---
>   if (ret != 0) {
14627a14628,14629
>     printk("<3>[drm:%s] *ERROR* dispatch failed %d\n", "i915_gem_execbuffer", ret);
> #line 1910
14632c14634
< #line 1916
---
> #line 1917
14634,14635d14635
< #line 1927
<   seqno = i915_add_request(dev, flush_domains);
14636a14637,14638
>   seqno = i915_add_request(dev, flush_domains);
> #line 1929
14638c14640
< #line 1928
---
> #line 1929
14640c14642
< #line 1928
---
> #line 1929
14642c14644
<                          "i" (1928), "i" (24UL));
---
>                          "i" (1929), "i" (24UL));
14644c14646
< #line 1928
---
> #line 1929
14649,14650d14650
< #line 1929
<   i915_file_priv->mm.last_gem_seqno = seqno;
14651a14652,14653
>   i915_file_priv->mm.last_gem_seqno = seqno;
> #line 1931
14653c14655
< #line 1930
---
> #line 1931
14656,14657d14657
< #line 1931
<   obj___0 = *(object_list + (unsigned long )i);
14658a14659,14660
>   obj___0 = *(object_list + (unsigned long )i);
> #line 1933
14660,14661d14661
< #line 1934
<   i915_gem_object_move_to_active(obj___0);
14662a14663,14664
>   i915_gem_object_move_to_active(obj___0);
> #line 1936
14664c14666
< #line 1930
---
> #line 1931
14667,14668d14668
< #line 1930
<   if ((uint32_t )i < args->buffer_count) {
14669a14670,14671
>   if ((uint32_t )i < args->buffer_count) {
> #line 1932
14674c14676
< #line 1947
---
> #line 1948
14676c14678
< #line 1947
---
> #line 1948
14678,14679d14679
< #line 1951
<   if (ret != 0) {
14680a14681,14682
>   if (ret != 0) {
> #line 1953
14687,14688d14688
< #line 1956
<   if ((unsigned long )object_list != (unsigned long )((struct drm_gem_object **)0)) {
14689a14690,14691
>   if ((unsigned long )object_list != (unsigned long )((struct drm_gem_object **)0)) {
> #line 1958
14691c14693
< #line 1957
---
> #line 1958
14694c14696
< #line 1958
---
> #line 1959
14696c14698
< #line 1957
---
> #line 1958
14699,14700d14700
< #line 1957
<     if (i < pinned) {
14701a14702,14703
>     if (i < pinned) {
> #line 1959
14706c14708
< #line 1960
---
> #line 1961
14708c14710
< #line 1960
---
> #line 1961
14711c14713
< #line 1961
---
> #line 1962
14713c14715
< #line 1960
---
> #line 1961
14716,14717d14717
< #line 1960
<     if ((uint32_t )i < args->buffer_count) {
14718a14719,14720
>     if ((uint32_t )i < args->buffer_count) {
> #line 1962
14727c14729
< #line 1963
---
> #line 1964
14730c14732
< #line 1966
---
> #line 1967
14732c14734
< #line 1968
---
> #line 1969
14734c14736
< #line 1971
---
> #line 1972
14738c14740
< #line 1975 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 1976 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14747,14748d14748
< #line 1977
<   dev = obj->dev;
14749a14750,14751
>   dev = obj->dev;
> #line 1979
14751,14752d14752
< #line 1982
<   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
14754c14754
<     ret = i915_gem_object_bind_to_gtt(obj, alignment);
---
>   if ((unsigned long )obj_priv->gtt_space == (unsigned long )((struct drm_mm_node *)0)) {
14756c14756
<     if (ret != 0) {
---
>     ret = i915_gem_object_bind_to_gtt(obj, alignment);
14758c14758
<       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
---
>     if (ret != 0) {
14759a14760,14761
>       printk("<3>[drm:%s] *ERROR* Failure to bind: %d", "i915_gem_object_pin", ret);
> #line 1987
14767c14769
< #line 1989
---
> #line 1990
14769,14770d14770
< #line 1994
<   if (obj_priv->pin_count == 1) {
14772c14772
<     atomic_inc(& dev->pin_count);
---
>   if (obj_priv->pin_count == 1) {
14774c14774
<     atomic_add((int )obj->size, & dev->pin_memory);
---
>     atomic_inc(& dev->pin_count);
14775a14776,14777
>     atomic_add((int )obj->size, & dev->pin_memory);
> #line 1998
14777c14779
< #line 1997
---
> #line 1998
14779c14781
< #line 1997
---
> #line 1998
14781c14783
< #line 2001
---
> #line 2002
14792c14794
< #line 2005
---
> #line 2006
14796c14798
< #line 2009 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2010 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14806,14807d14807
< #line 2011
<   dev = obj->dev;
14809c14809
<   dev_priv = (drm_i915_private_t *)dev->dev_private;
---
>   dev = obj->dev;
14810a14811,14812
>   dev_priv = (drm_i915_private_t *)dev->dev_private;
> #line 2014
14812,14813d14813
< #line 2016
<   obj_priv->pin_count = obj_priv->pin_count - 1;
14814a14815,14816
>   obj_priv->pin_count = obj_priv->pin_count - 1;
> #line 2018
14816c14818
< #line 2017
---
> #line 2018
14818c14820
< #line 2017
---
> #line 2018
14820c14822
<                          "i" (2017), "i" (24UL));
---
>                          "i" (2018), "i" (24UL));
14822c14824
< #line 2017
---
> #line 2018
14827c14829
< #line 2018
---
> #line 2019
14830c14832
< #line 2018
---
> #line 2019
14832c14834
< #line 2018
---
> #line 2019
14834c14836
<                          "i" (2018), "i" (24UL));
---
>                          "i" (2019), "i" (24UL));
14836c14838
< #line 2018
---
> #line 2019
14841,14842d14842
< #line 2024
<   if (obj_priv->pin_count == 0) {
14843a14844,14845
>   if (obj_priv->pin_count == 0) {
> #line 2026
14845c14847
< #line 2028
---
> #line 2029
14850,14851d14851
< #line 2030
<     atomic_dec(& dev->pin_count);
14852a14853,14854
>     atomic_dec(& dev->pin_count);
> #line 2032
14857c14859
< #line 2033
---
> #line 2034
14861c14863
< #line 2037 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2038 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14870c14872
< #line 2040
---
> #line 2041
14872c14874
< #line 2045
---
> #line 2046
14874,14875d14875
< #line 2047
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
14877c14877
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
14878a14879,14880
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 2050
14881,14882d14882
< #line 2051
<     mutex_unlock(& dev->struct_mutex);
14883a14884,14885
>     mutex_unlock(& dev->struct_mutex);
> #line 2053
14888c14890
< #line 2054
---
> #line 2055
14890,14891d14891
< #line 2056
<   ret = i915_gem_object_pin(obj, (uint32_t )args->alignment);
14893c14893
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, (uint32_t )args->alignment);
14895c14895
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
14897c14897
<     mutex_unlock(& dev->struct_mutex);
---
>     drm_gem_object_unreference(obj);
14898a14899,14900
>     mutex_unlock(& dev->struct_mutex);
> #line 2061
14903,14904d14904
< #line 2066
<   if ((int )obj->write_domain & 1) {
14906c14906
<     i915_gem_clflush_object(obj);
---
>   if ((int )obj->write_domain & 1) {
14908c14908
<     drm_agp_chipset_flush(dev);
---
>     i915_gem_clflush_object(obj);
14909a14910,14911
>     drm_agp_chipset_flush(dev);
> #line 2070
14914,14915d14915
< #line 2071
<   args->offset = (uint64_t )obj_priv->gtt_offset;
14917c14917
<   drm_gem_object_unreference(obj);
---
>   args->offset = (uint64_t )obj_priv->gtt_offset;
14918a14919,14920
>   drm_gem_object_unreference(obj);
> #line 2074
14920c14922
< #line 2075
---
> #line 2076
14924c14926
< #line 2079 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2080 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14931c14933
< #line 2082
---
> #line 2083
14933c14935
< #line 2085
---
> #line 2086
14935,14936d14936
< #line 2087
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
14938c14938
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
14939a14940,14941
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 2090
14942,14943d14943
< #line 2091
<     mutex_unlock(& dev->struct_mutex);
14944a14945,14946
>     mutex_unlock(& dev->struct_mutex);
> #line 2093
14949c14951
< #line 2095
---
> #line 2096
14951,14952d14952
< #line 2097
<   drm_gem_object_unreference(obj);
14954c14954
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
14955a14956,14957
>   mutex_unlock(& dev->struct_mutex);
> #line 2100
14959c14961
< #line 2103 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2104 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
14967c14969
< #line 2106
---
> #line 2107
14969,14970d14970
< #line 2110
<   mutex_lock_nested(& dev->struct_mutex, 0U);
14972c14972
<   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
14974c14974
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_lookup(dev, file_priv, (int )args->handle);
14975a14976,14977
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 2114
14978,14979d14979
< #line 2115
<     mutex_unlock(& dev->struct_mutex);
14980a14981,14982
>     mutex_unlock(& dev->struct_mutex);
> #line 2117
14985,14986d14986
< #line 2119
<   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
14987a14988,14989
>   obj_priv = (struct drm_i915_gem_object *)obj->driver_private;
> #line 2121
14989,14990d14990
< #line 2122
<   drm_gem_object_unreference(obj);
14992c14992
<   mutex_unlock(& dev->struct_mutex);
---
>   drm_gem_object_unreference(obj);
14993a14994,14995
>   mutex_unlock(& dev->struct_mutex);
> #line 2125
14997c14999
< #line 2128 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2129 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15003c15005
< #line 2131
---
> #line 2132
15005c15007
< #line 2131
---
> #line 2132
15009c15011
< #line 2134 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2135 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15016c15018
< #line 2138
---
> #line 2139
15018,15019d15019
< #line 2138
<   obj_priv = (struct drm_i915_gem_object *)tmp;
15021c15021
<   if ((unsigned long )obj_priv == (unsigned long )((struct drm_i915_gem_object *)0)) {
---
>   obj_priv = (struct drm_i915_gem_object *)tmp;
15022a15023,15024
>   if ((unsigned long )obj_priv == (unsigned long )((struct drm_i915_gem_object *)0)) {
> #line 2141
15027,15028d15028
< #line 2148
<   obj->write_domain = 1U;
15029a15030,15031
>   obj->write_domain = 1U;
> #line 2150
15031,15032d15032
< #line 2151
<   obj->driver_private = (void *)obj_priv;
15034c15034
<   obj_priv->obj = obj;
---
>   obj->driver_private = (void *)obj_priv;
15036c15036
<   INIT_LIST_HEAD(& obj_priv->list);
---
>   obj_priv->obj = obj;
15037a15038,15039
>   INIT_LIST_HEAD(& obj_priv->list);
> #line 2155
15041c15043
< #line 2157 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2158 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15047c15049
< #line 2159
---
> #line 2160
15049c15051
< #line 2161
---
> #line 2162
15052c15054
< #line 2162
---
> #line 2163
15055,15056d15056
< #line 2161
<   if (obj_priv->pin_count > 0) {
15057a15058,15059
>   if (obj_priv->pin_count > 0) {
> #line 2163
15062c15064
< #line 2164
---
> #line 2165
15064,15065d15065
< #line 2166
<   drm_free((void *)obj_priv->page_cpu_valid, 1UL, 2);
15067c15067
<   drm_free(obj->driver_private, 1UL, 2);
---
>   drm_free((void *)obj_priv->page_cpu_valid, 1UL, 2);
15068a15069,15070
>   drm_free(obj->driver_private, 1UL, 2);
> #line 2169
15072c15074
< #line 2171 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2172 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15083c15085
< #line 2176
---
> #line 2177
15085c15087
< #line 2180
---
> #line 2181
15087c15089
< #line 2180
---
> #line 2181
15089c15091
< #line 2180
---
> #line 2181
15091c15093
< #line 2180
---
> #line 2181
15093c15095
<                          "i" (2180), "i" (24UL));
---
>                          "i" (2181), "i" (24UL));
15095c15097
< #line 2180
---
> #line 2181
15100,15101d15101
< #line 2182
<   ret = i915_gem_object_set_domain(obj, read_domains, write_domain);
15103c15103
<   if (ret != 0) {
---
>   ret = i915_gem_object_set_domain(obj, read_domains, write_domain);
15104a15105,15106
>   if (ret != 0) {
> #line 2185
15109c15111
< #line 2185
---
> #line 2186
15111,15112d15112
< #line 2187
<   if ((flush_domains & 4294967230U) != 0U) {
15113a15114,15115
>   if ((flush_domains & 4294967230U) != 0U) {
> #line 2189
15118c15120
< #line 2190
---
> #line 2191
15122c15124
< #line 2195 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2196 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15132c15134
< #line 2201
---
> #line 2202
15135c15137
< #line 2202
---
> #line 2203
15137c15139
< #line 2202
---
> #line 2203
15139c15141
< #line 2205
---
> #line 2206
15141,15142d15142
< #line 2207
<   if (obj_priv->pin_count != 0) {
15144c15144
<     printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
---
>   if (obj_priv->pin_count != 0) {
15146c15146
<     mutex_unlock(& dev->struct_mutex);
---
>     printk("<3>[drm:%s] *ERROR* Pinned object in unbind list\n", "i915_gem_evict_from_list");
15147a15148,15149
>     mutex_unlock(& dev->struct_mutex);
> #line 2211
15152,15153d15153
< #line 2213
<   ret = i915_gem_object_unbind(obj);
15155c15155
<   if (ret != 0) {
---
>   ret = i915_gem_object_unbind(obj);
15156a15157,15158
>   if (ret != 0) {
> #line 2216
15159,15160d15160
< #line 2217
<     mutex_unlock(& dev->struct_mutex);
15161a15162,15163
>     mutex_unlock(& dev->struct_mutex);
> #line 2219
15167c15169
< #line 2201
---
> #line 2202
15169,15170d15170
< #line 2201
<   if (tmp == 0) {
15171a15172,15173
>   if (tmp == 0) {
> #line 2203
15177c15179
< #line 2223
---
> #line 2224
15181c15183
< #line 2227 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2228 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15208c15210
< #line 2229
---
> #line 2230
15210,15211d15211
< #line 2233
<   if (dev_priv->mm.suspended != 0) {
15212a15213,15214
>   if (dev_priv->mm.suspended != 0) {
> #line 2235
15217c15219
< #line 2239
---
> #line 2240
15219c15221
< #line 2241
---
> #line 2242
15221c15223
< #line 2245
---
> #line 2246
15223c15225
< #line 2247
---
> #line 2248
15225,15226d15226
< #line 2250
<   if (seqno == 0U) {
15228c15228
<     mutex_unlock(& dev->struct_mutex);
---
>   if (seqno == 0U) {
15229a15230,15231
>     mutex_unlock(& dev->struct_mutex);
> #line 2253
15234,15235d15235
< #line 2255
<   dev_priv->mm.waiting_gem_seqno = seqno;
15237c15237
<   last_seqno = 0U;
---
>   dev_priv->mm.waiting_gem_seqno = seqno;
15238a15239,15240
>   last_seqno = 0U;
> #line 2258
15241,15242d15242
< #line 2259
<   cur_seqno = i915_get_gem_seqno(dev);
15243a15244,15245
>   cur_seqno = i915_get_gem_seqno(dev);
> #line 2261
15245,15246d15246
< #line 2260
<   if (tmp != 0) {
15247a15248,15249
>   if (tmp != 0) {
> #line 2262
15252,15253d15253
< #line 2262
<   if (last_seqno == cur_seqno) {
15254a15255,15256
>   if (last_seqno == cur_seqno) {
> #line 2264
15256c15258
< #line 2263
---
> #line 2264
15258,15259d15259
< #line 2263
<     if (tmp___0 > 100) {
15261c15261
<       printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
---
>     if (tmp___0 > 100) {
15263c15263
<       dev_priv->mm.wedged = 1;
---
>       printk("<3>[drm:%s] *ERROR* hardware wedged\n", "i915_gem_idle");
15265c15265
<       __wake_up(& dev_priv->irq_queue, 1U, 1, 0);
---
>       dev_priv->mm.wedged = 1;
15266a15267,15268
>       __wake_up(& dev_priv->irq_queue, 1U, 1, 0);
> #line 2268
15274,15275d15275
< #line 2270
<   msleep(10U);
15277c15277
<   last_seqno = cur_seqno;
---
>   msleep(10U);
15278a15279,15280
>   last_seqno = cur_seqno;
> #line 2273
15281c15283
< #line 2273
---
> #line 2274
15283c15285
< #line 2275
---
> #line 2276
15285c15287
< #line 2280
---
> #line 2281
15287c15289
< #line 2280
---
> #line 2281
15289c15291
< #line 2280
---
> #line 2281
15291c15293
< #line 2280
---
> #line 2281
15293c15295
<                          "i" (2280), "i" (24UL));
---
>                          "i" (2281), "i" (24UL));
15295c15297
< #line 2280
---
> #line 2281
15300c15302
< #line 2281
---
> #line 2282
15302c15304
< #line 2281
---
> #line 2282
15304c15306
< #line 2281
---
> #line 2282
15306c15308
< #line 2281
---
> #line 2282
15308c15310
<                          "i" (2281), "i" (24UL));
---
>                          "i" (2282), "i" (24UL));
15310c15312
< #line 2281
---
> #line 2282
15315c15317
< #line 2286
---
> #line 2287
15317c15319
< #line 2286
---
> #line 2287
15319c15321
< #line 2286
---
> #line 2287
15321c15323
< #line 2286
---
> #line 2287
15323c15325
<                          "i" (2286), "i" (24UL));
---
>                          "i" (2287), "i" (24UL));
15325c15327
< #line 2286
---
> #line 2287
15330,15331d15331
< #line 2289
<   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
15333c15333
<   if (ret != 0) {
---
>   ret = i915_gem_evict_from_list(dev, & dev_priv->mm.inactive_list);
15334a15335,15336
>   if (ret != 0) {
> #line 2292
15339c15341
< #line 2293
---
> #line 2294
15341c15343
< #line 2293
---
> #line 2294
15343c15345
< #line 2293
---
> #line 2294
15345c15347
< #line 2293
---
> #line 2294
15347c15349
<                          "i" (2293), "i" (24UL));
---
>                          "i" (2294), "i" (24UL));
15349c15351
< #line 2293
---
> #line 2294
15354c15356
< #line 2294
---
> #line 2295
15356c15358
< #line 2294
---
> #line 2295
15358c15360
< #line 2294
---
> #line 2295
15360c15362
< #line 2294
---
> #line 2295
15362c15364
<                          "i" (2294), "i" (24UL));
---
>                          "i" (2295), "i" (24UL));
15364c15366
< #line 2294
---
> #line 2295
15369c15371
< #line 2295
---
> #line 2296
15371c15373
< #line 2295
---
> #line 2296
15373c15375
< #line 2295
---
> #line 2296
15375c15377
< #line 2295
---
> #line 2296
15377c15379
<                          "i" (2295), "i" (24UL));
---
>                          "i" (2296), "i" (24UL));
15379c15381
< #line 2295
---
> #line 2296
15384c15386
< #line 2296
---
> #line 2297
15386c15388
< #line 2296
---
> #line 2297
15388c15390
< #line 2296
---
> #line 2297
15390c15392
< #line 2296
---
> #line 2297
15392c15394
<                          "i" (2296), "i" (24UL));
---
>                          "i" (2297), "i" (24UL));
15394c15396
< #line 2296
---
> #line 2297
15399c15401
< #line 2297
---
> #line 2298
15403c15405
< #line 2301 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2302 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15412c15414
< #line 2303
---
> #line 2304
15414,15415d15415
< #line 2311
<   if ((((dev->pci_device != 10690 && dev->pci_device != 10674) && dev->pci_device != 10706) && dev->pci_device != 10818) && ((dev->pci_device != 11778 && dev->pci_device != 11794) && dev->pci_device != 11810)) {
15416a15417,15418
>   if ((((dev->pci_device != 10690 && dev->pci_device != 10674) && dev->pci_device != 10706) && dev->pci_device != 10818) && ((dev->pci_device != 11778 && dev->pci_device != 11794) && dev->pci_device != 11810)) {
> #line 2313
15421,15422d15422
< #line 2314
<   obj = drm_gem_object_alloc(dev, 4096UL);
15424c15424
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 4096UL);
15426c15426
<     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
---
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
15427a15428,15429
>     printk("<3>[drm:%s] *ERROR* Failed to allocate status page\n", "i915_gem_init_hws");
> #line 2318
15432c15434
< #line 2319
---
> #line 2320
15434,15435d15435
< #line 2321
<   ret = i915_gem_object_pin(obj, 4096U);
15437c15437
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096U);
15439c15439
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
15440a15441,15442
>     drm_gem_object_unreference(obj);
> #line 2325
15445,15446d15446
< #line 2327
<   dev_priv->status_gfx_addr = obj_priv->gtt_offset;
15448c15448
<   dev_priv->hws_map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
---
>   dev_priv->status_gfx_addr = obj_priv->gtt_offset;
15450c15450
<   dev_priv->hws_map.size = 4096UL;
---
>   dev_priv->hws_map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
15452c15452
<   dev_priv->hws_map.type = _DRM_FRAME_BUFFER;
---
>   dev_priv->hws_map.size = 4096UL;
15454c15454
<   dev_priv->hws_map.flags = 0;
---
>   dev_priv->hws_map.type = _DRM_FRAME_BUFFER;
15455a15456,15457
>   dev_priv->hws_map.flags = 0;
> #line 2333
15457,15458d15458
< #line 2336
<   drm_core_ioremap_wc(& dev_priv->hws_map, dev);
15460c15460
<   if ((unsigned long )dev_priv->hws_map.handle == (unsigned long )((void *)0)) {
---
>   drm_core_ioremap_wc(& dev_priv->hws_map, dev);
15462c15462
<     printk("<3>[drm:%s] *ERROR* Failed to map status page.\n", "i915_gem_init_hws");
---
>   if ((unsigned long )dev_priv->hws_map.handle == (unsigned long )((void *)0)) {
15464c15464
<     memset((void *)(& dev_priv->hws_map), 0, 40UL);
---
>     printk("<3>[drm:%s] *ERROR* Failed to map status page.\n", "i915_gem_init_hws");
15466c15466
<     drm_gem_object_unreference(obj);
---
>     memset((void *)(& dev_priv->hws_map), 0, 40UL);
15467a15468,15469
>     drm_gem_object_unreference(obj);
> #line 2342
15472,15473d15473
< #line 2343
<   dev_priv->hws_obj = obj;
15475c15475
<   dev_priv->hw_status_page = dev_priv->hws_map.handle;
---
>   dev_priv->hws_obj = obj;
15477c15477
<   memset(dev_priv->hw_status_page, 0, 4096UL);
---
>   dev_priv->hw_status_page = dev_priv->hws_map.handle;
15479c15479
<   writel(dev_priv->status_gfx_addr, (void volatile   *)dev_priv->regs + 8320U);
---
>   memset(dev_priv->hw_status_page, 0, 4096UL);
15480a15481,15482
>   writel(dev_priv->status_gfx_addr, (void volatile   *)dev_priv->regs + 8320U);
> #line 2348
15482c15484
< #line 2347
---
> #line 2348
15487c15489
< #line 2349
---
> #line 2350
15491c15493
< #line 2353 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2354 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15500c15502
< #line 2355
---
> #line 2356
15502,15503d15503
< #line 2360
<   ret = i915_gem_init_hws(dev);
15505c15505
<   if (ret != 0) {
---
>   ret = i915_gem_init_hws(dev);
15506a15507,15508
>   if (ret != 0) {
> #line 2363
15511,15512d15512
< #line 2364
<   obj = drm_gem_object_alloc(dev, 131072UL);
15514c15514
<   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
---
>   obj = drm_gem_object_alloc(dev, 131072UL);
15516c15516
<     printk("<3>[drm:%s] *ERROR* Failed to allocate ringbuffer\n", "i915_gem_init_ringbuffer");
---
>   if ((unsigned long )obj == (unsigned long )((struct drm_gem_object *)0)) {
15517a15518,15519
>     printk("<3>[drm:%s] *ERROR* Failed to allocate ringbuffer\n", "i915_gem_init_ringbuffer");
> #line 2368
15522c15524
< #line 2369
---
> #line 2370
15524,15525d15525
< #line 2371
<   ret = i915_gem_object_pin(obj, 4096U);
15527c15527
<   if (ret != 0) {
---
>   ret = i915_gem_object_pin(obj, 4096U);
15529c15529
<     drm_gem_object_unreference(obj);
---
>   if (ret != 0) {
15530a15531,15532
>     drm_gem_object_unreference(obj);
> #line 2375
15535,15536d15536
< #line 2378
<   dev_priv->ring.Size = obj->size;
15537a15538,15539
>   dev_priv->ring.Size = obj->size;
> #line 2380
15539,15540d15540
< #line 2381
<   dev_priv->ring.map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
15542c15542
<   dev_priv->ring.map.size = obj->size;
---
>   dev_priv->ring.map.offset = (dev->agp)->base + (unsigned long )obj_priv->gtt_offset;
15544c15544
<   dev_priv->ring.map.type = _DRM_FRAME_BUFFER;
---
>   dev_priv->ring.map.size = obj->size;
15546c15546
<   dev_priv->ring.map.flags = 0;
---
>   dev_priv->ring.map.type = _DRM_FRAME_BUFFER;
15547a15548,15549
>   dev_priv->ring.map.flags = 0;
> #line 2386
15549,15550d15550
< #line 2387
<   drm_core_ioremap_wc(& dev_priv->ring.map, dev);
15552c15552
<   if ((unsigned long )dev_priv->ring.map.handle == (unsigned long )((void *)0)) {
---
>   drm_core_ioremap_wc(& dev_priv->ring.map, dev);
15554c15554
<     printk("<3>[drm:%s] *ERROR* Failed to map ringbuffer.\n", "i915_gem_init_ringbuffer");
---
>   if ((unsigned long )dev_priv->ring.map.handle == (unsigned long )((void *)0)) {
15556c15556
<     memset((void *)(& dev_priv->ring), 0, 88UL);
---
>     printk("<3>[drm:%s] *ERROR* Failed to map ringbuffer.\n", "i915_gem_init_ringbuffer");
15558c15558
<     drm_gem_object_unreference(obj);
---
>     memset((void *)(& dev_priv->ring), 0, 88UL);
15559a15560,15561
>     drm_gem_object_unreference(obj);
> #line 2393
15564,15565d15565
< #line 2394
<   dev_priv->ring.ring_obj = obj;
15566a15567,15568
>   dev_priv->ring.ring_obj = obj;
> #line 2396
15568,15569d15569
< #line 2398
<   writel(0U, (void volatile   *)dev_priv->regs + 8252U);
15571c15571
<   writel(0U, (void volatile   *)dev_priv->regs + 8244U);
---
>   writel(0U, (void volatile   *)dev_priv->regs + 8252U);
15573c15573
<   writel(0U, (void volatile   *)dev_priv->regs + 8240U);
---
>   writel(0U, (void volatile   *)dev_priv->regs + 8244U);
15574a15575,15576
>   writel(0U, (void volatile   *)dev_priv->regs + 8240U);
> #line 2402
15576,15577d15577
< #line 2404
<   writel(obj_priv->gtt_offset, (void volatile   *)dev_priv->regs + 8248U);
15578a15579,15580
>   writel(obj_priv->gtt_offset, (void volatile   *)dev_priv->regs + 8248U);
> #line 2406
15580c15582
< #line 2411
---
> #line 2412
15582c15584
< #line 2413
---
> #line 2414
15586c15588
< #line 2417 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2418 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15592c15594
< #line 2419
---
> #line 2420
15594,15595d15595
< #line 2421
<   if ((unsigned long )dev_priv->ring.ring_obj == (unsigned long )((struct drm_gem_object *)0)) {
15596a15597,15598
>   if ((unsigned long )dev_priv->ring.ring_obj == (unsigned long )((struct drm_gem_object *)0)) {
> #line 2423
15601c15603
< #line 2424
---
> #line 2425
15603,15604d15604
< #line 2426
<   i915_gem_object_unpin(dev_priv->ring.ring_obj);
15606c15606
<   drm_gem_object_unreference(dev_priv->ring.ring_obj);
---
>   i915_gem_object_unpin(dev_priv->ring.ring_obj);
15608c15608
<   dev_priv->ring.ring_obj = 0;
---
>   drm_gem_object_unreference(dev_priv->ring.ring_obj);
15609a15610,15611
>   dev_priv->ring.ring_obj = 0;
> #line 2430
15611,15612d15612
< #line 2431
<   if ((unsigned long )dev_priv->hws_obj != (unsigned long )((struct drm_gem_object *)0)) {
15614c15614
<     i915_gem_object_unpin(dev_priv->hws_obj);
---
>   if ((unsigned long )dev_priv->hws_obj != (unsigned long )((struct drm_gem_object *)0)) {
15616c15616
<     drm_gem_object_unreference(dev_priv->hws_obj);
---
>     i915_gem_object_unpin(dev_priv->hws_obj);
15618c15618
<     dev_priv->hws_obj = 0;
---
>     drm_gem_object_unreference(dev_priv->hws_obj);
15619a15620,15621
>     dev_priv->hws_obj = 0;
> #line 2436
15621c15623
< #line 2438
---
> #line 2439
15626c15628
< #line 2440
---
> #line 2441
15630c15632
< #line 2443 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2444 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15645c15647
< #line 2446
---
> #line 2447
15647,15648d15648
< #line 2449
<   if (dev_priv->mm.wedged != 0) {
15650c15650
<     printk("<3>[drm:%s] *ERROR* Reenabling wedged hardware, good luck\n", "i915_gem_entervt_ioctl");
---
>   if (dev_priv->mm.wedged != 0) {
15651a15652,15653
>     printk("<3>[drm:%s] *ERROR* Reenabling wedged hardware, good luck\n", "i915_gem_entervt_ioctl");
> #line 2452
15656,15657d15657
< #line 2454
<   ret = i915_gem_init_ringbuffer(dev);
15659c15659
<   if (ret != 0) {
---
>   ret = i915_gem_init_ringbuffer(dev);
15660a15661,15662
>   if (ret != 0) {
> #line 2457
15665,15666d15666
< #line 2458
<   mutex_lock_nested(& dev->struct_mutex, 0U);
15667a15668,15669
>   mutex_lock_nested(& dev->struct_mutex, 0U);
> #line 2460
15669c15671
< #line 2459
---
> #line 2460
15671c15673
< #line 2459
---
> #line 2460
15673c15675
< #line 2459
---
> #line 2460
15675c15677
<                          "i" (2459), "i" (24UL));
---
>                          "i" (2460), "i" (24UL));
15677c15679
< #line 2459
---
> #line 2460
15682c15684
< #line 2460
---
> #line 2461
15684c15686
< #line 2460
---
> #line 2461
15686c15688
< #line 2460
---
> #line 2461
15688c15690
< #line 2460
---
> #line 2461
15690c15692
<                          "i" (2460), "i" (24UL));
---
>                          "i" (2461), "i" (24UL));
15692c15694
< #line 2460
---
> #line 2461
15697c15699
< #line 2461
---
> #line 2462
15699c15701
< #line 2461
---
> #line 2462
15701c15703
< #line 2461
---
> #line 2462
15703c15705
< #line 2461
---
> #line 2462
15705c15707
<                          "i" (2461), "i" (24UL));
---
>                          "i" (2462), "i" (24UL));
15707c15709
< #line 2461
---
> #line 2462
15712c15714
< #line 2462
---
> #line 2463
15714c15716
< #line 2462
---
> #line 2463
15716c15718
< #line 2462
---
> #line 2463
15718c15720
< #line 2462
---
> #line 2463
15720c15722
<                          "i" (2462), "i" (24UL));
---
>                          "i" (2463), "i" (24UL));
15722c15724
< #line 2462
---
> #line 2463
15727,15728d15728
< #line 2463
<   dev_priv->mm.suspended = 0;
15729a15730,15731
>   dev_priv->mm.suspended = 0;
> #line 2465
15731c15733
< #line 2466
---
> #line 2467
15733c15735
< #line 2468
---
> #line 2469
15737c15739
< #line 2472 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2473 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15743,15744d15744
< #line 2477
<   mutex_lock_nested(& dev->struct_mutex, 0U);
15746c15746
<   ret = i915_gem_idle(dev);
---
>   mutex_lock_nested(& dev->struct_mutex, 0U);
15748c15748
<   if (ret == 0) {
---
>   ret = i915_gem_idle(dev);
15749a15750,15751
>   if (ret == 0) {
> #line 2481
15754c15756
< #line 2481
---
> #line 2482
15756c15758
< #line 2483
---
> #line 2484
15758c15760
< #line 2485
---
> #line 2486
15762c15764
< #line 2489 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2490 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15769c15771
< #line 2492
---
> #line 2493
15771c15773
< #line 2494
---
> #line 2495
15773,15774d15774
< #line 2496
<   if ((unsigned long )dev_priv->ring.ring_obj != (unsigned long )((struct drm_gem_object *)0)) {
15776c15776
<     ret = i915_gem_idle(dev);
---
>   if ((unsigned long )dev_priv->ring.ring_obj != (unsigned long )((struct drm_gem_object *)0)) {
15778c15778
<     if (ret != 0) {
---
>     ret = i915_gem_idle(dev);
15779a15780,15781
>     if (ret != 0) {
> #line 2500
15785c15787
< #line 2501
---
> #line 2502
15790,15791d15791
< #line 2504
<   mutex_unlock(& dev->struct_mutex);
15792a15793,15794
>   mutex_unlock(& dev->struct_mutex);
> #line 2506
15796c15798
< #line 2508 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
---
> #line 2509 "/work/ldvuser/novikov/work/current--X--drivers/gpu/drm/i915/i915.ko--X--defaultlinux--X--08_1a--X--cpachecker/linux/csd_deg_dscv/21/dscv_tempdir/dscv/ri/08_1a/drivers/gpu/drm/i915/i915_gem.c.prepared"
15806c15808
< #line 2510
---
> #line 2511
15808,15809d15809
< #line 2512
<   INIT_LIST_HEAD(& dev_priv->mm.active_list);
15811c15811
<   INIT_LIST_HEAD(& dev_priv->mm.flushing_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.active_list);
15813c15813
<   INIT_LIST_HEAD(& dev_priv->mm.inactive_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.flushing_list);
15815c15815
<   INIT_LIST_HEAD(& dev_priv->mm.request_list);
---
>   INIT_LIST_HEAD(& dev_priv->mm.inactive_list);
15816a15817,15818
>   INIT_LIST_HEAD(& dev_priv->mm.request_list);
> #line 2517
15818c15820
< #line 2516
---
> #line 2517
15820c15822
< #line 2516
---
> #line 2517
15823c15825
< #line 2516
---
> #line 2517
15825c15827
< #line 2516
---
> #line 2517
15827c15829
< #line 2516
---
> #line 2517
15829c15831
< #line 2518
---
> #line 2519
15831c15833
< #line 2518
---
> #line 2519
15833c15835
< #line 2518
---
> #line 2519
15836c15838
< #line 2518
---
> #line 2519
15838c15840
< #line 2518
---
> #line 2519
15840c15842
< #line 2520
---
> #line 2521
15842,15843d15843
< #line 2522
<   i915_gem_detect_bit_6_swizzle(dev);
15844a15845,15846
>   i915_gem_detect_bit_6_swizzle(dev);
> #line 2524
